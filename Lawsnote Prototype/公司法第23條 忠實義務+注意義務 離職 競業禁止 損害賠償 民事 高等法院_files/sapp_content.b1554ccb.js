/*! For license information please see sapp_content.b1554ccb.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{1543:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,u,l,i,c=r(n(153)),s=r(n(35)),d=r(n(36)),f=r(n(331)),p=r(n(96)),m=r(n(97)),h=r(n(85)),v=r(n(7)),y=r(n(1514)),g=U(n(0)),b=n(152),w=n(1602),O=r(n(1685)),k=n(233),_=n(340),P=n(337),j=n(541),S=n(127),E=r(n(20)),C=r(n(1609)),I=r(n(1695)),R=U(n(21)),T=r(n(1616)),M=n(545),N=r(n(539)),D=r(n(1702)),x=n(1703),A=n(1630),L=U(n(1603));function B(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(B=function(e){return e?n:t})(e)}function U(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=B(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.default)(e);if(t){var a=(0,h.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,m.default)(this,n)}}var F=(o=w.FeaturesLock.FreeFeature,u=w.FeaturesLock.FreeFeature,l=function(e){(0,p.default)(n,e);var t=W(n);function n(){var e;(0,s.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,v.default)((0,f.default)(e),"category","law"),(0,v.default)((0,f.default)(e),"childrenContextValue",{category:e.category,docObj:null}),(0,v.default)((0,f.default)(e),"onClickLawSection",(function(t){var n=e.lawProfile,r=n.lawId,a=n.lawName;e.props.dispatch((0,k.resetDocumentToggles)()),e.gotoViewLawSection(!e.props.displayLawSection,r,a),e.props.dispatch((0,k.toggleLawSection)(!e.props.displayLawSection))})),(0,v.default)((0,f.default)(e),"onClickLawHistory",(function(t){e.props.dispatch((0,k.resetDocumentToggles)()),e.props.dispatch((0,S.viewLawHistory)(e.ViewingVersionLaw)),e.props.dispatch((0,k.toggleLawHistory)(!e.props.displayLawHistory))})),(0,v.default)((0,f.default)(e),"onClickLawAppendix",(function(t,n){var r={attachment:S.viewAttachment,history:S.viewLawHistory,relatedLaw:S.viewRelatedLaw,shareLink:S.viewLawShortUrl,section:S.viewSection,notes:S.viewLawHistory}[n];r&&e.props.dispatch(r(e.ViewingVersionLaw))})),(0,v.default)((0,f.default)(e),"gotoViewLawSection",(function(t,n,r){e.props.dispatch((0,S.viewSection)(e.ViewingVersionLaw)),E.default.logSectionOnOff(t,r)})),(0,v.default)((0,f.default)(e),"toggleIssueRelatedLaws",(function(t,n,r,a,o){e.props.dispatch((0,S.viewIssueRelatedLaw)(e.ViewingVersionLaw,n)),E.default.logRelatedLawOnOff(t,r,a)})),(0,v.default)((0,f.default)(e),"toggleLawAttachment",(function(t,n,r){e.props.dispatch((0,S.viewAttachment)(e.ViewingVersionLaw)),E.default.logAttachmentOnOff(t,r)})),(0,v.default)((0,f.default)(e),"handleMarkerEvent",(function(t,n){var r=+new Date,a=C.default.getSearchKeyword();e.props.dispatch((0,j.requestUpdateMarker)(n.docId,"issue","issue_content",n,r,e.props.isSignedIn,a))})),(0,v.default)((0,f.default)(e),"renderLawViewer",(function(){var t=e.appendixesFields.join(",");return g.default.createElement("main",{className:"main-view"},g.default.createElement("div",{className:"main-section document__content-container law__main-container"},g.default.createElement(O.default,{lawObj:e.lawProfile.lawObject,toggleLawSection:e.gotoViewLawSection,toggleLawAttachment:e.toggleLawAttachment},e.isLoading?i||(i=g.default.createElement(N.default,null)):g.default.createElement(I.default,{lawObj:e.lawProfile.lawObject,lawMap:e.lawProfile.lawMap,anchorTag:e.props.match.params.issueId,toggleNotesSection:e.toggleNotesSection,toggleIssueRelatedLaws:e.toggleIssueRelatedLaws,onMarkerEvent:e.handleMarkerEvent}))),g.default.createElement("div",{className:"flex-box-vertical hidden-print law-aside-container"},g.default.createElement(D.default,{className:"hide-in-mobile hide-in-tablet",tabs:t,active:e.activeAppendixField,onClick:e.onClickLawAppendix}),g.default.createElement(A.ContentContext.Provider,{value:e.childrenContextValue},e.props.children(e.lawProfile))),e.MobileNavigation)})),e}return(0,d.default)(n,[{key:"componentDidMount",value:function(){var e=this.props.match.params;null!=e&&e.docId&&this.loadLawContent(e.docId,e.versionId)}},{key:"componentDidUpdate",value:function(e){var t=this.props.match.params.docId!==e.match.params.docId,n=this.props.match.params.versionId!==e.match.params.versionId,r=this.props.isSignedIn!==e.isSignedIn;if(t||n||r){var a,o=this.props.match.params.docId,u=r||!1,l=this.props.match.params.versionId,i=o&&(null===(a=this.props.lawCache[o])||void 0===a?void 0:a.latestLawDocId);this.loadLawContent(o,l||i,u)}}},{key:"componentWillUnmount",value:function(){this.props.dispatch((0,_.resetIssueHistoryStore)()),this.props.dispatch((0,k.resetDocumentCache)(this.category))}},{key:"ViewingVersionLaw",get:function(){return{lawId:this.props.match.params.docId,versionId:this.props.match.params.versionId}}},{key:"isLoading",get:function(){var e,t=this.props.match.params.versionId;if(t)return(null===(e=this.props.lawCache[t])||void 0===e?void 0:e.status)!==R.STATUS_LOADED;var n=this.props.match.params.docId;if(n){var r,a,o,u=null===(r=this.props.lawCache[n])||void 0===r?void 0:r.latestLawDocId;return u?(null===(o=this.props.lawCache[u])||void 0===o?void 0:o.status)!==R.STATUS_LOADED:(null===(a=this.props.lawCache[n])||void 0===a?void 0:a.status)!==R.STATUS_LOADED}return!1}},{key:"lawProfile",get:function(){var e,t,n,r,a,o,u,l=(r=this.props,a=r.viewingList,o=r.match.params.docId,null==(u=a.find((function(e){return e.lawId===o})))?void 0:u.lawObject),i=null!=l&&l._id?this.props.lawCache[null==l?void 0:l._id].map:void 0;return{lawObject:l,lawName:(null==l?void 0:l.law_name)||"",lawDbId:null==l?void 0:l._id,lawId:null==l?void 0:l.law_id,lawMap:i,viewLimit:!(null==l||!l.viewLimit),hasSection:!!(l&&l.law_content&&this.hasSection(l.law_content)),hasRelatedLaws:!(null==l||null===(e=l.lawRefs)||void 0===e||!e.length),hasAttachments:!(null==l||null===(t=l.law_attachment)||void 0===t||!t.length),hasHistory:!(null==l||null===(n=l.law_histories)||void 0===n||!n.length)}}},{key:"appendixesFields",get:function(){var e=[];return this.lawProfile.hasSection&&e.push("section"),this.lawProfile.hasAttachments&&e.push("attachment"),this.lawProfile.hasRelatedLaws&&e.push("relatedLaw"),this.lawProfile.hasHistory&&e.push("history"),e.push("shareLink"),e}},{key:"activeAppendixField",get:function(){var e=["section","attachment","related","history","link","notes"].join("|"),t=window.location.href.match(RegExp("/(".concat(e,")"),"i"));if(t){var n=(0,c.default)(t,2)[1];switch(n){case"related":return"relatedLaw";case"link":return"shareLink";case"notes":return"history";default:return n}}if(this.lawProfile.lawObject)return this.lawProfile.hasSection?"section":"history"}},{key:"MobileNavigation",get:function(){var e=this.appendixesFields,t=[];return e.includes("section")&&t.push(g.default.createElement(x.MobileNavigationButton,{active:this.props.displayLawSection,key:"section",onClick:this.onClickLawSection},"編章節")),e.includes("relatedLaw")&&t.push(g.default.createElement(x.MobileNavigationButton,{active:this.props.displayRelatedLaws,key:"relatedLaw",onClick:this.onClickRelatedLaw},"相關法規")),e.includes("history")&&t.push(g.default.createElement(x.MobileNavigationButton,{active:this.props.displayLawHistory,key:"history",onClick:this.onClickLawHistory},"法規沿革")),t.length&&g.default.createElement(x.MobileNavigationBar,null,t)||null}},{key:"onClickRelatedLaw",value:function(e){this.props.dispatch((0,k.resetDocumentToggles)()),this.props.dispatch((0,S.viewRelatedLaw)(this.ViewingVersionLaw)),this.props.dispatch((0,k.toggleRelatedLaws)(!this.props.displayRelatedLaws))}},{key:"loadLawContent",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e&&(t&&!this.props.isSignedIn?L.loginRequired(null,{isFeatureStyle:!1}):(this.props.dispatch((0,P.viewLaw)({lawId:e,forceReload:n,versionId:t,lawName:null})),this.props.dispatch((0,k.resetDocumentToggles)())))}},{key:"toggleNotesSection",value:function(e,t,n,r,a,o){this.props.dispatch((0,S.viewNotes)(this.ViewingVersionLaw,n)),this.props.dispatch((0,k.toggleArticleHistory)(!0)),this.props.currentArticleId!==t&&this.props.dispatch((0,_.updateCurrentArticleId)(t)),E.default.logToggleNotes(a,r)}},{key:"hasSection",value:function(e){return Array.isArray(e)&&e.some(M.isSection)}},{key:"render",value:function(){var e=this.props.match.params,t=e&&e.docId?this.renderLawViewer():null;return g.default.createElement(T.default,{loading:!this.lawProfile.lawId,title:this.lawProfile.lawName,reachViewLimit:this.lawProfile.viewLimit},t)}}]),n}(g.Component),(0,y.default)(l.prototype,"onClickRelatedLaw",[w.autobind,o],Object.getOwnPropertyDescriptor(l.prototype,"onClickRelatedLaw"),l.prototype),(0,y.default)(l.prototype,"toggleNotesSection",[w.autobind,u],Object.getOwnPropertyDescriptor(l.prototype,"toggleNotesSection"),l.prototype),l),V=(0,b.connect)((function(e){var t;return{lawCache:e.LawsReducer.lawCache,activeLaw:e.LawsReducer.activeLaw,viewingList:e.LawsReducer.viewingList,isSignedIn:!!e.auth.user.isSignedIn,role:(null===(t=e.auth.user.attributes)||void 0===t?void 0:t.role)||null,currentArticleId:e.IssueReducer.currentArticleId,displayRelatedLaws:e.PageCommonUsageReducer.displayRelatedLaws,displayLawSection:e.PageCommonUsageReducer.displayLawSection,displayLawHistory:e.PageCommonUsageReducer.displayLawHistory}}))(F);t.default=V},1545:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,u,l,i=r(n(35)),c=r(n(36)),s=r(n(331)),d=r(n(96)),f=r(n(97)),p=r(n(85)),m=r(n(7)),h=E(n(0)),v=(r(n(6)),n(152)),y=r(n(13)),g=n(1513),b=r(n(1517)),w=r(n(1651)),O=n(233),k=n(127),_=n(340),P=E(n(21)),j=r(n(20));function S(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(S=function(e){return e?n:t})(e)}function E(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=S(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,p.default)(e);if(t){var a=(0,p.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.default)(this,n)}}var I=function(e){(0,d.default)(n,e);var t=C(n);function n(){var e;(0,i.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,m.default)((0,s.default)(e),"handleRelatedLawClick",(function(t){var n=e.props,r=n.lawObj,a=n.issueTitle;j.default.logRelatedLawClick(r.law_name,a,t.target.id)})),(0,m.default)((0,s.default)(e),"closeRelatedLaws",(function(){var t=e.props.lawObj,n=t.law_id,r=t._id,a=t.law_name,o=e.props.issueTitle;e.props.dispatch((0,O.toggleRelatedLaws)(!1)),e.props.dispatch((0,k.viewLawById)({lawId:n,versionId:r}));j.default.logRelatedLawOnOff(!1,a,o)})),e}return(0,c.default)(n,[{key:"componentDidMount",value:function(){var e=this.props.match.params;e&&e.relatedId&&this.props.dispatch((0,_.fetchRelatedLawsRequest)(e.relatedId))}},{key:"componentDidUpdate",value:function(e){this.isRelatedIdChanged(e.match.params,this.props.match.params)&&this.props.match.params.relatedId&&this.props.dispatch((0,_.fetchRelatedLawsRequest)(this.props.match.params.relatedId))}},{key:"isRelatedIdChanged",value:function(e,t){return e&&t&&e.relatedId!==t.relatedId}},{key:"renderRelatedLaws",value:function(e){var t=this.handleRelatedLawClick;return e&&0!==e.length?e.map((function(e){return h.default.createElement("div",{key:e.law_id,className:"document-misc__content"},h.default.createElement(g.Link,{to:"/law/".concat(e.law_id),id:e.law_name,onClick:t},e.law_name,e.isAbolish?"（廢）":null))})):o||(o=h.default.createElement("div",{className:"document-misc__item-container"},"尚無相關法規"))}},{key:"render",value:function(){var e,t,n=this.props,r=n.lawObj,a=n.match.params,o=n.relatedLaws,i=n.issueTitle,c=n.fetchRelatedLawsStatus,s=n.displayRelatedLaws;if(n.locked){var d=u||(u=h.default.createElement(b.default,{id:"tooltip",bsClass:"hint",className:"hide-in-mobile hide-in-tablet hidden-print"},h.default.createElement("div",null,"查看與此法相關的子法。"),h.default.createElement("div",{className:"tooltip-highlight"},"登入免費享有此功能")));return h.default.createElement(w.default,{className:"document-misc__sub-container",require:"login",tooltip:d},"相關法規")}if(!r)return null;var f=!1;a.relatedId?c===P.STATUS_SUCCESS&&(e="".concat(r.law_name,"第 ").concat(i.replace(/[\s第條]/g,"")," 條相關法規"),t=this.renderRelatedLaws(o)):(t=this.renderRelatedLaws(r.lawRefs),f=!0);var p=(0,y.default)("document-misc__sub-container law-section",{"document-misc__sub-container--opened":s}),m=(0,y.default)("document-misc__sub-container-close-button",{disabled:f});return h.default.createElement("div",{className:p},h.default.createElement("section",{className:"document-misc__sub-content"},h.default.createElement("div",{className:m},h.default.createElement("i",{className:"close-icon",onClick:this.closeRelatedLaws})),e&&h.default.createElement("h2",{className:"document-misc__title"},e),t,l||(l=h.default.createElement("div",{className:"dummy"}))))}}]),n}(h.Component),R=(0,v.connect)((function(e){var t=e.LawsReducer,n=t.activeLaw,r=t.viewingList.find((function(e){return e.lawId===n.lawId}));return{lawObj:r?r.lawObject:null,relatedLaws:e.IssueReducer.relatedLaws||[],fetchRelatedLawsStatus:e.IssueReducer.fetchRelatedLawsStatus,issueTitle:e.IssueReducer.issueTitle||"",displayRelatedLaws:e.PageCommonUsageReducer.displayRelatedLaws||!1,isSignedIn:e.auth.user.isSignedIn||!1,get locked(){return!this.isSignedIn}}}))(I);t.default=R},1546:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,u,l,i,c=r(n(35)),s=r(n(36)),d=r(n(331)),f=r(n(96)),p=r(n(97)),m=r(n(85)),h=r(n(7)),v=I(n(0)),y=(r(n(6)),n(27)),g=n(152),b=r(n(335)),w=n(233),O=r(n(1652)),k=r(n(1704)),_=I(n(21)),P=n(571),j=n(340),S=n(332),E=n(127);function C(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(C=function(e){return e?n:t})(e)}function I(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=C(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,m.default)(e);if(t){var a=(0,m.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,p.default)(this,n)}}var T=function(e){(0,f.default)(n,e);var t=R(n);function n(){var e;(0,c.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,h.default)((0,d.default)(e),"onChange",(function(t,n){e.props.dispatch((0,P.updateNoteByArticleId)(t,n))})),(0,h.default)((0,d.default)(e),"onSaveNote",(function(t,n){e.props.dispatch((0,P.saveNoteByArticleIdRequest)(t,n))})),(0,h.default)((0,d.default)(e),"onNotesClick",(function(){if(!e.props.isSignedIn){e.props.dispatch((0,S.toggleSignInModal)(!0))}})),(0,h.default)((0,d.default)(e),"onCloseNotesSection",(function(){e.unblock&&e.unblock();var t=e.props.match.params,n=t.docId,r=t.versionId;e.props.dispatch((0,E.viewLawById)({lawId:n,versionId:r})),e.props.dispatch((0,w.toggleArticleHistory)(!1))})),(0,h.default)((0,d.default)(e),"getActiveNoteState",(function(){var t=e.props.notesProfile.articleId;return e.props.notesStore.get(t)})),(0,h.default)((0,d.default)(e),"getLastModify",(function(e){var t=e.split(/[-T:.Z]/),n=parseInt(t[0],10)-1911;return"(".concat(n,".").concat(t[1],".").concat(t[2],")")})),(0,h.default)((0,d.default)(e),"routerWillLeave",(function(){return void 0!==e.props.notesStore.find((function(e){return e.isDirty}))&&"尚有筆記未儲存，確定離開？"})),e}return(0,s.default)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.match.params,n=e.notesStore,r=e.isSignedIn;if(t&&t.noteId){var a=n.get(t.noteId),o=!!a&&a.loadingStatus===_.STATUS_LOADING;this.props.dispatch((0,P.fetchNotesByArticleIdRequest)(t.noteId,o,r)),this.props.dispatch((0,j.fetchIssueHistoryRequest)(t.noteId))}}},{key:"componentDidUpdate",value:function(e){var t=e.match.params,n=e.isSignedIn,r=this.isNoteIdChanged(t,this.props.match.params),a=this.isUserSignedIn(n,this.props.isSignedIn);if(r||a){var o=this.props.notesStore.get(t.noteId),u=!!o&&o.loadingStatus===_.STATUS_LOADING;this.props.dispatch((0,P.fetchNotesByArticleIdRequest)(this.props.match.params.noteId,u,this.props.isSignedIn))}r&&this.props.dispatch((0,j.fetchIssueHistoryRequest)(this.props.match.params.noteId)),this.props.hasDirtyNotes&&!this.unblock?this.unblock=this.props.history.block(this.routerWillLeave):!this.props.hasDirtyNotes&&this.unblock&&this.unblock()}},{key:"componentWillUnmount",value:function(){this.unblock&&this.unblock()}},{key:"isNoteIdChanged",value:function(e,t){return e&&t&&e.noteId!==t.noteId}},{key:"isUserSignedIn",value:function(e,t){return t&&t!==e}},{key:"renderArticle",value:function(e,t){var n=this.props.currentArticleId;if(e&&!e.issue_content&&!e.issue_reason)return o||(o=v.default.createElement("div",{className:"notes-article none"},"無沿革內容"));var r=e&&e.law_last_modify?this.getLastModify(e.law_last_modify):null,a=e?v.default.createElement(O.default,{attachments:e.issue_reason_attachments,content:e.issue_content,reason:e.issue_reason,markNumeral:!1}):null,u=0===t?"現行法 ":"",l=e._id===n&&e.issue_content?"notes-article active":"notes-article";return r&&e?v.default.createElement("div",{className:l,key:t},u,r,a):null}},{key:"renderNote",value:function(){var e=this.props,t=e.notesStore,n=e.notesProfile,r=n.articleId,a=t.get(r);return a&&a.editorState?v.default.createElement(k.default,{key:r,noteId:r,editorState:a.editorState,placeholder:"輸入文字...",onChange:this.onChange,onSaveNote:this.onSaveNote,isDirty:a.isDirty,status:a.savingStatus,lawName:n.lawName,articleNo:n.articleNo,ref:r}):v.default.createElement("div",{className:"notes-item",onClick:this.onNotesClick},u||(u=v.default.createElement("div",{className:"DraftEditor-root"},v.default.createElement("div",{className:"DraftEditor-editorContainer flex-box flex-center"},v.default.createElement("div",{className:"notes-signin"},"請先登入")))),l||(l=v.default.createElement("div",{className:"add-note"},v.default.createElement(b.default,{bsClass:"c-button",disabled:!0},"儲存"))))}},{key:"render",value:function(){var e=this,t=this.props,n=t.fetchIssueHistoryStatus,r=t.articleHistory,a=t.lawName,o=t.articleNo,u=n===_.STATUS_LOADING?null:r.map((function(t,n){return e.renderArticle(t,n)}));return v.default.createElement("section",{className:"document-misc__sub-container notes__container"},v.default.createElement("div",{className:"document-misc__sub-container-close-button"},v.default.createElement("i",{className:"close-icon",onClick:this.onCloseNotesSection})),v.default.createElement("h2",{className:"document-misc__title"},a,o),v.default.createElement("div",{className:"document-misc__item-container"},this.renderNote(),u,i||(i=v.default.createElement("div",{className:"dummy"}))))}}]),n}(v.Component),M=(0,y.withRouter)((0,g.connect)((function(e){return{notesStore:e.NotesReducer.notesStore,hasDirtyNotes:!!e.NotesReducer.notesStore.find((function(e){return e.isDirty})),notesProfile:e.NotesReducer.notesProfile,articleHistory:e.IssueReducer.articleHistory,currentArticleId:e.IssueReducer.currentArticleId,fetchIssueHistoryStatus:e.IssueReducer.fetchIssueHistoryStatus,isSignedIn:!!e.auth.user.isSignedIn,lawName:e.IssueReducer.lawName,articleNo:e.IssueReducer.articleNo}}))(T));t.default=M},1549:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,u=r(n(35)),l=r(n(36)),i=r(n(331)),c=r(n(96)),s=r(n(97)),d=r(n(85)),f=r(n(7)),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=O(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(0)),m=n(152),h=r(n(13)),v=n(233),y=n(127),g=r(n(20)),b=n(545),w=n(1653);function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(O=function(e){return e?n:t})(e)}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function _(e){var t;return(0,b.isArticle)(e)?e.issue_title.replace(/第 *([\d-]+) *條/g,"§ $1"):null!=e&&null!==(t=e.child)&&void 0!==t&&t[0]?_(e.child[0]):" --- "}var P=function(e){(0,c.default)(n,e);var t=k(n);function n(){var e;(0,u.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,f.default)((0,i.default)(e),"onLawSectionClick",(function(t,n){return function(){return e.props.dispatch((0,v.toggleLawSection)(!1)),g.default.logSectionHit(e.props.lawName,n),!0}})),(0,f.default)((0,i.default)(e),"closeLawSection",(function(){e.props.dispatch((0,y.viewLawById)({lawId:e.props.lawId,versionId:e.props.lawDbId})),e.props.dispatch((0,v.toggleLawSection)(!1));g.default.logSectionOnOff(!1,e.props.lawName)})),(0,f.default)((0,i.default)(e),"renderSection",(function(t,n,r){var a=r.join("-"),o=_(t),u="".concat(e.props.lawDbId,"-").concat(a),l=[];return(t.child||[]).forEach((function(t,r){(0,b.isSection)(t)&&l.push(e.renderSection(t,n+1,[a,r]))})),p.default.createElement("li",{key:u},p.default.createElement(w.Scrollchor,{className:"section-name",to:u,refId:e.scrollRefId,onClick:e.onLawSectionClick(a,t.toc_name)},t.toc_name),p.default.createElement("span",{className:"section-number inline-block"},o),!!l.length&&p.default.createElement("ol",null,l))})),e}return(0,l.default)(n,[{key:"shouldComponentUpdate",value:function(e){return e.lawId!==this.props.lawId||e.lawDbId!==this.props.lawDbId||e.showOnMobile!==this.props.showOnMobile}},{key:"scrollRefId",get:function(){return[this.props.lawDbId,"".concat(this.props.lawDbId,"__inner")]}},{key:"render",value:function(){var e=this,t=this.props,n=t.lawContent,r=t.showOnMobile;if(!n||!n.length)return null;var a=n.map((function(t,n){return(0,b.isSection)(t)?e.renderSection(t,0,[n]):null})),u=(0,h.default)("document-misc__sub-container law-section",{"document-misc__sub-container--opened":r});return p.default.createElement("div",{className:u},p.default.createElement("section",{className:"document-misc__sub-content"},p.default.createElement("div",{className:"hide-in-desktop document-misc__sub-container-close-button"},p.default.createElement("i",{className:"close-icon",onClick:this.closeLawSection})),p.default.createElement("div",{className:"document-misc__item-container law-section-content"},p.default.createElement("ol",{className:"law-section-list"},a),o||(o=p.default.createElement("div",{className:"dummy"})))))}}]),n}(p.Component),j=(0,m.connect)((function(e){var t=e.LawsReducer,n=t.activeLaw,r=t.viewingList.find((function(e){return e.lawId===n.lawId})),a=(null==r?void 0:r.lawObject)||null;return{lawDbId:null==a?void 0:a._id,lawId:null==a?void 0:a.law_id,lawName:null==a?void 0:a.law_name,lawContent:(null==a?void 0:a.law_content)||[],showOnMobile:!!e.PageCommonUsageReducer.displayLawSection}}))(P);t.default=j},1550:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,u,l,i=r(n(35)),c=r(n(36)),s=r(n(331)),d=r(n(96)),f=r(n(97)),p=r(n(85)),m=r(n(7)),h=r(n(1514)),v=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=j(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(0)),y=n(152),g=r(n(13)),b=n(233),w=n(127),O=r(n(20)),k=n(545),_=r(n(1707)),P=n(1602);function j(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(j=function(e){return e?n:t})(e)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,p.default)(e);if(t){var a=(0,p.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.default)(this,n)}}var E=(o=P.FeaturesLock.FreeFeature,u=function(e){(0,d.default)(n,e);var t=S(n);function n(){var e;(0,i.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,m.default)((0,s.default)(e),"onCloseToggle",(function(){e.props.dispatch((0,b.toggleLawHistory)(!1)),e.props.dispatch((0,w.viewLawById)({lawId:e.props.lawId,versionId:e.props.lawDbId}));O.default.logSectionOnOff(!1,e.props.lawName)})),e}return(0,c.default)(n,[{key:"History",get:function(){return(this.props.histories||[]).map(k.arrangeLawHistory)}},{key:"onClickLawVersion",value:function(e,t){this.props.dispatch((0,w.viewLawHistory)(t))}},{key:"render",value:function(){if(!this.props.histories.length)return null;var e=(0,g.default)("document-misc__sub-container law-section",{"document-misc__sub-container--opened":this.props.showOnMobile});return v.default.createElement("div",{className:e},v.default.createElement("section",{className:"document-misc__sub-content"},v.default.createElement("div",{className:"hide-in-desktop document-misc__sub-container-close-button"},v.default.createElement("i",{className:"close-icon",onClick:this.onCloseToggle})),v.default.createElement("div",{className:"document-misc__item-container law-section-content"},v.default.createElement(_.default,{lawId:this.props.lawId,histories:this.History,onClick:this.onClickLawVersion}),l||(l=v.default.createElement("div",{className:"dummy"})))))}}]),n}(v.Component),(0,h.default)(u.prototype,"onClickLawVersion",[P.autobind,o],Object.getOwnPropertyDescriptor(u.prototype,"onClickLawVersion"),u.prototype),u),C=(0,y.connect)((function(e){var t,n=e.LawsReducer,r=n.activeLaw,a=n.viewingList.find((function(e){return e.lawId===r.lawId})),o=(null==a?void 0:a.lawObject)||null;return{isSignedIn:!!e.auth.user.isSignedIn,role:(null===(t=e.auth.user.attributes)||void 0===t?void 0:t.role)||null,lawDbId:(null==o?void 0:o._id)||"",lawId:(null==o?void 0:o.law_id)||"",lawName:(null==o?void 0:o.law_name)||"",histories:(null==o?void 0:o.law_histories)||[],showOnMobile:!!e.PageCommonUsageReducer.displayLawHistory}}))(E);t.default=C},1551:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,u=r(n(35)),l=r(n(36)),i=r(n(331)),c=r(n(96)),s=r(n(97)),d=r(n(85)),f=r(n(7)),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(0)),m=n(152),h=n(127),v=r(n(20));function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var b=function(e){(0,c.default)(n,e);var t=g(n);function n(){var e;(0,u.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,f.default)((0,i.default)(e),"onLawAttachmentClick",(function(t){v.default.logAttachmentHit(e.props.lawName,t.currentTarget.id)})),(0,f.default)((0,i.default)(e),"closeLawAttachment",(function(){e.props.dispatch((0,h.viewLawById)({lawId:e.props.lawId,versionId:e.props.lawDbId}));v.default.logAttachmentOnOff(!1,e.props.lawName)})),(0,f.default)((0,i.default)(e),"renderAttachment",(function(t,n){return p.default.createElement("div",{key:n,className:"document-misc__item-container"},p.default.createElement("a",{href:t.fileUrl,key:n,onClick:e.onLawAttachmentClick,id:t.fileName},t.fileName))})),e}return(0,l.default)(n,[{key:"render",value:function(){if(!this.props.lawAttachments||!this.props.lawAttachments.length)return null;var e=this.props.lawAttachments.map(this.renderAttachment);return p.default.createElement("div",{className:"document-misc__sub-container"},p.default.createElement("div",{className:"hide-in-desktop document-misc__sub-container-close-button"},p.default.createElement("i",{className:"close-icon",onClick:this.closeLawAttachment})),p.default.createElement("div",{className:"document-misc__content"},e,o||(o=p.default.createElement("div",{className:"dummy"}))))}}]),n}(p.Component),w=(0,m.connect)((function(e){var t=e.LawsReducer,n=t.activeLaw,r=t.viewingList.find((function(e){return e.lawId===n.lawId})),a=(null==r?void 0:r.lawObject)||null;return{lawName:null==a?void 0:a.law_name,lawDbId:null==a?void 0:a._id,lawId:null==a?void 0:a.law_id,lawAttachments:null==a?void 0:a.law_attachment}}))(b);t.default=w},1552:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,u,l=r(n(35)),i=r(n(36)),c=r(n(331)),s=r(n(96)),d=r(n(97)),f=r(n(85)),p=r(n(7)),m=j(n(0)),h=n(152),v=r(n(335)),y=r(n(13)),g=n(584),b=n(127),w=j(n(21)),O=r(n(1618)),k=r(n(20)),_=n(1630);function P(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(P=function(e){return e?n:t})(e)}function j(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=P(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,d.default)(this,n)}}var C=function(e){(0,s.default)(n,e);var t=E(n);function n(){var e;(0,l.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,p.default)((0,c.default)(e),"inputRef",m.default.createRef()),(0,p.default)((0,c.default)(e),"selectShortUrl",(function(){e.inputRef.current&&e.inputRef.current.select()})),(0,p.default)((0,c.default)(e),"getButtonIndicator",(function(){var t=(0,y.default)("ant ant-small",{"ant-success indicator":e.props.copyStatus===w.STATUS_SUCCESS,"ant-fail indicator":e.props.copyStatus===w.STATUS_FAIL});return m.default.createElement("i",{className:t})})),(0,p.default)((0,c.default)(e),"handleTextCopy",(function(){var t=(0,O.default)(e.props.shortUrl);e.props.dispatch((0,g.updateCopyStatus)(t?w.STATUS_SUCCESS:w.STATUS_FAIL)),setTimeout((function(){e.props.dispatch((0,g.updateCopyStatus)(w.STATUS_UNKNOWN))}),1500),k.default.logShortUrlCopy(e.props.shortUrl)})),(0,p.default)((0,c.default)(e),"loadShortUrl",(function(t,n){e.props.dispatch((0,g.fetchShortUrlRequest)(t,n))})),(0,p.default)((0,c.default)(e),"closeShortUrlView",(function(){e.props.dispatch((0,b.viewDoc)(e.context.category,e.props.match.params.docId))})),e}return(0,i.default)(n,[{key:"componentDidMount",value:function(){var e=this.props.match.params;e&&e.docId&&this.context.category&&this.loadShortUrl(this.context.category,this.shortUrlTarget)}},{key:"componentDidUpdate",value:function(e){e.match.params.docId===this.props.match.params.docId&&e.match.params.versionId===this.props.match.params.versionId||this.loadShortUrl(this.context.category,this.shortUrlTarget),this.selectShortUrl()}},{key:"componentWillUnmount",value:function(){this.props.dispatch((0,g.resetShortUrl)())}},{key:"shortUrlTarget",get:function(){return"law"===this.context.category?{lawId:this.props.match.params.docId,versionId:this.props.match.params.versionId}:this.props.match.params.docId}},{key:"CloseButton",get:function(){return m.default.createElement("div",{className:"document-misc__sub-container-close-button"},m.default.createElement("i",{className:"close-icon",onClick:this.closeShortUrlView}))}},{key:"Header",get:function(){return o||(o=m.default.createElement("h2",{className:"document-misc__title"},"複製連結"))}},{key:"render",value:function(){var e=this.props.shortUrl;return m.default.createElement("div",{className:"document-misc__sub-container"},this.props.closeIcon&&this.CloseButton,this.Header,m.default.createElement("div",{className:"document-misc__content document-misc__short-url"},m.default.createElement("input",{className:"short-url",ref:this.inputRef,value:e,readOnly:!0}),m.default.createElement(v.default,{bsClass:"c-button",className:"short-url-copy",onClick:this.handleTextCopy,disabled:this.props.copyStatus!==w.STATUS_UNKNOWN},this.getButtonIndicator(),"複製"),u||(u=m.default.createElement("div",{className:"dummy"}))))}}]),n}(m.Component);(0,p.default)(C,"defaultProps",{closeIcon:!0}),(0,p.default)(C,"contextType",_.ContentContext);var I=(0,h.connect)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){(0,p.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.ShortUrlReducer)}))(C);t.default=I},1553:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,u,l=r(n(35)),i=r(n(36)),c=r(n(331)),s=r(n(96)),d=r(n(97)),f=r(n(85)),p=r(n(7)),m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(0)),h=(r(n(6)),n(152)),v=n(127),y=n(1630);function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,d.default)(this,n)}}var w=function(e){(0,s.default)(n,e);var t=b(n);function n(){var e;(0,l.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,p.default)((0,c.default)(e),"closeDocAttachment",(function(){var t=e.context,n=t.category,r=t.docObj,a=void 0===r?{}:r;n&&a._id&&e.props.dispatch((0,v.viewDoc)(n,a._id))})),e}return(0,i.default)(n,[{key:"renderAttachments",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Array.isArray(e.attachments)&&e.attachments.length?e.attachments.map((function(e){return m.default.createElement("div",{key:e.fileUrl,className:"document-misc__item-container"},m.default.createElement("a",{href:e.fileUrl},e.fileName))})):null}},{key:"render",value:function(){return m.default.createElement("div",{className:"document-misc__sub-container"},m.default.createElement("div",{className:"document-misc__sub-container-close-button"},m.default.createElement("i",{className:"close-icon",onClick:this.closeDocAttachment})),o||(o=m.default.createElement("h2",{className:"document-misc__title"},"附件")),m.default.createElement("div",{className:"document-misc__content"},this.renderAttachments(this.context.docObj),u||(u=m.default.createElement("div",{className:"dummy"}))))}}]),n}(m.Component);(0,p.default)(w,"contextType",y.ContentContext);var O=(0,h.connect)((function(e){var t=e.LawsReducer,n=t.activeLaw,r=t.viewingList.find((function(e){return e.lawId===n.lawId}));return{lawObj:r?r.lawObject:null}}))(w);t.default=O},1554:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,u,l,i=r(n(153)),c=r(n(35)),s=r(n(36)),d=r(n(331)),f=r(n(96)),p=r(n(97)),m=r(n(85)),h=r(n(7)),v=r(n(0)),y=r(n(6)),g=n(152),b=r(n(542)),w=r(n(554)),O=r(n(1522)),k=r(n(1619)),_=r(n(1613)),P=r(n(1610)),j=r(n(1620)),S=n(233),E=n(563),C=n(541),I=n(127),R=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=W(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(21)),T=n(1655),M=r(n(20)),N=r(n(534)),D=r(n(1609)),x=n(1605),A=n(535),L=r(n(1657)),B=r(n(1616)),U=r(n(1621));function W(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(W=function(e){return e?n:t})(e)}function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){(0,h.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,m.default)(e);if(t){var a=(0,m.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,p.default)(this,n)}}var G=function(e){(0,f.default)(n,e);var t=H(n);function n(){var e;(0,c.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),(0,h.default)((0,d.default)(e),"state",{scrollTop:0}),(0,h.default)((0,d.default)(e),"category","judgement"),(0,h.default)((0,d.default)(e),"gaCategory","Judgement"),(0,h.default)((0,d.default)(e),"wrapperViewDOM",v.default.createRef()),(0,h.default)((0,d.default)(e),"getDocumentTitle",(function(){var t=e.props.judgementObj;return t&&t.no})),(0,h.default)((0,d.default)(e),"handleMarkEvent",(function(t,n){var r=e.props,a=r.judgementObj,o=r.isSignedIn,u=+(new Date).getTime(),l=D.default.getSearchKeyword();e.props.dispatch((0,C.requestUpdateMarker)(a._id,e.category,t,n,u,o,l))})),(0,h.default)((0,d.default)(e),"handleTextSelected",(function(t){var n=e.props.judgementObj;M.default.logJudgementSelectText(n._id,t)})),(0,h.default)((0,d.default)(e),"textWithDocumentCitation",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t&&e.JudgementFullTitle&&"「".concat(t,"」").concat(e.JudgementFullTitle,"參照。")||t})),(0,h.default)((0,d.default)(e),"handleCopyWithCitation",(function(t){return e.textWithDocumentCitation(t)})),(0,h.default)((0,d.default)(e),"handleTextCopied",(function(t){return function(n){var r=e.props.judgementObj,a="".concat(r.court,"  ").concat(r.no);t?M.default.logCopyQuotedText(e.gaCategory,a,n):M.default.logJudgementCopyText(a,n)}})),(0,h.default)((0,d.default)(e),"handleAttachmentClick",(function(){e.props.dispatch((0,I.viewDocAttachment)(e.category,e.props.match.params.docId))})),(0,h.default)((0,d.default)(e),"handlePdfDownloadClick",(function(){e.props.dispatch((0,E.downloadPDFFile)(e.props.match.params.docId))})),(0,h.default)((0,d.default)(e),"loadJudgement",(function(t,n){e.props.dispatch((0,E.fetchJudgementRequest)(t,D.default.getSearchKeyword(),n))})),(0,h.default)((0,d.default)(e),"renderAttachmentButton",(function(){var t=e.props.judgementObj.attachments;return Array.isArray(t)&&t.length?v.default.createElement(_.default.ToolbarButton,{label:"附件",icon:"ant-attach",onClick:e.handleAttachmentClick,name:"docattachment"}):null})),(0,h.default)((0,d.default)(e),"renderPdfDownloadButton",(function(){var t;return e.props.judgementObj.pdfUrl||null!==(t=e.props.judgementObj.pdfUrlList)&&void 0!==t&&t.length?v.default.createElement(_.default.ToolbarButton,{key:"pdfdownload-toolbar-button",label:"pdf下載",icon:"ant-page-pdf",onClick:e.handlePdfDownloadClick,name:"pdfdownload"}):null})),(0,h.default)((0,d.default)(e),"renderWordDownloadButton",(function(){var t=e.props.judgementObj;return t.attachAsJudgement&&t.attachAsJudgement.fileType?null:e.pageStatus.download})),(0,h.default)((0,d.default)(e),"renderDate",(function(){var t=e.props.judgementObj;return n.isInvalidDate(t)?"日期不詳":N.default.getChineseDate(t.date)})),(0,h.default)((0,d.default)(e),"renderJudgementView",(function(){var t=e.props,r=t.judgementObj,a=t.match.params,i=t.printMarker;if(!a||!a.docId||(0,b.default)(r))return null;var c=e.renderDate(),s=r.rejectVInfo&&v.default.createElement("li",null,"【民事案件撤回資訊】",r.rejectVInfo),d="main-section document__content-container judgement__container ".concat(i?"print-it":""),f=[e.renderAttachmentButton(),"share",e.renderWordDownloadButton(),e.renderPdfDownloadButton(),"print"];return v.default.createElement("main",{className:"main-view"},v.default.createElement(P.default,{id:r._id,triggerOrigin:"".concat(e.gaCategory," View"),className:d,onMarkEvent:e.handleMarkEvent,onCopyQuotedText:e.handleCopyWithCitation,onCopiedQuotedText:e.handleTextCopied(!0),onTextSelected:e.handleTextSelected,onTextCopied:e.handleTextCopied(!1),ref:e.wrapperViewDOM},v.default.createElement(T.PrecedentSection,{court:e.props.judgementObj.court,content:(0,w.default)(e.props.judgementObj,n.precedentSections)}),v.default.createElement(_.default,{className:"document__toolbar hidden-print",docId:r._id,docTitle:"".concat(r.court," ").concat(r.no),docCategory:e.category,displayWidgets:f}),v.default.createElement("ul",{className:"document__section document__meta-content"},s,v.default.createElement("li",null,"【裁判字號】",r.no),v.default.createElement("li",null,"【裁判日期】",c),v.default.createElement("li",null,"【裁判案由】",r.reason),o||(o=v.default.createElement("li",null,"【裁判內文】"))),v.default.createElement(L.default,{show:!r.viewLimit,content:r.judgement,fileType:r.attachAsJudgement&&r.attachAsJudgement.fileType,fileUrl:r.attachAsJudgement&&r.attachAsJudgement.fileUrl,markers:r.judgementMarks,className:"document__section document__judgement-content markerarea-main"}),u||(u=v.default.createElement("div",{className:"dummy"})),l||(l=v.default.createElement(U.default,null))),v.default.createElement(j.default,{category:e.category,docObj:r,keywords:D.default.getSearchKeyword(),pageWidgets:["documentTags","judgementOpinion","judgementHistory","relatedIssues"]},e.props.children))})),e}return(0,s.default)(n,[{key:"componentDidMount",value:function(){var e=this.props.match.params;if(e&&e.docId){var t=new URLSearchParams(this.props.location.search);this.loadJudgement(n.getDocumentId(e.docId),t)}(0,x.scrollToTop)()}},{key:"shouldComponentUpdate",value:function(e,t){return this.props!==e||this.state!==t}},{key:"componentDidUpdate",value:function(e){if(r=e,a=this.props,o=["match.params.docId","isSignedIn"],!(0,O.default)((0,w.default)(r,o),(0,w.default)(a,o))){var t=new URLSearchParams(this.props.location.search);this.loadJudgement(n.getDocumentId(this.props.match.params.docId),t)}var r,a,o;this.wrapperViewDOM.current&&(0,A.safelyScrollY)(this.wrapperViewDOM.current,this.state.scrollTop)}},{key:"componentWillUnmount",value:function(){this.props.dispatch((0,S.resetDocumentCache)(this.category))}},{key:"JudgementFullTitle",get:function(){var e=this.props.judgementObj;if(e&&e._id){var t=e.court,n=e.no,r=e.sys,a=e.type,o=n.split(","),u=(0,i.default)(o,3),l=u[0],c=u[1],s=u[2];return"".concat(t).concat(l,"年度").concat(c,"字第").concat(s,"號").concat(r).concat(a).replace(/\s/g,"")}return""}},{key:"render",value:function(){var e=this.props,t=e.fetchJudgementStatus,n=e.judgementObj;return v.default.createElement(B.default,{reachViewLimit:n.viewLimit,loading:t===R.STATUS_LOADING,title:this.getDocumentTitle()},this.renderJudgementView())}}],[{key:"getDerivedStateFromProps",value:function(e){var t=[],n=document.getElementById(e.match.params.docId);return n&&t.push({scrollTop:n.scrollTop}),t.length?Object.assign.apply(Object,[{}].concat(t)):null}}]),n}(k.default);(0,h.default)(G,"propTypes",V(V({},k.default.defaultPropTypes),{},{printMarker:y.default.bool,judgementObj:y.default.object,match:y.default.object,location:y.default.object,fetchJudgementStatus:y.default.string,isSignedIn:y.default.bool,role:y.default.string,children:y.default.element,highlightMarks:y.default.arrayOf(y.default.object)})),(0,h.default)(G,"precedentSections",["precedent","deprecatedPrecedent","valuableRef","selected","grandChamber"]);var J=(0,g.connect)((function(e){return V(V({},G.defaultMapStateToProps(e)),{},{judgementObj:e.JudgementReducer.judgementObj,fetchJudgementStatus:e.JudgementReducer.fetchJudgementStatus,isSignedIn:!!e.auth.user.isSignedIn,role:e.auth.user.attributes?e.auth.user.attributes.role:null,printMarker:!!e.PageCommonUsageReducer.printMarker})}))(G);t.default=J},1556:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,u,l,i,c,s=r(n(35)),d=r(n(36)),f=r(n(331)),p=r(n(96)),m=r(n(97)),h=r(n(85)),v=r(n(7)),y=r(n(0)),g=r(n(6)),b=n(152),w=r(n(542)),O=r(n(1619)),k=r(n(1613)),_=r(n(1620)),P=n(127),j=n(1605),S=r(n(1610)),E=n(233),C=n(576),I=n(541),R=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=B(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(21)),T=r(n(20)),M=r(n(534)),N=r(n(1609)),D=n(535),x=r(n(1616)),A=r(n(1621)),L=r(n(1615));function B(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(B=function(e){return e?n:t})(e)}function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){(0,v.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.default)(e);if(t){var a=(0,h.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,m.default)(this,n)}}var V=function(e){(0,p.default)(n,e);var t=F(n);function n(){var e;(0,s.default)(this,n);for(var r=arguments.length,a=new Array(r),d=0;d<r;d++)a[d]=arguments[d];return e=t.call.apply(t,[this].concat(a)),(0,v.default)((0,f.default)(e),"state",{scrollTop:0,docId:e.props.match.params.docId}),(0,v.default)((0,f.default)(e),"category","decision"),(0,v.default)((0,f.default)(e),"gaCategory","Decision"),(0,v.default)((0,f.default)(e),"wrapperViewDOM",y.default.createRef()),(0,v.default)((0,f.default)(e),"getDocumentTitle",(function(){return e.props.decisionObj.meetingNo})),(0,v.default)((0,f.default)(e),"handleMarkEvent",(function(t,n){var r=e.props,a=r.decisionObj,o=r.isSignedIn,u=+(new Date).getTime(),l=N.default.getSearchKeyword();e.props.dispatch((0,I.requestUpdateMarker)(a._id,e.category,t,n,u,o,l))})),(0,v.default)((0,f.default)(e),"handleAttachmentClick",(function(){e.props.dispatch((0,P.viewDocAttachment)(e.category,e.props.match.params.docId))})),(0,v.default)((0,f.default)(e),"handleTextSelected",(function(t){T.default.logDecisionSelectText(e.props.decisionObj._id,t)})),(0,v.default)((0,f.default)(e),"handleTextCopied",(function(t){var n=e.props.decisionObj.meetingNo;T.default.logDecisionCopyText(n,t)})),(0,v.default)((0,f.default)(e),"loadDecision",(function(t){e.props.dispatch((0,C.fetchDecisionRequest)(t,N.default.getSearchKeyword()))})),(0,v.default)((0,f.default)(e),"renderContent",(function(){var t=e.props.decisionObj;return t.viewLimit?null:y.default.createElement("div",{className:"document__section document__judgement-content markerarea-main"},y.default.createElement(L.default,{marks:t.mainContentMarks},t.mainContent))})),(0,v.default)((0,f.default)(e),"renderDate",(function(){var t=e.props.decisionObj;return n.isInvalidDate(t)?"日期不詳":M.default.getChineseDate(t.date)})),(0,v.default)((0,f.default)(e),"renderDecisionView",(function(){var t=e.props,r=t.decisionObj,a=t.match.params,s=t.printMarker;if(!a||!a.docId||(0,w.default)(r))return null;var d=e.renderDate(),f=n.AttachmentButton(r.attachments,e.handleAttachmentClick),p="main-section document__content-container decision__container ".concat(s?"print-it":"");return y.default.createElement("main",{className:"main-view"},y.default.createElement(S.default,{triggerOrigin:"".concat(e.gaCategory," View"),className:p,onMarkEvent:e.handleMarkEvent,onTextSelected:e.handleTextSelected,onTextCopied:e.handleTextCopied,ref:e.wrapperViewDOM,id:a.docId},y.default.createElement(k.default,{className:"document__toolbar hidden-print",docId:r._id,docTitle:r.meetingNo,docCategory:e.category,displayWidgets:["share",e.pageStatus.download,"print"]},f),y.default.createElement("div",{className:"document__section document__header"},y.default.createElement("h1",{className:"title document__title"},r.meetingNo),y.default.createElement("time",{className:"document__date"},d)),o||(o=y.default.createElement("hr",{className:"document__divider medium"})),y.default.createElement("div",{className:"document__section document__summary"},u||(u=y.default.createElement("div",null,"決議：")),y.default.createElement("div",{className:"markerarea-summary"},y.default.createElement(L.default,{marks:r.decisionMarks},r.decision))),l||(l=y.default.createElement("hr",{className:"document__divider medium"})),e.renderContent(),i||(i=y.default.createElement("div",{className:"dummy"})),c||(c=y.default.createElement(A.default,null))),y.default.createElement(_.default,{category:e.category,docObj:r,pageWidgets:["documentTags","relatedIssues"]},e.props.children))})),e}return(0,d.default)(n,[{key:"componentDidMount",value:function(){var e=this.props.match.params;e&&e.docId&&this.loadDecision(n.getDocumentId(e.docId)),(0,j.scrollToTop)()}},{key:"shouldComponentUpdate",value:function(e,t){return this.props!==e||this.state!==t}},{key:"componentDidUpdate",value:function(e){var t=this.props.match.params.docId!==e.match.params.docId,r=this.props.isSignedIn!==e.isSignedIn;(t||r)&&this.loadDecision(n.getDocumentId(this.props.match.params.docId)),this.wrapperViewDOM.current&&(0,D.safelyScrollY)(this.wrapperViewDOM.current,this.state.scrollTop)}},{key:"componentWillUnmount",value:function(){this.props.dispatch((0,E.resetDocumentCache)(this.category))}},{key:"render",value:function(){var e=this.props,t=e.fetchDecisionStatus,n=e.decisionObj;return y.default.createElement(x.default,{title:this.getDocumentTitle(),loading:t===R.STATUS_LOADING,reachViewLimit:n.viewLimit},this.renderDecisionView())}}]),n}(O.default);(0,v.default)(V,"propTypes",W(W({},O.default.defaultPropTypes),{},{printMarker:g.default.bool,decisionObj:g.default.object,match:g.default.object,fetchDecisionStatus:g.default.string,children:g.default.element,isSignedIn:g.default.bool,role:g.default.string}));var H=(0,b.connect)((function(e){return W(W({},V.defaultMapStateToProps(e)),{},{decisionObj:e.DecisionReducer.decisionObj,fetchDecisionStatus:e.DecisionReducer.fetchDecisionStatus,isSignedIn:!!e.auth.user.isSignedIn,role:e.auth.user.attributes?e.auth.user.attributes.role:null,printMarker:!!e.PageCommonUsageReducer.printMarker})}))(V);t.default=H},1557:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,u,l,i=r(n(35)),c=r(n(36)),s=r(n(331)),d=r(n(96)),f=r(n(97)),p=r(n(85)),m=r(n(7)),h=r(n(0)),v=r(n(6)),y=n(152),g=r(n(542)),b=r(n(1619)),w=r(n(1613)),O=r(n(1620)),k=n(127),_=n(233),P=n(541),j=n(1605),S=r(n(1610)),E=n(535),C=r(n(1616)),I=n(575),R=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=A(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(21)),T=r(n(20)),M=r(n(534)),N=r(n(1609)),D=r(n(1621)),x=r(n(1615));function A(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(A=function(e){return e?n:t})(e)}function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){(0,m.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,p.default)(e);if(t){var a=(0,p.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.default)(this,n)}}var W=function(e){(0,d.default)(n,e);var t=U(n);function n(){var e;(0,i.default)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),(0,m.default)((0,s.default)(e),"state",{scrollTop:0,docId:e.props.match.params.docId}),(0,m.default)((0,s.default)(e),"category","forum"),(0,m.default)((0,s.default)(e),"gaCategory","Forum"),(0,m.default)((0,s.default)(e),"wrapperViewDOM",h.default.createRef()),(0,m.default)((0,s.default)(e),"getForumTitle",(function(t){var n=e.props.forumObj;return n.meetingNo&&""!==n.meetingNo?n.meetingNo:t||"".concat(n.host,"座談會")})),(0,m.default)((0,s.default)(e),"getDocumentTitle",(function(){return e.getForumTitle()})),(0,m.default)((0,s.default)(e),"handleMarkEvent",(function(t,n){var r=e.props,a=r.forumObj,o=r.isSignedIn,u=+(new Date).getTime(),l=N.default.getSearchKeyword();e.props.dispatch((0,P.requestUpdateMarker)(a._id,e.category,t,n,u,o,l))})),(0,m.default)((0,s.default)(e),"handleAttachmentClick",(function(){e.props.dispatch((0,k.viewDocAttachment)(e.category,e.props.match.params.docId))})),(0,m.default)((0,s.default)(e),"handleTextSelected",(function(t){var n=e.props.forumObj;T.default.logForumSelectText(n._id,t)})),(0,m.default)((0,s.default)(e),"handleTextCopied",(function(t){T.default.logForumCopyText(e.getForumTitle(),t)})),(0,m.default)((0,s.default)(e),"loadForum",(function(t){e.props.dispatch((0,I.fetchForumRequest)(t,N.default.getSearchKeyword()))})),(0,m.default)((0,s.default)(e),"renderContent",(function(){var t=e.props.forumObj;return t.viewLimit?null:h.default.createElement("div",{className:"document__section document__judgement-content markerarea-main"},h.default.createElement(x.default,{marks:t.mainContentMarks},t.mainContent))})),(0,m.default)((0,s.default)(e),"renderDate",(function(){var t=e.props.forumObj;return n.isInvalidDate(t)?"日期不詳":M.default.getChineseDate(t.date)})),(0,m.default)((0,s.default)(e),"renderForumView",(function(){var t=e.props,r=t.forumObj,a=t.match.params,i=t.printMarker;if(!a||!a.docId||(0,g.default)(r))return null;var c=e.renderDate(),s=n.AttachmentButton(r.attachments,e.handleAttachmentClick),d="main-section document__content-container forum__container ".concat(i?"print-it":"");return h.default.createElement("main",{className:"main-view"},h.default.createElement(S.default,{triggerOrigin:"".concat(e.gaCategory," View"),className:d,onMarkEvent:e.handleMarkEvent,onTextSelected:e.handleTextSelected,onTextCopied:e.handleTextCopied,ref:e.wrapperViewDOM,id:a.docId},h.default.createElement(w.default,{className:"document__toolbar hidden-print",docId:r._id,docTitle:e.getForumTitle(r._id),docCategory:e.category,displayWidgets:["share",e.pageStatus.download,"print"]},s),h.default.createElement("div",{className:"document__section document__header"},h.default.createElement("h1",{className:"title document__title"},e.getForumTitle()),h.default.createElement("time",{className:"document__date"},c)),o||(o=h.default.createElement("hr",{className:"document__divider medium"})),e.renderContent(),u||(u=h.default.createElement("div",{className:"dummy"})),l||(l=h.default.createElement(D.default,null))),h.default.createElement(O.default,{category:e.category,docObj:r,pageWidgets:["documentTags","relatedIssues"]},e.props.children))})),e}return(0,c.default)(n,[{key:"componentDidMount",value:function(){var e=this.props.match.params;e&&e.docId&&this.loadForum(n.getDocumentId(e.docId)),(0,j.scrollToTop)()}},{key:"shouldComponentUpdate",value:function(e,t){return this.props!==e||this.state!==t}},{key:"componentDidUpdate",value:function(e){var t=this.props.match.params.docId!==e.match.params.docId,r=this.props.isSignedIn!==e.isSignedIn;(t||r)&&this.loadForum(n.getDocumentId(this.props.match.params.docId)),this.wrapperViewDOM.current&&(0,E.safelyScrollY)(this.wrapperViewDOM.current,this.state.scrollTop)}},{key:"componentWillUnmount",value:function(){this.props.dispatch((0,_.resetDocumentCache)(this.category))}},{key:"render",value:function(){var e=this.props,t=e.fetchForumStatus,n=e.forumObj;return h.default.createElement(C.default,{title:this.getDocumentTitle(),loading:t===R.STATUS_LOADING,reachViewLimit:n.viewLimit},this.renderForumView())}}]),n}(b.default);(0,m.default)(W,"propTypes",B(B({},b.default.defaultPropTypes),{},{printMarker:v.default.bool,forumObj:v.default.object,match:v.default.object,fetchForumStatus:v.default.string,children:v.default.element,isSignedIn:v.default.bool,role:v.default.string}));var F=(0,y.connect)((function(e){return B(B({},W.defaultMapStateToProps(e)),{},{forumObj:e.ForumReducer.forumObj,fetchForumStatus:e.ForumReducer.fetchForumStatus,isSignedIn:!!e.auth.user.isSignedIn,role:e.auth.user.attributes?e.auth.user.attributes.role:null,printMarker:!!e.PageCommonUsageReducer.printMarker})}))(W);t.default=F},1558:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,u,l,i,c,s=r(n(35)),d=r(n(36)),f=r(n(331)),p=r(n(96)),m=r(n(97)),h=r(n(85)),v=r(n(7)),y=r(n(542)),g=r(n(6)),b=r(n(0)),w=n(152),O=r(n(1621)),k=r(n(1615)),_=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=B(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(21)),P=r(n(1620)),j=r(n(1613)),S=r(n(1610)),E=r(n(1619)),C=r(n(1616)),I=n(574),R=n(541),T=n(233),M=n(127),N=r(n(534)),D=n(535),x=r(n(1609)),A=r(n(20)),L=n(1605);function B(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(B=function(e){return e?n:t})(e)}function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){(0,v.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.default)(e);if(t){var a=(0,h.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,m.default)(this,n)}}var V=function(e){(0,p.default)(n,e);var t=F(n);function n(){var e;(0,s.default)(this,n);for(var r=arguments.length,a=new Array(r),d=0;d<r;d++)a[d]=arguments[d];return e=t.call.apply(t,[this].concat(a)),(0,v.default)((0,f.default)(e),"state",{scrollTop:0,docId:e.props.match.params.docId}),(0,v.default)((0,f.default)(e),"category","itp-rule"),(0,v.default)((0,f.default)(e),"gaCategory","ItpRule"),(0,v.default)((0,f.default)(e),"wrapperViewDOM",b.default.createRef()),(0,v.default)((0,f.default)(e),"getItpRuleTitle",(function(){var t=e.props.itpRuleObj;return"".concat(t.publisher," ").concat(t.pubNo)})),(0,v.default)((0,f.default)(e),"getMarkText",(function(e){switch(e){case"abolish":return"廢止";case"partial_abolish":return"部分廢止";case"taken_down":return"下架";default:return""}})),(0,v.default)((0,f.default)(e),"getMarkTextList",(function(){var t,n=(null===(t=e.props.itpRuleObj)||void 0===t?void 0:t.marks)||{};return Object.keys(n).filter((function(e){return!!n[e]})).map((function(t){return e.getMarkText(t)})).filter(Boolean)})),(0,v.default)((0,f.default)(e),"getDocumentTitle",(function(){return e.props.itpRuleObj.pubNo})),(0,v.default)((0,f.default)(e),"handleMarkEvent",(function(t,n){var r=e.props,a=r.itpRuleObj,o=r.isSignedIn,u=+(new Date).getTime(),l=x.default.getSearchKeyword();e.props.dispatch((0,R.requestUpdateMarker)(a._id,e.category,t,n,u,o,l))})),(0,v.default)((0,f.default)(e),"handleAttachmentClick",(function(){e.props.dispatch((0,M.viewDocAttachment)(e.category,e.props.match.params.docId))})),(0,v.default)((0,f.default)(e),"handleTextSelected",(function(t){var n=e.props.itpRuleObj;A.default.logItpRuleSelectText(n._id,t)})),(0,v.default)((0,f.default)(e),"handleTextCopied",(function(t){var n=e.props.itpRuleObj,r="".concat(n.publisher,"  ").concat(n.pubNo);A.default.logItpRuleCopyText(r,t)})),(0,v.default)((0,f.default)(e),"loadItpRule",(function(t){e.props.dispatch((0,I.fetchItpRuleRequest)(t,x.default.getSearchKeyword()))})),(0,v.default)((0,f.default)(e),"renderContent",(function(){var t=e.props.itpRuleObj;return t.viewLimit?null:b.default.createElement("div",{className:"document__section document__judgement-content markerarea-main"},b.default.createElement(k.default,{marks:t.mainContentMarks},t.mainContent))})),(0,v.default)((0,f.default)(e),"renderDate",(function(){var t=e.props.itpRuleObj;return n.isInvalidDate(t)?"日期不詳":N.default.getChineseDate(t.date)})),(0,v.default)((0,f.default)(e),"renderItpRuleView",(function(){var t=e.props,r=t.itpRuleObj,a=t.match.params,s=t.printMarker;if(!a||!a.docId||(0,y.default)(r))return null;var d=e.renderDate(),f=n.AttachmentButton(r.attachments,e.handleAttachmentClick),p="main-section document__content-container itpRule__container ".concat(s?"print-it":"");return b.default.createElement("main",{className:"main-view"},b.default.createElement(S.default,{triggerOrigin:"".concat(e.gaCategory," View"),className:p,onMarkEvent:e.handleMarkEvent,onTextSelected:e.handleTextSelected,onTextCopied:e.handleTextCopied,ref:e.wrapperViewDOM,id:a.docId},b.default.createElement(j.default,{className:"document__toolbar hidden-print",docId:r._id,docTitle:e.getItpRuleTitle(),docCategory:e.category,displayWidgets:["share",e.pageStatus.download,"print"]},f),b.default.createElement("div",{className:"document__section document__header"},b.default.createElement("h1",{className:"title document__title"},e.getMarkTextList().map((function(e){return b.default.createElement("span",{key:e,style:{color:"#B20000"}},"（",e,"）")})),e.getItpRuleTitle()),b.default.createElement("time",{className:"document__date"},d)),o||(o=b.default.createElement("hr",{className:"document__divider medium"})),b.default.createElement("div",{className:"document__section document__summary"},u||(u=b.default.createElement("div",null,"要旨：")),b.default.createElement("div",{className:"markerarea-summary"},b.default.createElement(k.default,{marks:r.summaryMarks},r.summary))),l||(l=b.default.createElement("hr",{className:"document__divider medium"})),e.renderContent(),i||(i=b.default.createElement("div",{className:"dummy"})),c||(c=b.default.createElement(O.default,null))),b.default.createElement(P.default,{category:e.category,docObj:r,pageWidgets:["documentTags","relatedIssues"]},e.props.children))})),e}return(0,d.default)(n,[{key:"componentDidMount",value:function(){var e=this.props.match.params;e&&e.docId&&this.loadItpRule(n.getDocumentId(e.docId)),(0,L.scrollToTop)()}},{key:"shouldComponentUpdate",value:function(e,t){return this.props!==e||this.state!==t}},{key:"componentDidUpdate",value:function(e){var t=this.props.match.params.docId!==e.match.params.docId,r=this.props.isSignedIn!==e.isSignedIn;(t||r)&&this.loadItpRule(n.getDocumentId(this.props.match.params.docId)),this.wrapperViewDOM.current&&(0,D.safelyScrollY)(this.wrapperViewDOM.current,this.state.scrollTop)}},{key:"componentWillUnmount",value:function(){this.props.dispatch((0,T.resetDocumentCache)(this.category))}},{key:"render",value:function(){var e=this.props,t=e.fetchItpRuleStatus,n=e.itpRuleObj;return b.default.createElement(C.default,{title:this.getDocumentTitle(),loading:t===_.STATUS_LOADING,reachViewLimit:n.viewLimit},this.renderItpRuleView())}}]),n}(E.default);(0,v.default)(V,"propTypes",W(W({},E.default.defaultPropTypes),{},{printMarker:g.default.bool,itpRuleObj:g.default.object,match:g.default.object,fetchItpRuleStatus:g.default.string,children:g.default.element,isSignedIn:g.default.bool,role:g.default.string}));var H=(0,w.connect)((function(e){return W(W({},V.defaultMapStateToProps(e)),{},{itpRuleObj:e.ItpRuleReducer.itpRuleObj,fetchItpRuleStatus:e.ItpRuleReducer.fetchItpRuleStatus,isSignedIn:!!e.auth.user.isSignedIn,role:e.auth.user.attributes?e.auth.user.attributes.role:null,printMarker:!!e.PageCommonUsageReducer.printMarker})}))(V);t.default=H},1559:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,u,l,i=r(n(35)),c=r(n(36)),s=r(n(331)),d=r(n(96)),f=r(n(97)),p=r(n(85)),m=r(n(7)),h=r(n(0)),v=r(n(6)),y=n(152),g=r(n(542)),b=r(n(1619)),w=r(n(1620)),O=n(233),k=n(541),_=r(n(1613)),P=n(1605),j=r(n(1610)),S=n(535),E=r(n(1616)),C=n(572),I=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=x(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(21)),R=r(n(20)),T=r(n(534)),M=r(n(1609)),N=r(n(1621)),D=r(n(1615));function x(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(x=function(e){return e?n:t})(e)}function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){(0,m.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function B(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return U(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){l=!0,o=e},f:function(){try{u||null==n.return||n.return()}finally{if(l)throw o}}}}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,p.default)(e);if(t){var a=(0,p.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.default)(this,n)}}var F=function(e){(0,d.default)(n,e);var t=W(n);function n(e){var r;return(0,i.default)(this,n),r=t.call(this,e),(0,m.default)((0,s.default)(r),"wrapperViewDOM",h.default.createRef()),r.state={scrollTop:0,docId:r.props.match.params.docId},r.handleMarkEvent=r.handleMarkEvent.bind((0,s.default)(r)),r.handleTextSelected=r.handleTextSelected.bind((0,s.default)(r)),r.handleTextCopied=r.handleTextCopied.bind((0,s.default)(r)),r.category="constcourt-itp",r.gaCategory="ConstCourtItp",r}return(0,c.default)(n,[{key:"componentDidMount",value:function(){var e=this.props.match.params;e&&e.docId&&this.loadConstCourtItp(this.getConstCourtItpId(e.docId)),(0,P.scrollToTop)()}},{key:"shouldComponentUpdate",value:function(e,t){return this.props!==e||this.state!==t}},{key:"componentDidUpdate",value:function(e){var t=this.props.match.params.docId!==e.match.params.docId,n=this.props.isSignedIn!==e.isSignedIn;(t||n)&&this.loadConstCourtItp(this.getConstCourtItpId(this.props.match.params.docId)),this.wrapperViewDOM.current&&(0,S.safelyScrollY)(this.wrapperViewDOM.current,this.state.scrollTop)}},{key:"componentWillUnmount",value:function(){this.props.dispatch((0,O.resetDocumentCache)(this.category))}},{key:"getConstCourtItpId",value:function(e){return e?e.split(/[?#]/)[0]:null}},{key:"getConstCourtItpTitle",value:function(){var e=this.props.constCourtItpObj;return e.title?"".concat(e.pubNo," ").concat(e.title):e.pubNo}},{key:"getDocumentTitle",value:function(){return this.props.constCourtItpObj.pubNo}},{key:"handleMarkEvent",value:function(e,t){var n=this.props,r=n.constCourtItpObj,a=n.isSignedIn,o=+(new Date).getTime(),u=M.default.getSearchKeyword();this.props.dispatch((0,k.requestUpdateMarker)(r._id,this.category,e,t,o,a,u))}},{key:"handleTextSelected",value:function(e){var t=this.props.constCourtItpObj;R.default.logConstCourtItpSelectText(t._id,e)}},{key:"handleTextCopied",value:function(e){var t=this.props.constCourtItpObj,n="".concat(t.pubNo);R.default.logConstCourtItpCopyText(n,e)}},{key:"loadConstCourtItp",value:function(e){this.props.dispatch((0,C.fetchConstCourtItpRequest)(e,M.default.getSearchKeyword()))}},{key:"renderLastModify",value:function(e){return e?h.default.createElement("time",{className:"document__date"},e):null}},{key:"renderSection",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t)return null;var r="document__section-content ".concat(arguments.length>3&&void 0!==arguments[3]?arguments[3]:"");return h.default.createElement("section",{className:"document__section document__judgement-content"},h.default.createElement("h2",{className:"document__section-title"},e),h.default.createElement("div",{className:r},h.default.createElement(D.default,{marks:n},t)))}},{key:"renderOtherSections",value:function(e){if(!(e instanceof Array))return null;var t,n=[],r=0,a=B(e);try{for(a.s();!(t=a.n()).done;){var o=t.value;n.push(h.default.createElement("section",{key:r,className:"document__section document__judgement-content"},h.default.createElement("h2",{className:"document__section-title"},o.fieldName),h.default.createElement("div",{key:r,className:"document__section-content constCourtItp__amend",dangerouslySetInnerHTML:{__html:o.fieldContent}}))),r+=1}}catch(e){a.e(e)}finally{a.f()}return n}},{key:"renderContent",value:function(){var e=this.props.constCourtItpObj;if(e.viewLimit)return null;var t=this.renderSection("事實摘要",e.fact,e.factMarks,"markerarea-fact"),n=this.renderSection("解釋爭點",e.argument,e.argumentMarks,"markerarea-argument"),r=this.renderSection("解釋文",e.judgement,e.judgementMarks,"markerarea-judgement"),a=this.renderSection("理由書",e.reason,e.reasonMarks,"markerarea-reason"),o=this.renderOtherSections(e.others);return h.default.createElement("div",{className:"document__body"},t,n,r,a,o)}},{key:"renderConstCourtItpView",value:function(){var e=this.props,t=e.constCourtItpObj,n=e.match.params,r=e.printMarker;if(!n||!n.docId||(0,g.default)(t))return null;var a=T.default.getChineseDate(t.date),i=this.renderLastModify(t.correctedItp),c="main-section document__content-container constCourtItp__container ".concat(r?"print-it":"");return h.default.createElement("main",{className:"main-view"},h.default.createElement(j.default,{triggerOrigin:"".concat(this.gaCategory," View"),className:c,onMarkEvent:this.handleMarkEvent,onTextSelected:this.handleTextSelected,onTextCopied:this.handleTextCopied,ref:this.wrapperViewDOM,id:n.docId},h.default.createElement(_.default,{className:"document__toolbar hidden-print",docId:t._id,docTitle:this.getConstCourtItpTitle(),docCategory:this.category,displayWidgets:["share",this.pageStatus.download,"print"]}),h.default.createElement("section",{className:"document__section document__header"},h.default.createElement("h1",{className:"title document__title"},this.getConstCourtItpTitle()),h.default.createElement("time",{className:"document__date"},a),i),o||(o=h.default.createElement("hr",{className:"document__divider medium"})),this.renderContent(),u||(u=h.default.createElement("div",{className:"dummy"})),l||(l=h.default.createElement(N.default,null))),h.default.createElement(w.default,{category:this.category,docObj:t,config:{relatedIssues:{mode:"link"}},pageWidgets:["documentTags","relatedLaws"]},this.props.children))}},{key:"render",value:function(){var e=this.props,t=e.fetchConstCourtItpStatus,n=e.constCourtItpObj;return h.default.createElement(E.default,{title:this.getDocumentTitle(),loading:t===I.STATUS_LOADING,reachViewLimit:n.viewLimit},this.renderConstCourtItpView())}}]),n}(b.default);(0,m.default)(F,"propTypes",L(L({},b.default.defaultPropTypes),{},{printMarker:v.default.bool,constCourtItpObj:v.default.object,match:v.default.object,fetchConstCourtItpStatus:v.default.string,children:v.default.element,isSignedIn:v.default.bool,role:v.default.string}));var V=(0,y.connect)((function(e){return L(L({},F.defaultMapStateToProps(e)),{},{constCourtItpObj:e.ConstCourtItpReducer.constCourtItpObj,fetchConstCourtItpStatus:e.ConstCourtItpReducer.fetchConstCourtItpStatus,isSignedIn:e.auth.user.isSignedIn||!1,role:e.auth.user.attributes?e.auth.user.attributes.role:null,printMarker:e.PageCommonUsageReducer.printMarker||!1})}))(F);t.default=V},1560:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,u,l,i=r(n(35)),c=r(n(36)),s=r(n(331)),d=r(n(96)),f=r(n(97)),p=r(n(85)),m=r(n(7)),h=r(n(0)),v=r(n(6)),y=n(152),g=r(n(542)),b=r(n(1619)),w=r(n(1613)),O=r(n(1620)),k=n(233),_=n(573),P=n(541),j=r(n(1610)),S=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=x(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(21)),E=r(n(20)),C=r(n(534)),I=r(n(1609)),R=n(1605),T=n(535),M=r(n(1616)),N=r(n(1621)),D=r(n(1657));function x(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(x=function(e){return e?n:t})(e)}function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){(0,m.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,p.default)(e);if(t){var a=(0,p.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.default)(this,n)}}var U=function(e){(0,d.default)(n,e);var t=B(n);function n(){var e;(0,i.default)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),(0,m.default)((0,s.default)(e),"category","admin-appeal"),(0,m.default)((0,s.default)(e),"gaCategory","AdminAppeal"),(0,m.default)((0,s.default)(e),"wrapperViewDOM",h.default.createRef()),(0,m.default)((0,s.default)(e),"state",{scrollTop:0,docId:e.props.match.params.docId}),(0,m.default)((0,s.default)(e),"getDocumentTitle",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,n=e.props.adminAppealObj;return t||"".concat(n.datatype," ").concat(n.no||"案號：".concat(n.pubNo))})),(0,m.default)((0,s.default)(e),"handleMarkEvent",(function(t,n){var r=e.props,a=r.adminAppealObj,o=r.isSignedIn,u=+(new Date).getTime(),l=I.default.getSearchKeyword();e.props.dispatch((0,P.requestUpdateMarker)(a._id,e.category,t,n,u,o,l))})),(0,m.default)((0,s.default)(e),"handleTextSelected",(function(t){var n=e.props.adminAppealObj;E.default.logAdminAppealSelectedText(n._id,t)})),(0,m.default)((0,s.default)(e),"handleTextCopied",(function(t){E.default.logAdminAppealCopyText(e.getDocumentTitle(),t)})),(0,m.default)((0,s.default)(e),"fetchDoc",(function(t){e.props.dispatch((0,_.fetchAdminAppealRequest)(t,I.default.getSearchKeyword()))})),(0,m.default)((0,s.default)(e),"renderDate",(function(){var t=e.props.adminAppealObj;return n.isInvalidDate(t)?"日期不詳":C.default.getChineseDate(t.date)})),(0,m.default)((0,s.default)(e),"renderMetaSection",(function(){var t=e.props.adminAppealObj,n=[{label:"發文字號",field:"no"},{label:"案號",field:"pubNo"},{label:"原處分機關",field:"adminOrgan"},{label:"決定日期",field:"date",exec:e.renderDate}].filter((function(e){return Boolean(t[e.field])})).map((function(e){var n=e.exec?e.exec(t[e.field]):t[e.field];return h.default.createElement("li",{key:"document__meta-content-".concat(e.field)},e.label,"：",n)}));return h.default.createElement("ul",{className:"document__section document__meta-content"},n)})),(0,m.default)((0,s.default)(e),"renderView",(function(){var t,n,r=e.props,a=r.adminAppealObj,i=r.match.params,c=r.printMarker;if(!i||!i.docId||(0,g.default)(a))return null;var s="main-section document__content-container admin-appeal__container ".concat(c?"print-it":"");return h.default.createElement("main",{className:"main-view"},h.default.createElement(j.default,{triggerOrigin:"".concat(e.gaCategory," View"),className:s,onMarkEvent:e.handleMarkEvent,onTextSelected:e.handleTextSelected,onTextCopied:e.handleTextCopied,ref:e.wrapperViewDOM,id:i.docId},h.default.createElement(w.default,{className:"document__toolbar hidden-print",gaCategory:e.gaCategory,docId:a._id,docTitle:e.getDocumentTitle(),docCategory:e.category,displayWidgets:["share",e.pageStatus.download,"print"]}),e.renderMetaSection(),o||(o=h.default.createElement("hr",{className:"document__divider medium"})),h.default.createElement(D.default,{show:!a.viewLimit,content:a.judgement,fileType:null===(t=a.attachAsAdminAppeal)||void 0===t?void 0:t.fileType,fileUrl:null===(n=a.attachAsAdminAppeal)||void 0===n?void 0:n.fileUrl,markers:a.judgementMarks,className:"document__section document__judgement-content markerarea-judgement"}),u||(u=h.default.createElement("div",{className:"dummy"})),l||(l=h.default.createElement(N.default,null))),h.default.createElement(O.default,{category:e.category,docObj:a,pageWidgets:["documentTags","relatedIssues"]},e.props.children))})),e}return(0,c.default)(n,[{key:"componentDidMount",value:function(){var e=this.props.match.params;e&&e.docId&&this.fetchDoc(n.getDocumentId(e.docId)),(0,R.scrollToTop)()}},{key:"shouldComponentUpdate",value:function(e,t){return this.props!==e||this.state!==t}},{key:"componentDidUpdate",value:function(e){var t=this.props.match.params.docId!==e.match.params.docId,r=this.props.isSignedIn!==e.isSignedIn;(t||r)&&this.fetchDoc(n.getDocumentId(this.props.match.params.docId)),this.wrapperViewDOM.current&&(0,T.safelyScrollY)(this.wrapperViewDOM.current,this.state.scrollTop)}},{key:"componentWillUnmount",value:function(){this.props.dispatch((0,k.resetDocumentCache)(this.category))}},{key:"render",value:function(){var e=this.props,t=e.adminAppealObj,n=e.fetchAdminAppealStatus;return h.default.createElement(M.default,{title:this.getDocumentTitle(),reachViewLimit:t.viewLimit,loading:n===S.STATUS_LOADING},this.renderView())}}]),n}(b.default);(0,m.default)(U,"propTypes",L(L({},b.default.defaultPropTypes),{},{printMarker:v.default.bool,adminAppealObj:v.default.object,match:v.default.object,fetchAdminAppealStatus:v.default.string,children:v.default.element,isSignedIn:v.default.bool,role:v.default.string}));var W=(0,y.connect)((function(e){return L(L({},U.defaultMapStateToProps(e)),{},{adminAppealObj:e.AdminAppealReducer.adminAppealObj,fetchAdminAppealStatus:e.AdminAppealReducer.fetchAdminAppealStatus,isSignedIn:!!e.auth.user.isSignedIn,role:e.auth.user.attributes?e.auth.user.attributes.role:null,printMarker:!!e.PageCommonUsageReducer.printMarker})}))(U);t.default=W},1561:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,u,l,i=r(n(35)),c=r(n(36)),s=r(n(331)),d=r(n(96)),f=r(n(97)),p=r(n(85)),m=r(n(7)),h=r(n(0)),v=r(n(6)),y=n(152),g=r(n(542)),b=r(n(1619)),w=r(n(1613)),O=r(n(1620)),k=r(n(1610)),_=n(233),P=n(577),j=n(541),S=n(127),E=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=x(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(21)),C=r(n(20)),I=r(n(534)),R=r(n(1609)),T=n(535),M=r(n(1616)),N=r(n(1621)),D=r(n(1659));function x(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(x=function(e){return e?n:t})(e)}function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){(0,m.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,p.default)(e);if(t){var a=(0,p.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.default)(this,n)}}var U=function(e){(0,d.default)(n,e);var t=B(n);function n(e){var r;return(0,i.default)(this,n),r=t.call(this,e),(0,m.default)((0,s.default)(r),"category","indictment"),(0,m.default)((0,s.default)(r),"gaCategory","Indictment"),(0,m.default)((0,s.default)(r),"wrapperViewDOM",h.default.createRef()),(0,m.default)((0,s.default)(r),"getDocumentTitle",(function(){return r.props.indictmentObj.indictNo})),(0,m.default)((0,s.default)(r),"handleMarkEvent",(function(e,t){var n=r.props,a=n.indictmentObj,o=n.isSignedIn,u=+(new Date).getTime(),l=R.default.getSearchKeyword();r.props.dispatch((0,j.requestUpdateMarker)(a._id,r.category,e,t,u,o,l))})),(0,m.default)((0,s.default)(r),"handleTextSelected",(function(e){var t=r.props.indictmentObj;C.default.logIndictmentSelectText(t._id,e)})),(0,m.default)((0,s.default)(r),"handleTextCopied",(function(e){var t=r.props.indictmentObj.indictNo;C.default.logIndictmentCopyText(t,e)})),(0,m.default)((0,s.default)(r),"loadIndictment",(function(e){r.props.dispatch((0,P.fetchIndictmentRequest)(e,R.default.getSearchKeyword()))})),(0,m.default)((0,s.default)(r),"handleAttachmentClick",(function(){r.props.dispatch((0,S.viewDocAttachment)(r.category,r.props.match.params.docId))})),(0,m.default)((0,s.default)(r),"renderIndictmentView",(function(){var e=r.props,t=e.indictmentObj,n=e.match.params,a=e.printMarker;if(!n||!n.docId||(0,g.default)(t))return null;var i=I.default.getChineseDate(t.date),c="main-section document__content-container indictment__container ".concat(a?"print-it":"");return h.default.createElement("main",{className:"main-view"},h.default.createElement(k.default,{triggerOrigin:"".concat(r.gaCategory," View"),className:c,onMarkEvent:r.handleMarkEvent,onTextSelected:r.handleTextSelected,onTextCopied:r.handleTextCopied,ref:r.wrapperViewDOM,id:n.docId},h.default.createElement(w.default,{className:"document__toolbar hidden-print",docId:t._id,docTitle:t.indictNo,docCategory:r.category,displayWidgets:[r.AttachmentButton,"share",r.pageStatus.download,"print"]}),h.default.createElement("ul",{className:"document__section document__meta-content"},h.default.createElement("li",null,"【字號】",t.indictNo),h.default.createElement("li",null,"【日期】",i),h.default.createElement("li",null,"【案由】",t.reason),o||(o=h.default.createElement("li",null,"【起訴書內文】"))),h.default.createElement(D.default,{className:"document__section document__judgement-content markerarea-indictment",show:!t.viewLimit,content:r.documentContent,marks:t.indictmentMarks}),u||(u=h.default.createElement("div",{className:"dummy"})),l||(l=h.default.createElement(N.default,null))),h.default.createElement(O.default,{category:r.category,docObj:t,pageWidgets:["documentTags","judgementHistory","relatedIssues"]},r.props.children))})),r.state={scrollTop:0,docId:r.props.match.params.docId},r}return(0,c.default)(n,[{key:"componentDidMount",value:function(){var e=this.props.match.params;e&&e.docId&&this.loadIndictment(this.getIndictmentId(e.docId))}},{key:"componentDidUpdate",value:function(e){var t=this.props.match.params.docId!==e.match.params.docId,n=this.props.isSignedIn!==e.isSignedIn;(t||n)&&this.loadIndictment(this.getIndictmentId(this.props.match.params.docId)),this.wrapperViewDOM.current&&(0,T.safelyScrollY)(this.wrapperViewDOM.current,this.state.scrollTop)}},{key:"componentWillUnmount",value:function(){this.props.dispatch((0,_.resetDocumentCache)(this.category))}},{key:"documentContent",get:function(){return[].concat(this.props.indictmentObj.indictment)}},{key:"AttachmentButton",get:function(){var e=this.props.indictmentObj.attachments;return Array.isArray(e)&&e.length?h.default.createElement(w.default.ToolbarButton,{label:"附件",icon:"ant-attach",onClick:this.handleAttachmentClick,name:"docattachment"}):null}},{key:"getIndictmentId",value:function(e){return e?e.split(/[?#]/)[0]:null}},{key:"render",value:function(){var e=this.props,t=e.fetchIndictmentStatus,n=e.indictmentObj;return h.default.createElement(M.default,{title:this.getDocumentTitle(),loading:t===E.STATUS_LOADING,reachViewLimit:n.viewLimit},this.renderIndictmentView())}}]),n}(b.default);(0,m.default)(U,"propTypes",L(L({},b.default.defaultPropTypes),{},{printMarker:v.default.bool,indictmentObj:v.default.object,match:v.default.object,fetchIndictmentStatus:v.default.string,children:v.default.element,isSignedIn:v.default.bool,role:v.default.string}));var W=(0,y.connect)((function(e){return L(L({},U.defaultMapStateToProps(e)),{},{indictmentObj:e.IndictmentReducer.indictmentObj,fetchIndictmentStatus:e.IndictmentReducer.fetchIndictmentStatus,isSignedIn:!!e.auth.user.isSignedIn,role:e.auth.user.attributes?e.auth.user.attributes.role:null,printMarker:!!e.PageCommonUsageReducer.printMarker})}))(U);t.default=W},1562:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,u,l,i,c,s,d,f,p,m,h=r(n(35)),v=r(n(36)),y=r(n(331)),g=r(n(96)),b=r(n(97)),w=r(n(85)),O=r(n(7)),k=r(n(1514)),_=ee(n(0)),P=n(152),j=r(n(1522)),S=r(n(544)),E=n(546),C=n(555),I=n(589),R=ee(n(333)),T=ee(n(336)),M=r(n(1716)),N=r(n(539)),D=n(1602),x=r(n(536)),A=r(n(20)),L=r(n(1622)),B=r(n(1609)),U=r(n(1607)),W=ee(n(535)),F=ee(n(1603)),V=r(n(1717)),H=r(n(1719)),G=r(n(1720)),J=r(n(1722)),q=r(n(1723)),z=r(n(1725)),Y=r(n(1726)),K=r(n(1727)),Q=r(n(1728)),X=r(n(1736)),$=r(n(1737));function Z(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(Z=function(e){return e?n:t})(e)}function ee(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=Z(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,w.default)(e);if(t){var a=(0,w.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,b.default)(this,n)}}function re(e){return Array.isArray(e)?e.map((function(e){return function(e){return-1===e?1927:1996+e}(e)})):[]}function ae(e){var t=e.totalCount,n=void 0===t?0:t,r="search-result__total-count ".concat(0===n?"display":""),a=Number.isInteger(n)&&"共".concat(n,"筆結果")||null;return _.default.createElement("div",{className:r},a)}var oe=(o=D.FeaturesLock.FreeFeature,u=D.FeaturesLock.FreeFeature,l=function(e){(0,g.default)(n,e);var t=ne(n);function n(){var e;(0,h.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,O.default)((0,y.default)(e),"debounceSlideStop",(0,S.default)(e.handleTimeFilterSlideStop.bind((0,y.default)(e)),300)),(0,O.default)((0,y.default)(e),"loadLawyers",(function(t){e.props.dispatch((0,C.fetchLawyerRequests)(L.default.safelyDecodeUriComponent(t.keywords)))})),(0,O.default)((0,y.default)(e),"loadCourses",(function(t){e.props.dispatch((0,I.fetchCourseInfo)(L.default.safelyDecodeUriComponent(t.keywords)))})),(0,O.default)((0,y.default)(e),"isLoginRequired",(function(t,n){return!(!n.includes(t)||x.default.isPaidUser(e.props.role))&&(F.proPlanRequired((0,y.default)(e),R.MapFromSearchConst[t]),!0)})),(0,O.default)((0,y.default)(e),"handleSortOptionClick",(function(t){var n=e.props,r=n.match.params,a=n.timeFilterValue,o=n.judgementSection;if(e.isLoginRequired(t.currentTarget.id,["score"]))return!1;var u=t.currentTarget.id;if(e.props.sortBy!==u){e.props.dispatch((0,E.updateSearchOption)({sortBy:u})),A.default.logSearchOption(u);var l={timeFilterValue:a,judgementSection:o,sortBy:u};e.loadSearchResult(r,l,e.UserProfile)}return!0})),(0,O.default)((0,y.default)(e),"handleJudgementSearchOptionClick",(function(t){var n=e.props,r=n.match.params,a=n.timeFilterValue,o=n.sortBy;if(e.isLoginRequired(t.currentTarget.id,["opinion","argument"]))return!1;var u=!["judgement"].includes(r.searchType),l=!r.page||"0"===r.page;if(e.props.judgementSection!==t.currentTarget.id||u){var i=t.currentTarget.id||"all";if(e.props.dispatch((0,E.updateSearchOption)({judgementSection:i})),u||!l){var c=r.keywords;e.props.dispatch((0,E.searchDb)(L.default.safelyDecodeUriComponent(c),"judgement"))}else{var s={timeFilterValue:a,judgementSection:i,sortBy:o};e.loadSearchResult(r,s,e.UserProfile)}var d=u?"none":e.props.judgementSection;A.default.logJudgementSearchOption(d,i)}return!0})),e}return(0,v.default)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.match.params,r=t.timeFilterValue,a=t.judgementSection,o=t.sortBy;this.redirectIfNeeded(n.searchType)||this.props.isAuthenticating||this.isSearchResultCached(n,r,a,o)||(0,P.batch)((function(){var t={timeFilterValue:r,judgementSection:a,sortBy:o};e.loadSearchResult(n,t,e.UserProfile),e.loadTerms(n),e.loadLawyers(n),e.loadCourses(n)}))}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.props,r=n.match.params,a=n.timeFilterValue,o=n.judgementSection,u=n.sortBy,l=n.isAuthenticating,i=n.isSignedIn;if(e.match.params.searchType===r.searchType||!this.redirectIfNeeded(r.searchType)){var c={timeFilterValue:a,judgementSection:o,sortBy:u},s=!l&&e.isAuthenticating!==l,d=i&&!e.isSignedIn;(s||d||this.isSearchParameterUpdated(e))&&this.loadSearchResult(r,c,this.UserProfile),(s||d||this.isKeywordUpdated(e))&&(0,P.batch)((function(){t.loadTerms(r),t.loadLawyers(r),t.loadCourses(r)})),e.searchResult!==this.props.searchResult&&(document.body.scrollTop=0,window.scrollTo(0,0))}}},{key:"UserProfile",get:function(){return{isSignedIn:this.props.isSignedIn,role:this.props.role}}},{key:"getSearchParameter",value:function(e,t){var n=e.searchType,r=L.default.safelyDecodeUriComponent(e.keywords),a=e.page>=1?Math.floor(e.page)-1:0,o=e.size>=1?Math.floor(e.size):10;return"project"===this.props.role&&"judgement"===n&&(o=500),{type:n,keywords:r,page:a,size:o,sortBy:t.sortBy||"date",timeRange:re(t.timeFilterValue),judgementSection:t.judgementSection}}},{key:"isSearchResultCached",value:function(e,t,n,r){var a=this.props.lastSearch,o=e.keywords!==a.keyword,u=e.searchType!==a.searchType,l=e.page!==a.page,i=e.size!==a.size,c=r!==a.sortBy,s=n!==a.judgementSection,d=!(0,j.default)(t,a.timeFilterValue);return!(o||u||l||i||c||s||d)}},{key:"isSearchParameterUpdated",value:function(e){var t=this.props.match.params,n=e.match.params.keywords!==t.keywords,r=e.match.params.searchType!==t.searchType,a=e.match.params.page!==t.page,o=e.match.params.size!==t.size,u=e.sortBy!==this.props.sortBy;return n||r||a||o||u}},{key:"isKeywordUpdated",value:function(e){return e.match.params.keywords!==this.props.match.params.keywords}},{key:"redirectIfNeeded",value:function(e){return void 0===T.SEARCH_SUPPORT_TYPES.find((function(t){return t.type===e}))&&(this.props.dispatch((0,E.redirectToRoot)()),!0)}},{key:"loadSearchResult",value:function(e,t,n){var r=this.getSearchParameter(e,t),a=r.type,o=r.keywords,u=r.page,l=r.size,i=r.sortBy,c=r.timeRange,s=r.judgementSection;/main[:：][^ ]+/.test(o)&&!U.default.AllowProPlanUser(n)?F.proPlanRequired(this,R.GO_PAYMENT_THRU_SEARCH_BY_MAIN):this.props.dispatch((0,E.fetchSearchResultRequest)(a,o,u,l,i,c,s,e,t)),A.default.logSearch(a,o,u,l,i,c,s),B.default.setSearchKeyword(o)}},{key:"loadTerms",value:function(e){this.props.dispatch((0,E.fetchTermsRequest)(L.default.safelyDecodeUriComponent(e.keywords)))}},{key:"handleTimeFilterChange",value:function(e){this.props.dispatch((0,E.updateTimeFilter)(e.target.value))}},{key:"handleTimeFilterSlideStop",value:function(){var e=this.props,t=e.timeFilterValue,n=e.judgementSection,r=e.sortBy,a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(Object(n),!0).forEach((function(t){(0,O.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.props.match.params);delete a.page,delete a.size;var o={timeFilterValue:t,judgementSection:n,sortBy:r};this.loadSearchResult(a,o,this.UserProfile);var u=re(o.timeFilterValue);A.default.logSearchTimeFilter(L.default.safelyDecodeUriComponent(a.keywords),a.searchType,u.join("-"))}},{key:"renderViewBody",value:function(){var e;return _.default.createElement("main",{className:"search-result__main"},_.default.createElement($.default,{onClickJudgementSection:this.handleJudgementSearchOptionClick,onClickSortingOptions:this.handleSortOptionClick}),_.default.createElement("div",{className:"flex-box search-result__container search-result__options-container"},_.default.createElement(J.default,{onClick:this.handleJudgementSearchOptionClick}),_.default.createElement(G.default,{onChange:this.handleTimeFilterChange,onStop:this.debounceSlideStop}),i||(i=_.default.createElement("hr",{className:"horizon-line search-result__options-divider"})),_.default.createElement(ae,{totalCount:(null===(e=this.props.searchResult)||void 0===e?void 0:e.totalCount)||0}),c||(c=_.default.createElement(Y.default,null)),_.default.createElement(H.default,{onClick:this.handleSortOptionClick})),_.default.createElement(X.default,{onClick:this.handleSortOptionClick}),s||(s=_.default.createElement(K.default,null)),d||(d=_.default.createElement(Q.default,null)),f||(f=_.default.createElement(q.default,null)),_.default.createElement(M.default,{tags:this.props.searchResult.relatedDocTags||[]}),p||(p=_.default.createElement(z.default,null)))}},{key:"render",value:function(){return _.default.createElement(V.default,null,this.props.searchResultIsReady?this.renderViewBody():m||(m=_.default.createElement(N.default,{className:"search-result__container"})))}}]),n}(_.Component),(0,k.default)(l.prototype,"handleTimeFilterChange",[D.autobind,o],Object.getOwnPropertyDescriptor(l.prototype,"handleTimeFilterChange"),l.prototype),(0,k.default)(l.prototype,"handleTimeFilterSlideStop",[D.autobind,u],Object.getOwnPropertyDescriptor(l.prototype,"handleTimeFilterSlideStop"),l.prototype),l),ue=(0,P.connect)((function(e){var t;return{searchResult:e.SearchReducer.searchResult,searchResultIsReady:W.isReady(e.SearchReducer.fetchSearchResultStatus),timeFilterValue:e.SearchReducer.timeFilterValue,judgementSection:e.SearchReducer.judgementSection,sortBy:e.SearchReducer.sortBy,lastSearch:e.SearchReducer.lastSearch,isAuthenticating:e.auth.authenticate.loading,isSignedIn:!!e.auth.user.isSignedIn,role:(null===(t=e.auth.user.attributes)||void 0===t?void 0:t.role)||null}}))(oe);t.default=ue},1564:function(e,t,n){"use strict";e.exports=null},1602:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.FeaturesLock=void 0,Object.defineProperty(t,"autobind",{enumerable:!0,get:function(){return u.default}});var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=o?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(r,u,i):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(1617));t.FeaturesLock=o;var u=r(n(1523));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}},1603:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.loginRequired=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new Event("loginrequired",{bubbles:!0,cancelable:!1});n.details=t,e&&e.dispatchEvent?e.dispatchEvent(n):document.dispatchEvent(n);return!1},t.proPlanRequired=function(e,t){var n=new Event("proplanrequired",{bubbles:!0,cancelable:!1});n.details={featureName:t},e&&e.dispatchEvent?e.dispatchEvent(n):document.dispatchEvent(n);return!1},t.updateTagValueByPosition=t.requestCancelGroupBuy=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var a={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=u?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(a,l,i):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n(1612));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}function u(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Event(t,{bubbles:!0,cancelable:!1});return r.details=n,e&&e.dispatchEvent?e.dispatchEvent(r):document.dispatchEvent(r),!1}t.updateTagValueByPosition=function(e){return function(t){return u(e,a.UPDATE_TAG_VALUE_BY_POSITION,t||{})}};t.requestCancelGroupBuy=function(e){return function(t){return u(e,a.REQUEST_CANCEL_GROUPBUY,t)}}},1606:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.getEventDetail=h,t.getPaymentPlanDetail=function(e){if(/-/.test(e)){var t=e.split("-"),n=(0,o.default)(t,1)[0];return i.getPlanById(n)}return i.getPlanById(e)},t.getPlan=y,t.hasPurchasedBefore=v,t.isDisableOrder=function(e){var t=e.isAuthenticating,n=e.isSignedIn,r=e.fetchPaymentHistoryStatus,a=!0;a=!!t||!!n&&r!==l.STATUS_SUCCESS;return a},t.orderAction=function(e,t,n){n&&f.default.logGoPayment(n);(0,u.batch)((function(){t((0,c.updatePaymentPlan)(y(e))),e.isSignedIn?(t((0,c.setReferrerUrl)(e.location.pathname)),t((0,d.viewPayment)())):(t((0,s.toggleSignInMode)(!0)),t((0,s.toggleSignInModal)(!0)),t((0,c.setRedirectOnLogin)()))}))};var o=r(n(153)),u=n(152),l=m(n(21)),i=m(n(538)),c=n(334),s=n(332),d=n(127),f=r(n(20));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function m(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}function h(e){var t=e.match.params.eventName,n=e.eventsDetail;return(void 0===n?{}:n)[t]||{}}function v(e){var t;return!(null===(t=e.paymentProfile)||void 0===t||!t.isPurchasedBefore)}function y(e){return e.eventsDetail?h(e).detail.planId:v(e)?i.PLAN_MONTHLY_MEMBER:i.PLAN_FIRST_PURCHASE}},1607:function(e,t,n){"use strict";var r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(35)),o=r(n(36)),u=r(n(7)),l=r(n(536)),i=function(){function e(){(0,a.default)(this,e)}return(0,o.default)(e,null,[{key:"getUserLevel",value:function(e){var t=e.isSignedIn,n=e.isCorp,r=e.role;return t?n||l.default.isPaidUser(r)?2:1:0}},{key:"AllowFreeUser",value:function(e){return!!e.isSignedIn}},{key:"AllowProPlanUser",value:function(e){var t=e.isSignedIn,n=e.role;return!(!t||!l.default.isPaidUser(n))}},{key:"isLocked",value:function(t,n){var r=n.isSignedIn,a=n.isCorp,o=n.role,u=e.getUserLevel({isSignedIn:r,isCorp:a,role:o});return e.Features[t]>u}}]),e}();t.default=i,(0,u.default)(i,"Features",{RefCount:1,RelatedLaws:1,RelatedIssues:1,CountsByCourt:1,JudgementHistory:1,TimeSlider:1,IssueHistory:1,JudgementOpinion:2,Copy:2,SearchByIssue:2,LastView:2,DownloadWord:2,Print:2,Main:2})},1609:function(e,t,n){"use strict";var r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(35)),o=r(n(36)),u=r(n(1544)),l="LN-sk",i=function(){function e(){(0,a.default)(this,e)}return(0,o.default)(e,null,[{key:"getSearchKeyword",value:function(){var e=u.default.get(l);return e?decodeURI(e):e}},{key:"setSearchKeyword",value:function(e){u.default.set(l,encodeURI(e),60)}}]),e}();t.default=i},1610:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,u,l,i,c,s=r(n(232)),d=r(n(35)),f=r(n(36)),p=r(n(331)),m=r(n(96)),h=r(n(97)),v=r(n(85)),y=r(n(7)),g=D(n(0)),b=r(n(1526)),w=r(n(544)),O=r(n(559)),k=n(152),_=r(n(1520)),P=r(n(1688)),j=r(n(339)),S=D(n(86)),E=n(1605),C=n(535),I=r(n(1689)),R=r(n(1691)),T=r(n(1692)),M=r(n(1693));function N(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(N=function(e){return e?n:t})(e)}function D(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=N(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){(0,y.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,v.default)(e);if(t){var a=(0,v.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,h.default)(this,n)}}var B=function(e){(0,m.default)(n,e);var t=L(n);function n(e){var r;return(0,d.default)(this,n),r=t.call(this,e),(0,y.default)((0,p.default)(r),"domRef",g.default.createRef()),(0,y.default)((0,p.default)(r),"toolbarDom",g.default.createRef()),(0,y.default)((0,p.default)(r),"throttleDisplayToolbarIfNeeded",void 0),(0,y.default)((0,p.default)(r),"debounceDisplayToolbarIfNeeded",void 0),(0,y.default)((0,p.default)(r),"handleMarkerEvent",(function(e,t){var n,a=S.getCategoryByClass(null===(n=r.state.docMarkerProfile)||void 0===n?void 0:n.category);r.props.onMarkEvent(a,A({docId:r.state.docMarkerProfile.docId,offset:r.state.docMarkerProfile.offset,text:r.state.docMarkerProfile.text},t)),(0,_.default)(),r.decideToDisplayToolbar()})),(0,y.default)((0,p.default)(r),"handleDocumentScroll",(function(e){r.throttleDisplayToolbarIfNeeded(e)})),(0,y.default)((0,p.default)(r),"handleDocumentResize",(function(e){r.throttleDisplayToolbarIfNeeded(e)})),(0,y.default)((0,p.default)(r),"isContainerChild",(function(e){return!!e&&!!r.domRefObject.current&&(r.domRefObject.current.contains(e)||r.domRefObject.current.contains(e.parentNode))})),(0,y.default)((0,p.default)(r),"isSelectedVisibleText",(function(e){var t=!(null==e||!e.rangeCount||e.isCollapsed);if(t){var n=null==e?void 0:e.getRangeAt(0),a=!(!t||!r.isContainerChild(null==n?void 0:n.commonAncestorContainer));if(e&&a){var o=n.getBoundingClientRect(),u=r.domRefObject.current.getBoundingClientRect();return o.bottom>u.top&&o.top<u.bottom}}return!1})),(0,y.default)((0,p.default)(r),"isSelectedTextChanged",(function(e){var t=e.left,n=e.right,a=e.selectedText;return r.state.left!==t||r.state.right!==n||r.state.selectedText!==a})),(0,y.default)((0,p.default)(r),"hideToolbar",(function(){r.state.active&&r.setState(n.defaultOverlayToolbarProperties)})),(0,y.default)((0,p.default)(r),"updateToolbarPosition",(function(e){var t,n,a=(null===(t=(n=r.props).getMarkerProfile)||void 0===t?void 0:t.call(n))||new I.default(e,{clearSelection:!1}),o=function(e){var t=e.toString().replace(/\s/g,""),n=e.getRangeAt(0).getClientRects()[0];return{left:n.left,right:n.right,selectedText:t}}(e);r.isSelectedTextChanged(o)&&r.props.onTextSelected&&r.props.onTextSelected(o.selectedText),r.setState(A({active:!0,docMarkerProfile:a,toolbarBoundary:r.computeToolbarPosition(e)},o))})),(0,y.default)((0,p.default)(r),"directlyDecideToDisplayToolbar",(function(){var e=document.getSelection(),t=r.isSelectedVisibleText(e)&&!(0,j.default)().isIOS;e&&t?r.updateToolbarPosition(e):r.hideToolbar()})),(0,y.default)((0,p.default)(r),"decideToDisplayToolbar",(function(){return(0,C.universalRequestAnimation)(r.directlyDecideToDisplayToolbar)})),(0,y.default)((0,p.default)(r),"computeToolbarPosition",(function(e){var t=e.getRangeAt(0).getClientRects()[0],n=t.left,a=t.right,o=t.top,u=Math.trunc((n+a)/2),l=r.domRefObject.current.getBoundingClientRect().top,i=r.toolbarDom.current,c=i.offsetHeight,s=i.offsetWidth/2,d=u<s?s:u-s;return{top:"".concat(o<l?l-c+8:o-c,"px"),left:"".concat(d,"px")}})),r.state=n.defaultOverlayToolbarProperties,r.throttleDisplayToolbarIfNeeded=(0,b.default)(r.decideToDisplayToolbar,300),r.debounceDisplayToolbarIfNeeded=(0,w.default)(r.decideToDisplayToolbar,100),r}return(0,f.default)(n,[{key:"componentDidMount",value:function(){this.domRefObject.current.addEventListener("scroll",this.handleDocumentScroll),document.addEventListener("selectionchange",this.debounceDisplayToolbarIfNeeded),document.addEventListener("scroll",this.handleDocumentScroll),window.addEventListener("resize",this.handleDocumentResize,!0),(0,E.scrollToTop)()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("selectionchange",this.debounceDisplayToolbarIfNeeded),document.removeEventListener("scroll",this.handleDocumentScroll),window.removeEventListener("resize",this.handleDocumentResize,!0),this.domRefObject.current.removeEventListener("scroll",this.handleDocumentScroll),this.throttleDisplayToolbarIfNeeded.cancel(),this.debounceDisplayToolbarIfNeeded.cancel()}},{key:"domRefObject",get:function(){var e;return null!==(e=this.props.forwardedRef)&&void 0!==e?e:this.domRef}},{key:"ToolbarStyle",get:function(){return A(A({},this.state.toolbarBoundary),{},{opacity:+!!this.state.active})}},{key:"Toolbar",get:function(){var e,t=this,n=!(null===(e=this.state.docMarkerProfile)||void 0===e||!e.valid||!this.props.onMarkEvent);return g.default.createElement("div",{className:"toolbar toolbar-abs top hidden-print",style:this.ToolbarStyle,ref:this.toolbarDom,disabled:!0},o||(o=g.default.createElement("div",{className:"toolbar-arrow"})),g.default.createElement("div",{className:"toolbar-content"},u||(u=g.default.createElement("div",{className:"line"})),g.default.createElement(T.default,{className:"toolbar-inner",selectedText:this.state.selectedText||"",onTextCopyEnd:this.props.onTextCopied}),!!this.props.onCopyQuotedText&&g.default.createElement(g.default.Fragment,null,l||(l=g.default.createElement("div",{className:"line"})),g.default.createElement(R.default,{className:"toolbar-inner",selectedText:this.state.selectedText||"",onTextCopyStart:this.props.onCopyQuotedText,onTextCopyEnd:this.props.onCopiedQuotedText})),n&&g.default.createElement(g.default.Fragment,null,i||(i=g.default.createElement("div",{className:"line"})),g.default.createElement("span",{className:"toolbar-inner marker-palette"},Array(3).fill(!0).map((function(e,n){return g.default.createElement(P.default.Painter,{key:n,className:"marker-icon",onClick:t.handleMarkerEvent,getMarkerProfile:t.props.getMarkerProfile,markerId:n})})),g.default.createElement(P.default.Eraser,{className:"marker-icon",onClick:this.handleMarkerEvent,getMarkerProfile:this.props.getMarkerProfile}))),c||(c=g.default.createElement("div",{className:"line"})),g.default.createElement(M.default,{className:"toolbar-inner",selectedText:this.state.selectedText||"",triggerOrigin:this.props.triggerOrigin})))}},{key:"render",value:function(){var e=(0,O.default)(this.props,["getMarkerProfile","onTextSelected","onTextCopied","onCopyQuotedText","onCopiedQuotedText","children","onMarkEvent","isSignedIn","role","dispatch","forwardedRef","triggerOrigin"]);return g.default.createElement("div",(0,s.default)({ref:this.domRefObject},e),this.Toolbar,this.props.children)}}]),n}(g.Component);(0,y.default)(B,"defaultToolbarPosition",{top:"-48px",left:"0px"}),(0,y.default)(B,"defaultOverlayToolbarProperties",{active:!1,canMarkSelectedText:!1,markerCategoryClass:null,toolbarBoundary:B.defaultToolbarPosition,selectedText:null,left:0,right:0});var U=g.default.forwardRef((function(e,t){return g.default.createElement(B,(0,s.default)({},e,{forwardedRef:t}))})),W=(0,k.connect)((function(e){var t;return{isSignedIn:!!e.auth.user.isSignedIn,role:(null===(t=e.auth.user.attributes)||void 0===t?void 0:t.role)||null}}),null,null,{forwardRef:!0})(U);t.default=W},1612:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UPDATE_TAG_VALUE_BY_POSITION=t.UPDATE_ALL_TAGS=t.REQUEST_TAG_SUGGESTIONS=t.REQUEST_CANCEL_GROUPBUY=void 0;t.UPDATE_TAG_VALUE_BY_POSITION="UPDATE_TAG_VALUE_BY_POSITION";t.UPDATE_ALL_TAGS="UPDATE_ALL_TAGS";t.REQUEST_TAG_SUGGESTIONS="REQUEST_TAG_SUGGESTION";t.REQUEST_CANCEL_GROUPBUY="REQUEST_CANCEL_GROUPBUY"},1613:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,u,l,i,c,s,d=r(n(232)),f=r(n(35)),p=r(n(36)),m=r(n(96)),h=r(n(97)),v=r(n(85)),y=r(n(1514)),g=R(n(0)),b=(r(n(6)),r(n(558))),w=r(n(1517)),O=n(152),k=R(n(333)),_=n(1602),P=r(n(20)),j=n(127),S=n(233),E=n(556),C=r(n(1687));function I(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(I=function(e){return e?n:t})(e)}function R(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=I(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,v.default)(e);if(t){var a=(0,v.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,h.default)(this,n)}}var M="Word下載",N=(o=_.FeaturesLock.ProPlanFeature({feature:k.GO_PAYMENT_THRU_PRINT}),u=_.FeaturesLock.ProPlanFeature({feature:k.GO_PAYMENT_THRU_PRINT}),l=_.FeaturesLock.ProPlanFeature({feature:k.GO_PAYMENT_THRU_DOWNLOAD_AS_WORD}),i=function(e){(0,m.default)(n,e);var t=T(n);function n(){return(0,f.default)(this,n),t.apply(this,arguments)}return(0,p.default)(n,[{key:"componentDidUpdate",value:function(e){this.props.printMarker!==e.printMarker&&this.onPrint()}},{key:"onClickPrintOptions",value:function(e){if(e&&"BUTTON"===e.target.tagName&&e.target.dataset.printmarker){var t="true"===e.target.dataset.printmarker;this.props.printMarker!==t?this.props.dispatch((0,S.togglePrintMarker)(t)):this.onPrint()}}},{key:"onPrint",value:function(){var e=this.props,t=e.docTitle,n=e.docCategory;return(this.props.printMarker?P.default.logPrintMarkedDocument:P.default.logPrintDocument)({law:"Law","admin-appeal":"AdminAppeal","constcourt-itp":"constCourtItp","itp-rule":"itpRule",decision:"Decision",forum:"Forum",judgement:"Judgement"}[n],t),document.execCommand("print",!1,null)||window.print(),!1}},{key:"onShortUrlClick",value:function(e){e.target.blur(),this.props.dispatch((0,j.viewShortUrl)(this.props.docCategory,this.props.docId))}},{key:"onWordDownloadClick",value:function(e){e.currentTarget.blur();var t=this.props,r=t.docId,a=t.docCategory,o={versionId:this.props.versionId};this.props.dispatch((0,E.downloadRequest)(a,r,o)),P.default.logDownloadDocument(n.gaLabel[a],r)}},{key:"renderPrintOptions",value:function(){return g.default.createElement("div",{className:"print-options",onClick:this.onClickPrintOptions},c||(c=g.default.createElement("div",{className:"arrow-box"},g.default.createElement("button",{"data-printmarker":"true"},"附帶螢光筆"),g.default.createElement("button",{"data-printmarker":"false"},"不附帶螢光筆"))))}},{key:"render",value:function(){var e=s||(s=g.default.createElement(w.default,{id:"tooltip",bsClass:"hint",className:"hide-in-mobile hide-in-tablet hidden-print"},g.default.createElement("div",null,M),g.default.createElement("div",{className:"tooltip-highlight"},"提醒：檔案已排版消除斷行。惟少部分裁判仍會有斷行不精準的情形，敬請見諒。"))),t={print:{icon:"ant-printer",children:this.renderPrintOptions()},"pure-print":{label:"列印",icon:"ant-printer",onClick:this.onPrint},share:{label:"分享",icon:"ant-link",onClick:this.onShortUrlClick},download:{label:M,tooltip:"judgement"===this.props.docCategory?e:void 0,icon:"ant-download",onClick:this.onWordDownloadClick},downloading:{label:"下載中",icon:"ant-download",disabled:!0}},n=this.props.displayWidgets.map((function(e){return"string"==typeof e?g.default.createElement(C.default,(0,d.default)({key:"".concat(e,"-toolbar-button")},t[e],{name:e})):e}));return g.default.createElement("div",{className:this.props.className},g.default.createElement(b.default,null,this.props.children,n))}}],[{key:"gaLabel",get:function(){return{law:"Law",forum:"Forum",decision:"Decision",judgement:"Judgement","itp-rule":"itpRule","admin-appeal":"AdminAppeal","constcourt-itp":"constCourtItp"}}}]),n}(g.Component),(0,y.default)(i.prototype,"onClickPrintOptions",[_.autobind,o],Object.getOwnPropertyDescriptor(i.prototype,"onClickPrintOptions"),i.prototype),(0,y.default)(i.prototype,"onPrint",[_.autobind,u],Object.getOwnPropertyDescriptor(i.prototype,"onPrint"),i.prototype),(0,y.default)(i.prototype,"onShortUrlClick",[_.autobind],Object.getOwnPropertyDescriptor(i.prototype,"onShortUrlClick"),i.prototype),(0,y.default)(i.prototype,"onWordDownloadClick",[_.autobind,l],Object.getOwnPropertyDescriptor(i.prototype,"onWordDownloadClick"),i.prototype),i);N.ToolbarButton=C.default;var D=(0,O.connect)((function(e){return{printMarker:e.PageCommonUsageReducer.printMarker||!1,isSignedIn:e.auth.user.isSignedIn||!1,role:e.auth.user.attributes?e.auth.user.attributes.role:null}}))(N);t.default=D},1615:function(e,t,n){"use strict";var r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.MarkedChunk=h,t.default=void 0;var a=r(n(35)),o=r(n(36)),u=r(n(331)),l=r(n(96)),i=r(n(97)),c=r(n(85)),s=r(n(7)),d=r(n(232)),f=r(n(0)),p=r(n(1635));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.default)(e);if(t){var a=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,i.default)(this,n)}}function h(e){return f.default.createElement("span",(0,d.default)({},e.attributes,{"data-crlf":!!e.crlf,className:e.className}),e.text.replace(/([\u0020\u3000]{5,})(\r?\n)/g,(function(e,t,n){return"".concat("​".repeat(t.length)).concat(n)})))}var v=function(e){(0,l.default)(n,e);var t=m(n);function n(){var e;(0,a.default)(this,n);for(var r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return e=t.call.apply(t,[this].concat(o)),(0,s.default)((0,u.default)(e),"buildProfile",(function(){return e.props.marks instanceof p.default?e.props.marks:new p.default(e.props.children,{idField:e.props.idField}).updateMarks(e.props.marks)})),(0,s.default)((0,u.default)(e),"renderChunk",(function(t){return f.default.createElement(e.props.renderChunk||h,t)})),(0,s.default)((0,u.default)(e),"renderChunks",(function(){return e.buildProfile().result.map(e.renderChunk)})),e}return(0,o.default)(n,[{key:"shouldComponentUpdate",value:function(e){return this.props.children!==e.children||this.props.marks!==e.marks}},{key:"render",value:function(){return"string"==typeof this.props.children&&this.props.marks?f.default.createElement(f.default.Fragment,null,this.renderChunks()):this.props.children}}]),n}(f.default.Component);t.default=v,(0,s.default)(v,"defaultProps",{renderChunk:h})},1616:function(e,t,n){"use strict";var r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,o,u,l=r(n(35)),i=r(n(36)),c=r(n(96)),s=r(n(97)),d=r(n(85)),f=r(n(0)),p=r(n(1527)),m=r(n(1650)),h=r(n(1604)),v=r(n(539));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var g=function(e){(0,c.default)(n,e);var t=y(n);function n(){return(0,l.default)(this,n),t.apply(this,arguments)}return(0,i.default)(n,[{key:"title",get:function(){var e="Lawsnote七法－法學資料庫";return this.props.title?"".concat(this.props.title," | ").concat(e):e}},{key:"render",value:function(){var e;return f.default.createElement(p.default,{title:this.title},f.default.createElement("div",{className:"fullHeight no-scroll-on-mobile"},a||(a=f.default.createElement(h.default,null)),o||(o=f.default.createElement("hr",{className:"horizon-line document__top-divider"})),this.props.loading?u||(u=f.default.createElement(v.default,{message:"載入文件",className:"document__content-container document__loading-status"})):null!==(e=this.props.children)&&void 0!==e?e:null,f.default.createElement(m.default,{viewLimit:this.props.reachViewLimit})))}}]),n}(f.default.Component);t.default=g},1617:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.FreeFeature=function(e,t,n){var r=n.value;return s(s({},n),{},{value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return l.default.AllowFreeUser(d(this.props))?r.apply(this,t):Reflect.apply(u.loginRequired,this,t)}})},t.ProPlanFeature=function(e){return function(t,n,r){return o=e,i=(a=r).value,s(s({},a),{},{value:function(){var e=l.default.AllowProPlanUser(d(this.props));if(o.preback&&o.preback(e),l.default.AllowProPlanUser(d(this.props))){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return i.apply(this,n)}return Reflect.apply(u.proPlanRequired,this,[null,o.feature])}});var a,o,i}};var o=r(n(7)),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(1603)),l=r(n(1607));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e){return{isSignedIn:!!e.isSignedIn,role:e.role||""}}},1618:function(e,t,n){"use strict";var r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,a.default)(),n=document.createElement("textarea");if(n.textContent=e,n.style.whiteSpace="pre",n.style.position="fixed",n.style.top="0",n.style.clip="rect(0px 0px 0px 0px)",n.style.background="transparent",document.body.appendChild(n),function(){return navigator.userAgent.match(/ipad|iphone/i)}()){var r=document.createRange();r.selectNodeContents(n);var u=window.getSelection();u&&(u.removeAllRanges(),u.addRange(r)),n.setSelectionRange(0,999999)}else n.select();if(!document.execCommand("copy")){o("unable to copy using execCommand");try{window.clipboardData.setData("text",e)}catch(e){return o("unable to copy using clipboardData",e),!1}}n&&document.body.removeChild(n);return t(),!0};var a=r(n(1520)),o=(0,r(n(59)).default)("copy-to-clipboard")},1619:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(35)),u=r(n(36)),l=r(n(96)),i=r(n(97)),c=r(n(85)),s=h(n(0)),d=r(n(6)),f=r(n(1613)),p=h(n(21));function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.default)(e);if(t){var a=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,i.default)(this,n)}}var y=function(e){(0,l.default)(n,e);var t=v(n);function n(){return(0,o.default)(this,n),t.apply(this,arguments)}return(0,u.default)(n,[{key:"pageStatus",get:function(){var e=this.props,t=this.category;return{download:e.downloadStatus[t]===p.STATUS_LOADING?"downloading":"download"}}}],[{key:"defaultPropTypes",get:function(){return{dispatch:d.default.func.isRequired,downloadStatus:d.default.object}}},{key:"getDerivedStateFromProps",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.match.params.docId!==t.docId)return{scrollTop:0,docId:e.match.params.docId};var n=document.getElementById(e.match.params.docId);return n?{scrollTop:n.scrollTop}:null}},{key:"defaultMapStateToProps",value:function(e){return{downloadStatus:e.DownloadReducer.downloadStatus}}},{key:"AttachmentButton",value:function(e,t){if(!Array.isArray(e)||0===e.length)return null;var n={label:"附件",icon:"ant-attach",onClick:t,name:"docattachment"};return s.default.createElement(f.default.ToolbarButton,n)}},{key:"isInvalidDate",value:function(e){return!(!e||!e.bInvalidDate)}},{key:"getDocumentId",value:function(e){return e?e.split(/[?#]/)[0]:null}}]),n}(s.Component);t.default=y},1620:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,u,l,i,c=r(n(232)),s=r(n(35)),d=r(n(36)),f=r(n(331)),p=r(n(96)),m=r(n(97)),h=r(n(85)),v=r(n(1514)),y=r(n(58)),g=r(n(7)),b=x(n(0)),w=(r(n(6)),r(n(13))),O=n(152),k=x(n(333)),_=r(n(1708)),P=r(n(1710)),j=r(n(1712)),S=r(n(1713)),E=r(n(1654)),C=n(233),I=n(1602),R=r(n(20)),T=r(n(1607)),M=n(1630),N=["name","label","active"];function D(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(D=function(e){return e?n:t})(e)}function x(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=D(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.default)(e);if(t){var a=(0,h.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,m.default)(this,n)}}function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){(0,g.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function U(e){return function(t){return B(B({},t),{},{category:e,fullNo:t.no||t.indictNo,unit:t.court||t.org})}}function W(e){var t=e.name,n=e.label,r=e.active,a=B(B({},(0,y.default)(e,N)),{},{className:(0,w.default)("flex-fixed-item","document-misc__button","document-misc__".concat(t,"-button"),{active:r}),"data-toggle":t,"data-value":!!r});return b.default.createElement("button",a,n)}var F=(o=I.FeaturesLock.ProPlanFeature({feature:k.GO_PAYMENT_THRU_JUDGEMENT_OPINION}),l=function(e){(0,p.default)(n,e);var t=A(n);function n(){var e;(0,s.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,g.default)((0,f.default)(e),"onClickDocumentTags",(function(t){e.props.dispatch((0,C.resetDocumentToggles)()),e.props.dispatch((0,C.toggleDocumentTags)(void 0!==t?t:!e.props.displayDocumentTags))})),(0,g.default)((0,f.default)(e),"onClickRelatedIssues",(function(t){e.props.dispatch((0,C.resetDocumentToggles)()),e.props.dispatch((0,C.toggleRelatedIssues)(void 0!==t?t:!e.props.displayRelatedIssues))})),(0,g.default)((0,f.default)(e),"onClickJudgementHistory",(function(t){e.props.dispatch((0,C.resetDocumentToggles)()),e.props.dispatch((0,C.toggleJudgementHistory)(void 0!==t?t:!e.props.displayJudgementHistory))})),(0,g.default)((0,f.default)(e),"moveToJudgementOpinion",(function(){(0,E.default)("opinion",e.props.docObj._id,{offset:-15})})),(0,g.default)((0,f.default)(e),"renderDivider",(function(t){var n=(0,w.default)("horizon-line",{"hide-in-desktop":!!e.props.children});return b.default.createElement("hr",{key:t,className:n})})),(0,g.default)((0,f.default)(e),"renderJudgementHistory",(function(t,n){var r=e.props,a=r.docObj,o=r.keywords,u=r.displayJudgementHistory,l=r.isSignedIn,i=r.category,s=u||!1,d=a.indictmentHistories||[],f=a.histories||[],p={show:s,category:i,keywords:o,onClickClose:function(){return e.onClickJudgementHistory(!1)},histories:d.map(U("indictment")).concat(f.map(U("judgement"))),docId:a._id,hasChildren:!!e.props.children,locked:T.default.isLocked("JudgementHistory",{isSignedIn:l}),label:n};return b.default.createElement(P.default,(0,c.default)({key:t},p))})),(0,g.default)((0,f.default)(e),"renderJudgementOpinion",(function(t,n){var r=e.props,a=r.docObj,o=r.isSignedIn,u=r.role,l={opinionSet:a.judgementMarks.opinion,judgementId:a._id,hasChildren:!!e.props.children,locked:T.default.isLocked("JudgementOpinion",{isSignedIn:o,role:u}),label:n};return b.default.createElement(j.default,(0,c.default)({key:t},l))})),(0,g.default)((0,f.default)(e),"renderRelatedIssues",(function(t,n){var r=e.props,a=r.config,o=r.category,u=r.docObj,l=r.displayRelatedIssues,i=r.isSignedIn,s=l||!1,d=B(B({},a.relatedIssues),{},{category:o,show:s,onClickClose:function(){return e.onClickRelatedIssues(!1)},hasChildren:!!e.props.children,locked:T.default.isLocked("RelatedIssues",{isSignedIn:i}),relatedIssues:u.relatedIssues||u.relatedIssue,label:n,marks:e.props.lawMarkers});return b.default.createElement(_.default,(0,c.default)({key:t},d))})),(0,g.default)((0,f.default)(e),"renderDocumentTagSection",(function(t,n){var r=e.props,a=r.docObj,o=r.category,u=r.displayDocumentTags,l={docId:a._id,category:o,show:u,hasChildren:!!e.props.children,onClickClose:function(){return e.onClickDocumentTags(!1)},label:n};return b.default.createElement(S.default,(0,c.default)({key:t},l))})),(0,g.default)((0,f.default)(e),"renderSections",(function(){var t=e.props,n=t.pageWidgets,r=t.displayRelatedIssues,a=t.displayJudgementHistory,o=t.displayDocumentTags,u=[],l=[],i={documentTags:{label:"標註標籤",button:{onClick:e.onClickDocumentTags,active:o},module:e.renderDocumentTagSection},relatedIssues:{label:"相關條文",button:{onClick:e.onClickRelatedIssues,active:r},module:e.renderRelatedIssues},judgementHistory:{label:"歷審裁判",button:{onClick:e.onClickJudgementHistory,active:a},module:e.renderJudgementHistory},judgementOpinion:{label:"瀏覽法院見解",button:{onClick:e.onClickJudgementOpinion},module:e.renderJudgementOpinion},relatedLaws:{label:"相關法令",button:{onClick:e.onClickRelatedIssues,active:r},module:e.renderRelatedIssues}};return n.forEach((function(t,r){var a=i[t].label,o=i[t].module("module-".concat(t),a);if(u.push(o),r!==n.length-1&&u.push(e.renderDivider("hr-".concat(t))),i[t].button){var s=i[t].button,d=s.onClick,f={name:t,onClick:function(){return d()},label:a,active:s.active};l.push(b.default.createElement(W,(0,c.default)({key:"btn-".concat(t)},f)))}})),{widgetsJsx:u,mobileNav:l}})),e}return(0,d.default)(n,[{key:"componentWillUnmount",value:function(){this.props.dispatch((0,C.resetDocumentToggles)())}},{key:"onClickJudgementOpinion",value:function(){var e=this.props,t=e.isSignedIn,n=e.role;return this.props.dispatch((0,C.resetDocumentToggles)()),!T.default.isLocked("JudgementOpinion",{isSignedIn:t,role:n})&&(R.default.logOpinion(this.props.docObj._id),this.moveToJudgementOpinion(),!0)}},{key:"render",value:function(){var e=[],t=[],n={category:this.props.category,docObj:this.props.docObj};if(this.props.pageWidgets&&this.props.pageWidgets.length>0){var r=this.renderSections();e=r.widgetsJsx,t=r.mobileNav}var a=this.props.customButtons.map((function(e){return b.default.createElement(W,(0,c.default)({key:e.name},e))}));return b.default.createElement("aside",{className:this.props.className||"flex-section document__aside-container document-misc__main-container hidden-print"},e,b.default.createElement(M.ContentContext.Provider,{value:n},this.props.children),b.default.createElement("div",{className:"document-misc__navbar-container"},t,a),i||(i=b.default.createElement("div",{className:"dummy hide-in-mobile hide-in-tablet"})))}}]),n}(b.Component),(0,g.default)(l,"defaultProps",{children:null,config:{},customButtons:[],pageWidgets:["relatedIssues"]}),u=l,(0,v.default)(u.prototype,"onClickJudgementOpinion",[I.autobind,o],Object.getOwnPropertyDescriptor(u.prototype,"onClickJudgementOpinion"),u.prototype),u),V=(0,O.connect)((function(e){return{isSignedIn:e.auth.user.isSignedIn||!1,role:e.auth.user.attributes?e.auth.user.attributes.role:null,displayRelatedIssues:e.PageCommonUsageReducer.displayRelatedIssues||!1,displayJudgementHistory:e.PageCommonUsageReducer.displayJudgementHistory||!1,displayDocumentTags:e.PageCommonUsageReducer.displayDocumentTags||!1,lawMarkers:e.LawsReducer.lawMarkers||{}}}))(F);t.default=V},1621:function(e,t,n){"use strict";var r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,o=r(n(35)),u=r(n(36)),l=r(n(331)),i=r(n(96)),c=r(n(97)),s=r(n(85)),d=r(n(7)),f=r(n(0)),p=r(n(13)),m=r(n(544)),h=n(535);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}var y=function(e){(0,i.default)(n,e);var t=v(n);function n(e){var r;(0,o.default)(this,n),r=t.call(this,e),(0,d.default)((0,l.default)(r),"node",f.default.createRef()),(0,d.default)((0,l.default)(r),"baseBottom",15),(0,d.default)((0,l.default)(r),"debounceUpdateButtonPosition",void 0),(0,d.default)((0,l.default)(r),"computeNextPosition",(function(){var e,t,n=(null===(e=r.node.current)||void 0===e||null===(t=e.parentElement)||void 0===t?void 0:t.scrollTop)||0;return{show:!!n,bottom:r.baseBottom-n}})),(0,d.default)((0,l.default)(r),"directlyUpdatePosition",(function(){r.setState(r.computeNextPosition())})),(0,d.default)((0,l.default)(r),"updateButtonPosition",(function(){(0,h.gracefulDomOperation)(r.directlyUpdatePosition)})),(0,d.default)((0,l.default)(r),"onParentScroll",(function(){r.state.show&&r.setState({show:!1}),r.debounceUpdateButtonPosition()})),(0,d.default)((0,l.default)(r),"detectParentScrollable",(function(){var e;return!(null===(e=r.node.current)||void 0===e||!e.parentElement)&&r.node.current.parentElement.scrollHeight>r.node.current.parentElement.clientHeight})),(0,d.default)((0,l.default)(r),"gracefullyDetectScrollable",(function(){return(0,h.gracefulDomOperation)((function(){var e=r.detectParentScrollable();r.setState({active:e})}))})),(0,d.default)((0,l.default)(r),"directlyMoveTop",(function(){var e,t;null!==(e=r.node.current)&&void 0!==e&&null!==(t=e.parentElement)&&void 0!==t&&t.scrollTop&&(0,h.safelyScrollY)(r.node.current.parentElement,0)})),(0,d.default)((0,l.default)(r),"onClick",(function(){(0,h.gracefulDomOperation)(r.directlyMoveTop)})),r.state={active:!1,show:!1,bottom:r.baseBottom};return r.debounceUpdateButtonPosition=(0,m.default)(r.updateButtonPosition,300),r}return(0,u.default)(n,[{key:"componentDidMount",value:function(){this.gracefullyDetectScrollable()}},{key:"componentDidUpdate",value:function(e,t){var n;this.state.active&&!t.active&&null!==(n=this.node.current)&&void 0!==n&&n.parentElement&&this.node.current.parentElement.addEventListener("scroll",this.onParentScroll)}},{key:"componentWillUnmount",value:function(){var e;null!==(e=this.node.current)&&void 0!==e&&e.parentElement&&this.node.current.parentElement.removeEventListener("scroll",this.onParentScroll)}},{key:"className",get:function(){return(0,p.default)("hide-in-mobile","hide-in-tablet","cursor-pointer","flex-center","goto-top",{inactive:!this.state.show})}},{key:"styleSheet",get:function(){return{bottom:"".concat(this.state.bottom,"px")}}},{key:"render",value:function(){return f.default.createElement("span",{role:"presentation",className:this.className,onClick:this.onClick,ref:this.node,style:this.styleSheet},a||(a=f.default.createElement("i",{className:"ant ant-arrow-up-1"})))}}]),n}(f.default.PureComponent);t.default=y},1622:function(e,t,n){"use strict";var r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(35)),o=r(n(36)),u=function(){function e(){(0,a.default)(this,e)}return(0,o.default)(e,null,[{key:"safelyDecodeUriComponent",value:function(e){try{return decodeURIComponent(e)}catch(t){return e}}}]),e}();t.default=u},1629:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TABLET_DEVICE_RESOLUTION=t.LARGE_DEVICE_RESOLUTION=void 0;t.LARGE_DEVICE_RESOLUTION="799px";t.TABLET_DEVICE_RESOLUTION="768px"},1630:function(e,t,n){"use strict";var r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.ContentContext=void 0;var a=r(n(0)).default.createContext({category:null,docObj:null});t.ContentContext=a},1634:function(e,t,n){"use strict";var r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.findAncestor=function(e,t){if(!e)return null;if("function"!=typeof t)throw TypeError("filter should be a function");var n=e;for(;n;){if(t(n))return n;n=n.parentElement||n.parentNode}return null},t.getNextSibling=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return a.default.mark((function t(){var n,r;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e;case 1:if(null===(r=n)||void 0===r||!r.nextSibling){t.next=7;break}return t.next=4,n.nextSibling;case 4:n=n.nextSibling,t.next=1;break;case 7:case"end":return t.stop()}}),t)}))()},t.getNodesBySelection=function(e){if(e&&!e.isCollapsed)return u(e.getRangeAt(0));return[]},t.getNodesInRange=u;var a=r(n(9));function o(e){var t=e;if(t.hasChildNodes())return t.firstChild;for(;t&&!t.nextSibling;)t=t.parentNode;return t?t.nextSibling:null}function u(e){var t=e.startContainer,n=e.endContainer;if(t===n)return[t];for(var r=[];t&&t!==n;)r.push(t=o(t));for(t=e.startContainer;t&&t!==e.commonAncestorContainer;)r.unshift(t),t=t.parentNode;return r}},1635:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(35)),u=r(n(36)),l=r(n(7)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(338)),c=r(n(561));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function d(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){l=!0,o=e},f:function(){try{u||null==n.return||n.return()}finally{if(l)throw o}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,l.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,o.default)(this,e),(0,l.default)(this,"content",void 0),(0,l.default)(this,"error",!1),(0,l.default)(this,"props",e.defaultProps),(0,l.default)(this,"result",[]),(0,l.default)(this,"getTextChunk",(function(e,t){return n.content.substring(e,t)})),(0,l.default)(this,"updateMarks",(function(t){if(t){var r=e.safelyMergeRanges(t);r?(n.props=m(m({},n.props),r),n.generateChunks()):n.error=!0}return n})),(0,l.default)(this,"getCalibratedRange",(function(e){return{start:e.start-n.props.leftOffset,end:e.end-n.props.leftOffset}})),(0,l.default)(this,"getAttributes",(function(e,t){var r,a={},o=d(e.profile);try{for(o.s();!(r=o.n()).done;){var u=r.value,l=t[u.markerIndex];n.props.idField===l?a.id=l.toString():a["data-".concat(l)]=u.elementIndex}}catch(e){o.e(e)}finally{o.f()}return a})),(0,l.default)(this,"generateWholeChunk",(function(){return m(m({},n.generateChunk(0,n.content.length)),{},{marker:{start:0+n.props.leftOffset,end:n.content.length+n.props.leftOffset}})})),this.content=t,this.props=m(m(m({},e.defaultProps),r),{},{isCrlf:i.isCrlfString(t)}),this.generateChunks()}return(0,u.default)(e,[{key:"shouldBreakdown",get:function(){return!!(!this.props.offsetRange||this.props.offsetRange&&this.isCover(this.props.offsetRange))}},{key:"isCover",value:function(e){var t,n,r,a,o=null!==(t=null===(n=this.props.markers[0])||void 0===n?void 0:n.start)&&void 0!==t?t:-1,u=null!==(r=null===(a=this.props.markers.slice(-1)[0])||void 0===a?void 0:a.end)&&void 0!==r?r:-1;return!(o>=e.end||u<=e.start)}},{key:"generateChunk",value:function(e,t){return{key:e,text:this.getTextChunk(e,t),crlf:!!this.props.isCrlf}}},{key:"generateChunks",value:function(){this.result.length=0;var e=this.props,t=e.markers,n=e.types;if(t.length&&this.shouldBreakdown){var r,a=0,o=d(t);try{for(o.s();!(r=o.n()).done;){var u=r.value;if(this.props.offsetRange&&u.start>=this.props.offsetRange.end)break;var l=this.getCalibratedRange(u);if(l.end>0&&(a<l.start&&(this.result.push(m(m({},this.generateChunk(a,l.start)),{},{marker:{start:a+this.props.leftOffset,end:l.start+this.props.leftOffset}})),a=l.start),this.result.push(m(m({},this.generateChunk(l.start,l.end)),{},{marker:u,attributes:this.getAttributes(u,n),className:u.profile.map((function(e){return n[e.markerIndex]})).join(" ")})),a=l.end),l.end>=this.content.length)break}}catch(e){o.e(e)}finally{o.f()}a<this.content.length&&this.result.push(m(m({},this.generateChunk(a,this.content.length)),{},{marker:{start:a+this.props.leftOffset,end:this.content.length+this.props.leftOffset}}))}else this.result.push(this.generateWholeChunk());return this.result}}],[{key:"safelyMergeRanges",value:function(e){try{var t=c.default.mergeByRangeMap(e);return{types:t.keys,markers:t.result}}catch(e){return null}}}]),e}();t.default=h,(0,l.default)(h,"defaultProps",{markers:[],types:[],isCrlf:!1,idField:"",leftOffset:0,offsetRange:null})},1647:function(e,t,n){"use strict";var r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.ArticleText=C,t.default=function e(t){var n,r=t.stratum,a=t.list;if(!a||!r)return null;function o(n){var r,a=n.index,o=(0,l.default)(n,b),i=a+1,s=k(t)&&!o.child?t.issueRef:"".concat(t.issueRef,".").concat(i),d=!_(t.issueRef||"")&&p.default.hasNumeral(o.content);return c.default.createElement("li",{"data-issueref":t.issueRef&&s,"data-automark":d,"data-searchable":!!t.enableSearch},c.default.createElement(C,{issueRef:s,markNumeral:!_(t.issueRef||"")&&t.markNumeral,marks:t.marks,map:t.map,enableSearch:!!t.enableSearch,lawName:t.lawName,isProPlanUser:t.isProPlanUser,listLength:t.list.length},o.content),!(null===(r=o.child)||void 0===r||!r.list.length)&&c.default.createElement(e,(0,u.default)({},o.child,{issueRef:s,markNumeral:t.markNumeral,marks:t.marks,map:t.map,enableSearch:!!t.enableSearch,lawName:t.lawName,isProPlanUser:t.isProPlanUser,listLength:t.list.length})))}return c.default.createElement("ul",{className:(0,d.default)((n={},(0,i.default)(n,"single-".concat(r),k(t)),(0,i.default)(n,"article-".concat(r),!k(t)),(0,i.default)(n,"no-padding",k(t)&&!t.markNumeral),n))},a.map((function(e,t){return c.default.createElement(o,(0,u.default)({key:t},e,{index:t}))})))};var a,o,u=r(n(232)),l=r(n(58)),i=r(n(7)),c=r(n(0)),s=n(1513),d=r(n(13)),f=n(235),p=r(n(1697)),m=r(n(1635)),h=r(n(1648)),v=r(n(1615)),y=n(1698),g=r(n(343)),b=["index"];function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e){return 1===e.list.length&&"paragraphs"===e.stratum}function _(e){return!(!e||e.includes("."))}function P(e,t){if(e&&t){var n=encodeURIComponent("".concat(e).concat(t));return"/search/judgement/".concat(n)}return""}function j(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function(r){var a=e.isProPlanUser,o=t&&r.marker.start<t.start?t.start:r.marker.start,u=!!(t&&(r.className||"").indexOf(f.LinkMarkerLabel)>-1),l=P(e.lawName,e.issueRef);return n&&u&&a?c.default.createElement(s.Link,{"data-issueref":t.title,className:r.className,"data-offset":o,to:l},r.text):n&&u?c.default.createElement(y.ForIssueChunk,{issueref:t.title,className:r.className,offset:o,text:r.text}):c.default.createElement("span",{className:r.className,"data-offset":o},r.text)}}function S(e){var t;if(!e.children)return null;var n=new p.default(e.children,{makeTable:!1,issueRef:e.issueRef});if(e.map&&e.issueRef){var r=e.map.issuesMap.get(e.issueRef),a=e.markNumeral&&n.numeralOffset&&r?O(O({},e.marks),{},(0,i.default)({},f.LinkMarkerLabel,[g.default.convert(n.calibrateNumeralOffset(r.start))])):e.marks,o=new m.default(e.children,{offsetRange:r&&{start:r.start,end:r.end},leftOffset:r&&r.start}).updateMarks(a);return c.default.createElement(v.default,{renderChunk:j(e,r,!!e.enableSearch),marks:o},e.children)}if(!e.markNumeral||!n.numeralOffset)return c.default.createElement(c.default.Fragment,null,e.children);var u=e.isProPlanUser?c.default.createElement(s.Link,{"data-issueref":e.issueRef,to:P(e.lawName,e.issueRef)},n.getNumeral()):c.default.createElement(y.ForNumeralContent,{issueRef:e.issueRef,text:n.getNumeral()});return c.default.createElement(c.default.Fragment,null,u,c.default.createElement("span",{"data-issueref":e.issueRef,"data-offset":null===(t=n.numeralOffset)||void 0===t?void 0:t.end},n.getText()))}function E(e){var t,n,r=e.isProPlanUser,u=e.listLength,l=2===(null===(t=e.issueRef)||void 0===t||null===(n=t.split("."))||void 0===n?void 0:n.length)&&u&&u>1;return r&&l?c.default.createElement(s.Link,{to:P(e.lawName,e.issueRef),className:"article-manual-index-item"}):l?a||(a=c.default.createElement(y.ForManualIndexItem,null)):o||(o=c.default.createElement(c.default.Fragment,null))}function C(e){var t=new p.default(e.children,e);return t.table?c.default.createElement(c.default.Fragment,null,t.content.map((function(t,n){return"string"==typeof t?c.default.createElement(S,O(O({},e),{},{key:"".concat(e.issueRef,"-").concat(n)}),t):c.default.createElement("div",{key:n,className:"article-inline-table"},c.default.createElement(h.default,{data:t}))}))):c.default.createElement(c.default.Fragment,null,c.default.createElement(E,e),c.default.createElement(S,e))}},1648:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(35)),u=r(n(36)),l=r(n(96)),i=r(n(97)),c=r(n(85)),s=r(n(7)),d=r(n(232)),f=v(n(0)),p=v(n(86)),m=r(n(1615));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function v(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.default)(e);if(t){var a=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,i.default)(this,n)}}function g(e){return e.colspan&&e.rowspan}function b(e){var t=e.colspan,n=e.rowspan,r=e.value,a=e.rowId,o=e.colId,u=e.marks,l=p.extractMarksById(u,a),i=p.extractMarksById(l,o),c={"data-row":a,"data-col":o};return t&&n&&(c.colSpan=t,c.rowSpan=n),f.default.createElement("td",c,f.default.createElement(m.default,{marks:i},r))}function w(e){var t=e.data,n=void 0===t?[]:t,r=e.rowId,a=e.marks,o=n.filter(g).map((function(e,t){return f.default.createElement(b,(0,d.default)({key:"".concat(r,"-").concat(t)},e,{rowId:r,colId:t,marks:a}))}));return f.default.createElement("tr",null,o)}var O=function(e){(0,l.default)(n,e);var t=y(n);function n(){return(0,o.default)(this,n),t.apply(this,arguments)}return(0,u.default)(n,[{key:"render",value:function(){var e=this.props,t=e.data,r=e.marks;if(!t||!t.length)return null;var a=t.map((function(e,t){return f.default.createElement(w,{key:t,rowId:t,data:e,marks:r})}));return f.default.createElement("table",{style:n.tableStyle},f.default.createElement("tbody",null,a))}}]),n}(f.PureComponent);t.default=O,(0,s.default)(O,"defaultProps",{data:[]}),(0,s.default)(O,"tableStyle",{pointerEvents:"initial"})},1649:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(153)),u=r(n(35)),l=r(n(36)),i=r(n(7)),c=r(n(1520)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(1634));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=function(){function e(t){(0,u.default)(this,e),(0,i.default)(this,"startIssue",null),(0,i.default)(this,"endIssue",null),(0,i.default)(this,"startOffset",null),(0,i.default)(this,"endOffset",null),(0,i.default)(this,"crossed",!1),(0,i.default)(this,"hasTitle",!1),this.crossed=e.isArticle(t.commonAncestorContainer),this.hasTitle=e.isSelectedTitle(t.commonAncestorContainer);var n=e.findIssue(t.startContainer,t.commonAncestorContainer);this.startIssue=n,this.startOffset=e.getNearbyOffset(t.startContainer);var r=e.findIssue(t.endContainer,t.commonAncestorContainer);this.endIssue=r,this.endOffset=e.getNearbyOffset(t.endContainer)}return(0,l.default)(e,[{key:"selectedArticles",get:function(){var e,t;return[null===(e=this.startIssue)||void 0===e?void 0:e.split(".")[0],null===(t=this.endIssue)||void 0===t?void 0:t.split(".")[0]]}},{key:"sameArticle",get:function(){var e=(0,o.default)(this.selectedArticles,2),t=e[0],n=e[1];return!!t&&!!n&&t===n}}],[{key:"hasOffsetInfo",value:function(e){return!(!("dataset"in e)||!e.dataset.offset)}},{key:"hasIssueInfo",value:function(e){return!(!("dataset"in e)||!e.dataset.issueref)}},{key:"isArticle",value:function(t){return e.hasIssueInfo(t)&&"article"===t.nodeName.toLocaleLowerCase()&&/i-[\da-z]{24}/.test("id"in t&&t.id||"")}},{key:"isTitle",value:function(e){return!!(e.className&&e.className.indexOf("article-title")>-1||e.className.indexOf("article-number")>-1)}},{key:"isSelectedTitle",value:function(t){var n=s.findAncestor(t,(function(e){return!!("className"in e&&e.className||"id"in e&&e.id)}));return!(!n||!e.isTitle(n))}},{key:"extractOffset",value:function(t){return e.hasOffsetInfo(t)?Number(t.dataset.offset):null}},{key:"extractIssue",value:function(e){return e.dataset.issueref||""}},{key:"getNearbyOffset",value:function(t){var n=s.findAncestor(t,(function(e){return"dataset"in e&&!!e.dataset.offset||"id"in e&&!!e.id}));return n?e.extractOffset(n):null}},{key:"findIssue",value:function(t,n){if(e.hasIssueInfo(t))return e.extractIssue(t);var r=t.parentElement||t.parentNode;return!t.id&&r?3!==n.nodeType&&r===n?e.extractIssue(n):e.findIssue(r,n):""}}]),e}(),h=function(){function e(t,n){var r,a,l=this;(0,u.default)(this,e),this.config=n,(0,i.default)(this,"issueRange",void 0),(0,i.default)(this,"offset",void 0),(0,i.default)(this,"text",""),(0,i.default)(this,"docId",void 0),(0,i.default)(this,"category",""),(0,i.default)(this,"findStartOffsetByIssueRef",(function(e){var t,n,r,a;return null!==(t=null!==(n=null===(r=l.config.lawMap.issuesMap.get(e))||void 0===r?void 0:r.start)&&void 0!==n?n:null===(a=l.config.lawMap.articlesMap.get(e))||void 0===a?void 0:a.start)&&void 0!==t?t:null})),this.config=p(p({},e.defaultOptions),n),this.text=t.toString(),this.issueRange=new m(t);var s,d=null!==(r=this.issueRange.startOffset)&&void 0!==r?r:this.findStartOffsetByIssueRef(this.issueRange.startIssue||"")||0,f=null!==(a=this.issueRange.endOffset)&&void 0!==a?a:this.findStartOffsetByIssueRef(this.issueRange.endIssue||"")||0,h=[this.issueRange.crossed?d:d+t.startOffset,f+t.endOffset].sort((function(e,t){return e-t})),v=(0,o.default)(h,2),y=v[0],g=v[1];(this.offset={start:y,end:g},this.issueRange.sameArticle)&&(this.docId=null===(s=this.config.lawMap.articlesMap.get(this.issueRange.selectedArticles[0]))||void 0===s?void 0:s.article._id);this.config.clearSelection&&(0,c.default)()}return(0,l.default)(e,[{key:"valid",get:function(){var e=this;return!!(this.docId&&!this.issueRange.hasTitle&&this.issueRange.sameArticle&&this.offset.start<this.offset.end&&[this.issueRange.startIssue,this.issueRange.endIssue].map((function(t){return t?e.findStartOffsetByIssueRef(t):null})).every((function(e){return null!==e})))}}]),e}();t.default=h,(0,i.default)(h,"defaultOptions",{clearSelection:!0})},1650:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(35)),u=r(n(36)),l=r(n(331)),i=r(n(96)),c=r(n(97)),s=r(n(85)),d=r(n(7)),f=k(n(0)),p=n(152),m=n(27),h=k(n(333)),v=n(537),y=n(332),g=n(1606),b=r(n(128)),w=n(535);function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(O=function(e){return e?n:t})(e)}function k(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=O(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}var P={document:{anonymous:{title:"還沒有Lawsnote帳號嗎？\n免費註冊，\n瀏覽所有法學資料。",body:""},user:{title:"哇...這個月已經瀏覽了100筆資料，辛苦了！",body:"您這個月瀏覽的資料筆數已經超過 Lawsnote 提供予入門版會員的上限，每月NT$ 666 成為專業版會員，即可立即瀏覽此篇資料，且無上限瀏覽各種法學資料。"}},search:{anonymous:{title:"還沒有Lawsnote帳號嗎？\n免費註冊，\n瀏覽所有搜尋結果。",body:""},user:{title:"哇...這個月已經搜尋了40次資料，辛苦了！",body:"您這個月搜尋的次數已經超過 Lawsnote 提供予入門版會員的上限，每月NT$ 666 成為專業版會員，即可立即享有無上限搜尋次數。"}}},j=function(e){(0,i.default)(n,e);var t=_(n);function n(e){var r;return(0,o.default)(this,n),r=t.call(this,e),(0,d.default)((0,l.default)(r),"onBuy",(function(){(0,g.orderAction)(r.props,r.props.dispatch,h.GO_PAYMENT_THRU_PAGEVIEW_LIMITATION)})),(0,d.default)((0,l.default)(r),"onSignUp",(function(){r.props.dispatch((0,y.toggleSignInMode)(!1)),r.props.dispatch((0,y.toggleSignInModal)(!0))})),(0,d.default)((0,l.default)(r),"onSignIn",(function(){return r.props.dispatch((0,y.toggleSignInMode)(!0)),r.props.dispatch((0,y.toggleSignInModal)(!0)),!1})),r.state={},r}return(0,u.default)(n,[{key:"componentDidMount",value:function(){this.props.isSignedIn&&this.props.dispatch((0,v.requestPaymentHistory)())}},{key:"componentDidUpdate",value:function(e){!e.isSignedIn&&this.props.isSignedIn&&this.props.dispatch((0,v.requestPaymentHistory)())}},{key:"componentWillUnmount",value:function(){n.freezeRoot(!1)}},{key:"show",get:function(){return this.props.viewLimit&&!this.props.isVisible}},{key:"HintContentForAnonymous",get:function(){var e=P[this.props.mode].anonymous.title;return f.default.createElement("section",{className:"document__hint_content flex-box-vertical flex-cx-center"},f.default.createElement("h1",{className:"anonymous"},e),f.default.createElement("button",{className:"action-button medium",onClick:this.onSignUp},"立即註冊"),f.default.createElement("h3",null,"已經註冊過了嗎？",f.default.createElement("a",{href:"#",onClick:this.onSignIn},"登入")))}},{key:"HintContentForUser",get:function(){var e=P[this.props.mode].user,t=e.title,n=e.body;return f.default.createElement("section",{className:"document__hint_content flex-box-vertical flex-cx-center"},f.default.createElement("h1",{className:"hide-in-mobile"},t),f.default.createElement("h2",null,n),f.default.createElement("button",{className:"action-button medium",onClick:this.onBuy},"立即升級"),f.default.createElement("h3",null,"事務所、企業使用嗎？請",f.default.createElement("a",{href:b.default.CONTACT_US_FORM,target:"_blank",rel:"noopener noreferrer"},"聯絡我們")))}},{key:"render",value:function(){return this.show?f.default.createElement("div",{className:"document__hint_section"},this.props.isSignedIn?this.HintContentForUser:this.HintContentForAnonymous):null}}],[{key:"freezeRoot",value:function(e){(0,w.universalRequestAnimation)((function(){var t="frozen",n=document.getElementById("root");n&&(e?n.classList.add(t):n.classList.remove(t))}))}},{key:"getDerivedStateFromProps",value:function(e){return n.freezeRoot(e.viewLimit),null}}]),n}(f.Component);(0,d.default)(j,"defaultProps",{mode:"document"});var S=(0,m.withRouter)((0,p.connect)((function(e){return{isSignedIn:!!e.auth.user.isSignedIn,isVisible:e.AccountReducer.isVisible,paymentProfile:e.auth.user.paymentProfile}}))(j));t.default=S},1651:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,u=r(n(35)),l=r(n(36)),i=r(n(331)),c=r(n(96)),s=r(n(97)),d=r(n(85)),f=r(n(7)),p=y(n(0)),m=(r(n(6)),r(n(1518))),h=y(n(1603));function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function y(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var b=function(e){(0,c.default)(n,e);var t=g(n);function n(){var e;(0,u.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,f.default)((0,i.default)(e),"onClick",(function(t){switch(e.props.required){case"login":h.loginRequired(t);break;case"proplan":h.proPlanRequired(t,e.props.featureName)}})),e}return(0,l.default)(n,[{key:"Button",get:function(){return p.default.createElement("button",{className:"locked-button",onClick:this.onClick},o||(o=p.default.createElement("i",{className:"ant ant-lock icon"})),this.props.children)}},{key:"ButtonWTooltip",get:function(){return p.default.createElement(m.default,{placement:"bottom",overlay:this.props.tooltip},this.Button)}},{key:"render",value:function(){return p.default.createElement("div",{className:this.props.className},this.props.tooltip?this.ButtonWTooltip:this.Button)}}]),n}(p.PureComponent);t.default=b,(0,f.default)(b,"defaultProps",{required:"login"})},1652:function(e,t,n){"use strict";var r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,o=r(n(232)),u=r(n(0)),l=r(n(1647));function i(e){return u.default.createElement("div",{style:{marginTop:"5px"}},u.default.createElement("a",{href:e.url,target:"_blank",rel:"noopener noreferrer"},e.filename))}function c(e){var t,n=e.content,r=e.marks,c=e.reason,s=e.map,d=e.markNumeral,f=e.issueRef,p=e.isProPlanUser,m=e.lawName,h=function(e){return!(!e||!e.stratum)}(n)?u.default.createElement(l.default,{issueRef:f,marks:r,map:s,stratum:n.stratum,list:n.list,markNumeral:d,isProPlanUser:p,lawName:m}):null!=n?n:null;return u.default.createElement("div",{className:"article-content"},h,function(e){return!(!e||"string"!=typeof e||!e.length)}(c)&&u.default.createElement("div",{className:"article-reason"},a||(a=u.default.createElement("div",null,"理由")),u.default.createElement("div",null,c),null===(t=e.attachments)||void 0===t?void 0:t.map((function(e,t){return u.default.createElement(i,(0,o.default)({key:t},e))}))))}var s=u.default.memo(c);t.default=s},1653:function(e,t,n){"use strict";var r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Scrollchor",{enumerable:!0,get:function(){return a.default}});var a=r(n(1705))},1654:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){(0,a.gracefulDomOperation)((function(){var u=e&&document.getElementById(e)||document.body;"scrollBehavior"in document.documentElement.style?function(e){try{e.scrollIntoView({behavior:"smooth"})}catch(t){e.scrollIntoView(!0)}}(u):function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=n.offset,l=void 0===u?0:u,i=n.duration,c=void 0===i?400:i,s=n.easing,d=void 0===s?o:s,f=t.scrollTop,p=(0,r.getOffsetTop)(e,t)+l,m=p-f,h=1e3/60;function v(e){var n=e+h,r=d(0,n,f,m,c);(0,a.safelyScrollY)(t,r),n<c&&setTimeout((function(){return v(n)}),h)}v(0)}(u,(0,r.getRefElementId)(t),n)}))};var r=n(1706),a=n(535);function o(e,t,n,r,a){var o=t/a;return-r*o*(o-2)+n}},1655:function(e,t,n){"use strict";var r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.DisabledPrecedentIcon=g,t.OriginalPrecedentIcon=b,t.PrecedentSection=void 0;var a,o,u,l,i,c,s=r(n(7)),d=r(n(0)),f=r(n(13)),p=r(n(1656)),m=r(n(1615));function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,s.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e){var t=e.text,n=(0,f.default)("inline-block precedent-tag-icon",{slim:!!e.slim});return d.default.createElement("i",{className:n},t)}function g(e){return y(v(v({},e),{},{text:"停止適用判例"}))}function b(e){return y(v(v({},e),{},{text:"原判例"}))}function w(e){var t;return t=e.disabled?a||(a=d.default.createElement(g,null)):d.default.createElement(d.default.Fragment,null,e.diamond&&(o||(o=d.default.createElement(p.default,null))),d.default.createElement("span",{className:"judgement-valuable__content"},e.title),e.original&&(u||(u=d.default.createElement(b,null)))),d.default.createElement("h2",{className:"title judgement-valuable__title"},t)}function O(e){var t;return!(null==e||null===(t=e.deprecatedPrecedent)||void 0===t||!t.summary)}function k(e){var t;return!(null==e||null===(t=e.precedent)||void 0===t||!t.summary)}function _(e){var t;return!(null==e||null===(t=e.valuableRef)||void 0===t||!t.summary)}function P(e){return!O(e)&&k(e)}function j(e){return!(null==e||!e.grandChamber)}function S(e){return k(e)||_(e)||j(e)}var E={precedent:{detector:k,processor:function(e){var t=e.precedent;return{title:"精選裁判",contentJsx:d.default.createElement(m.default,{marks:t.summaryMarks},t.summary)}}},deprecatedPrecedent:{detector:O,processor:function(e){var t=e.deprecatedPrecedent;return{title:"",contentJsx:d.default.createElement(m.default,{marks:t.summaryMarks},t.summary)}}},valuableRef:{detector:_,processor:function(e){var t,n=e.court,r=e.valuableRef;return{title:(t=n,t.includes("最高法院")?"最高法院具參考價值裁判":"高院暨所屬法院具參考價值裁判或足資討論裁判"),contentJsx:d.default.createElement(m.default,{marks:r.summaryMarks},r.summary)}}},selected:{detector:function(e){var t;return!(null==e||null===(t=e.selected)||void 0===t||!t.summary)},processor:function(e){var t=e.selected,n=e.court;return{title:"".concat(n,"裁判"),contentJsx:d.default.createElement(m.default,{marks:t.summaryMarks},t.summary)}}},grandChamber:{detector:j,processor:function(e){return{title:"大法庭裁判",contentJsx:[]}}}};function C(e){for(var t=[],n=[],r=0,a=Object.keys(E);r<a.length;r++){var o=a[r],u=E[o];if(u.detector(e.content)){var s=u.processor(v(v({},e.content),{},{court:e.court})),f=s.title,p=s.contentJsx;"deprecatedPrecedent"===o&&(t.length=0,n.length=0),f&&t.push(f),p&&n.push(d.default.createElement("div",{key:o,className:"document__summary"},l||(l=d.default.createElement("div",null,"要旨：")),d.default.createElement("div",{className:"markerarea-".concat(o)},p)))}}return n.length||t.length?d.default.createElement("section",{className:"document__section judgement-valuable__container"},d.default.createElement(w,{disabled:O(e.content),original:P(e.content),diamond:S(e.content),title:t.join("、")}),i||(i=d.default.createElement("hr",{className:"document__divider close-top medium"})),!!n.length&&d.default.createElement(d.default.Fragment,null,n,c||(c=d.default.createElement("hr",{className:"document__divider medium"})))):null}var I=d.default.memo(C);t.PrecedentSection=I},1656:function(e,t,n){"use strict";var r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.hoverMessage?function(e){var t=o.default.createElement(l.default,{id:"tooltip",bsClass:"hint",className:"hide-in-mobile hide-in-tablet hidden-print"},e.hoverMessage);return o.default.createElement(u.default,{placement:"right",overlay:t},i())}(e):i()};var a,o=r(n(0)),u=r(n(1518)),l=r(n(1517));function i(){return a||(a=o.default.createElement("img",{className:"precedent valuable-icon",src:"/diamond.svg",role:"presentation"}))}},1657:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,u=r(n(35)),l=r(n(36)),i=r(n(331)),c=r(n(96)),s=r(n(97)),d=r(n(85)),f=r(n(7)),p=w(n(0)),m=r(n(1522)),h=r(n(1526)),v=w(n(1658)),y=r(n(1715)),g=r(n(1659));function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}function w(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function k(e){return.01*e}var _=function(e){(0,c.default)(n,e);var t=O(n);function n(e){var r;return(0,u.default)(this,n),r=t.call(this,e),(0,f.default)((0,i.default)(r),"throttleResize",void 0),(0,f.default)((0,i.default)(r),"resetOneVwUnit",(function(){var e={vwUnit:k(window.innerWidth),screenWidth:window.innerWidth};e.screenWidth!==r.state.screenWidth&&v.shouldRedrawBoxSize(r.state,e)&&r.setState(e)})),r.state={vwUnit:k(window.innerWidth),screenWidth:window.innerWidth},r.throttleResize=(0,h.default)(r.resetOneVwUnit,100),r}return(0,l.default)(n,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.throttleResize)}},{key:"shouldComponentUpdate",value:function(e,t){return!(!this.props.show&&!e.show)&&(!(0,m.default)(this.props.markers,e.markers)||(this.props.content!==e.content||this.state.vwUnit!==t.vwUnit))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.throttleResize)}},{key:"isPDF",get:function(){return"application/pdf"===this.props.fileType}},{key:"isHTML",get:function(){return"string"==typeof this.props.content&&/^<a[^>]*>(?:[^<]+)<\/a>/.test(this.props.content)}},{key:"disabledMarkerStyle",get:function(){return this.props.className.replace("markerarea-main","")}},{key:"render",value:function(){switch(!0){case!this.props.show:return null;case this.isPDF:return p.default.createElement(p.default.Fragment,null,p.default.createElement("div",{key:"desc",className:this.disabledMarkerStyle},"您可於下方瀏覽裁判內容，並按此",p.default.createElement("a",{href:this.props.fileUrl},"下載檔案"),"。",o||(o=p.default.createElement("br",null)),"如有列印需求，亦請您點選上方「下載檔案」後再行列印。"),p.default.createElement(y.default,{key:"pdf",fileUrl:this.props.fileUrl}));case this.isHTML:return p.default.createElement("div",{className:this.disabledMarkerStyle,dangerouslySetInnerHTML:{__html:this.props.content}});default:var e=v.getBaseComputedStyle(this.props.className,["fontSize","lineHeight"]),t={fontSize:e.fontSize,lineHeight:e.lineHeight};return p.default.createElement(g.default,{"data-perf":!0,className:this.props.className,show:this.props.show,content:this.props.content,marks:this.props.markers,baseLine:t,idField:"opinion"})}}}]),n}(p.Component);t.default=_},1658:function(e,t,n){"use strict";var r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.getBaseComputedStyle=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=document.createElement("div"),r=document.createTextNode("國");n.appendChild(r),n.id="baseComputedDom",e.split(" ").forEach((function(e){n.classList.add(e)}));var a={};document.body.appendChild(n);var o=window.getComputedStyle(n);if(Array.isArray(t)&&t.length>0)t.forEach((function(e){a[e]=o[e]}));else try{a=JSON.parse(JSON.stringify(o))}catch(e){}return document.body.removeChild(n),a},t.getBoxSize=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t.lineHeight)return{};var n=t.lineHeight,r=s(e).length,a=Math.floor(c(n));return{height:"".concat(r*a,"px")}},t.getChunksSets=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(!e||!t)return[];var n=e%t;return Array(0===n?e/t:(e+(t-n))/t).fill(0).map((function(n,r){return[t*r,t*(r+1)>=e?e:t*(r+1)]}))},t.getExactlyLineWith=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e&&t&&Array.isArray(t)&&0!==t.length?e.substring(t[0],t[1]).trim().length:null},t.getExactlyMaxLineWidth=function(e,t){if(!e||!t||0===t.length)return 0;var n=0;return t.filter((function(e){return Number.isNaN(Number(e))})).forEach((function(t){var r=(0,a.default)(t,2),o=r[0],u=r[1],l=e.substring(o,u).trim(),i=l.length;(i-=/[\u0000-\u245F\uFF65-\uFFDC]/.test(l)?l.match(/[\u0000-\u245F\uFF65-\uFFDC]/g).length/2:0)>n&&(n=i)})),n},t.getMaxLineWidth=function(e){return 0===e.length?0:e.reduce((function(e,t){var n=t[1]-t[0];return n>0&&n>e?n:e}),0)||0},t.getNewlineRanges=s,t.shouldEnablePerfMode=function(e){return e>i},t.shouldRedrawBoxSize=function(e,t){if(e.screenWidth>=o&&t.screenWidth>=o)return!1;var n=function(e,t){return Number(e.toFixed(t))},r=n(e.vwUnit*u,1),a=n(t.vwUnit*u,1),i=a>l?l:a,c=Math.abs(r-i)>=1;return r!==i&&c},t.toNumber=c;var a=r(n(153)),o=800,u=2.5,l=16,i=0;function c(e){return"number"==typeof e?e:"string"!=typeof e?NaN:Number.isNaN(Number(e))?/\d+(?:\.\d+)?/.test(e)?Number(e.match(/\d+(?:\.\d+)?/)[0]):NaN:Number(e)}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!e)return[];for(var t=[],n=/\r?\n/g,r=0,a=n.exec(e);a;)t.push([r,a.index]),r=a.index,a=n.exec(e);return e.length!==r&&t.push([r,e.length]),t}},1659:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(58)),u=r(n(232)),l=r(n(46)),i=r(n(2)),c=r(n(35)),s=r(n(36)),d=r(n(331)),f=r(n(96)),p=r(n(97)),m=r(n(85)),h=r(n(7)),v=r(n(0)),y=n(235),g=S(n(86)),b=S(n(1658)),w=r(n(1648)),O=r(n(1615)),k=r(n(1635)),_=["className"],P=["show","marks","idField","baseLine","content"];function j(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(j=function(e){return e?n:t})(e)}function S(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=j(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,h.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,m.default)(e);if(t){var a=(0,m.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,p.default)(this,n)}}function R(e,t){return 0===t.length?e:e.replace(/\b(\w+)="[^"]+"/g,(function(e,n){return t.includes(n)?"":e}))}var T=function(e){(0,f.default)(n,e);var t=I(n);function n(){var e;(0,c.default)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a)),(0,h.default)((0,d.default)(e),"disableMarkerareaStyle",(function(){var t=e.props.className;return(void 0===t?"":t).split(" ").filter((function(e){return!e.startsWith(y.MarkerAreaPrefix)})).join(" ")})),(0,h.default)((0,d.default)(e),"getBoxStyle",(function(t){return e.props.baseLine&&"string"==typeof t?C(C({},e.getBoxSize(t)),{},{lineHeight:e.props.baseLine.lineHeight}):{}})),(0,h.default)((0,d.default)(e),"getBoxSize",(function(t){return b.getBoxSize(t,e.props.baseLine,{lineWidth:100,exactlyWidth:!0})})),(0,h.default)((0,d.default)(e),"produceStringContent",(function(t,n,r){var a=g.extractMarksById(n,r),o=v.default.createElement("div",{key:"p".concat(r),"data-para":r});if(/^<[^>]+>/.test(t)){return v.default.cloneElement(o,{"data-nograffiti":!0,dangerouslySetInnerHTML:{__html:R(t,["id","class","contenteditable","ref"])}})}if(t){var u=new k.default(t,{idField:e.props.idField}).updateMarks(a);return v.default.cloneElement(o,{"data-graffiti-error":u.error},v.default.createElement(O.default,{baseLine:e.props.baseLine,marks:u},t))}return o})),(0,h.default)((0,d.default)(e),"produceObjectContent",(function(e,t,n){var r,a=g.extractMarksById(t,n),o=v.default.createElement("div",{key:"p".concat(n),"data-para":n});if(r=e,Array.isArray(r))return v.default.cloneElement(o,{"data-nograffiti":!0},v.default.createElement(w.default,{data:e,marks:a}));if(function(e){return"table"===e.type}(e))return v.default.cloneElement(o,{"data-nograffiti":!0},v.default.createElement(w.default,{data:e.content,marks:a}));if(function(e){return"img"===e.type}(e)&&e.content.src){var u=e.content.src;return v.default.cloneElement(o,{"data-nograffiti":!0},v.default.createElement("img",{src:u}))}return o})),(0,h.default)((0,d.default)(e),"produceContentItem",(function(t,n,r){switch((0,i.default)(t)){case"string":return e.produceStringContent(t,n,r);case"object":return e.produceObjectContent(t,n,r);default:return v.default.createElement("div",{key:"p".concat(r),"data-para":r})}})),(0,h.default)((0,d.default)(e),"getStructuredContent",(function(){var t,n=!1,r=(t=[]).concat.apply(t,(0,l.default)(e.arrayContent.map((function(t,r){var a=e.produceContentItem(t,e.props.marks,r);return a.props["data-graffiti-error"]&&(n=!0),a})))),a=n&&e.disableMarkerareaStyle()||e.props.className;return v.default.createElement("div",(0,u.default)({},e.wrapperProps,{className:a,"data-lines":!0}),r)})),(0,h.default)((0,d.default)(e),"getPureContent",(function(){var t=new k.default(e.props.content,{idField:e.props.idField}).updateMarks(e.props.marks),n=e.getBoxStyle(e.props.content),r=e.wrapperProps,a=r.className,l=void 0===a?"":a,i=(0,o.default)(r,_),c=t.error&&e.disableMarkerareaStyle()||l;return v.default.createElement("div",(0,u.default)({},i,{style:n,className:c}),v.default.createElement(O.default,{baseLine:e.props.baseLine,marks:t},e.props.content))})),(0,h.default)((0,d.default)(e),"getDocumentContent",(function(){return"string"==typeof e.props.content?e.getPureContent():e.getStructuredContent()})),e}return(0,s.default)(n,[{key:"arrayContent",get:function(){return"string"==typeof this.props.content?[].concat(this.props.content):this.props.content}},{key:"wrapperProps",get:function(){var e=this.props;e.show,e.marks,e.idField,e.baseLine,e.content;return(0,o.default)(e,P)}},{key:"render",value:function(){return this.props.show?this.getDocumentContent():null}}]),n}(v.default.Component);t.default=T},1660:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,u=r(n(232)),l=r(n(35)),i=r(n(36)),c=r(n(96)),s=r(n(97)),d=r(n(85)),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(0)),p=r(n(13)),m=n(152),h=n(1513),v=r(n(548)),y=r(n(20));function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function w(e){return f.default.createElement("li",{key:e.court},f.default.createElement(h.Link,{id:e.court,to:"/search/judgement/".concat(encodeURI(e.keyword)),onClick:e.onClick},e.court,"（",e.count,"）"))}var O=f.default.memo(w),k=function(e){(0,c.default)(n,e);var t=b(n);function n(){return(0,l.default)(this,n),t.apply(this,arguments)}return(0,i.default)(n,[{key:"onClickDistribution",value:function(e){y.default.logCourtSearch(e.currentTarget.id)}},{key:"onToggleList",value:function(e,t,n){var r=n.source;e&&"click"===r&&y.default.logCourtDist()}},{key:"render",value:function(){var e=this;if(!this.props.show)return null;var t=(0,p.default)(this.props.className,{"result-court":!this.props.className});return f.default.createElement(v.default,{id:"court-count",className:t,onToggle:this.onToggleList},o||(o=f.default.createElement(v.default.Toggle,{bsStyle:"link"},"裁判分佈")),f.default.createElement(v.default.Menu,null,this.props.countsByCourt.map((function(t){return f.default.createElement(O,(0,u.default)({key:t.court},t,{onClick:e.onClickDistribution}))}))))}}]),n}(f.PureComponent),_=(0,m.connect)((function(e){var t;return{countsByCourt:(null===(t=e.SearchReducer.searchResult)||void 0===t?void 0:t.countsByCourt)||[]}}))(k);t.default=_},1661:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,u=r(n(232)),l=r(n(35)),i=r(n(36)),c=r(n(331)),s=r(n(96)),d=r(n(97)),f=r(n(85)),p=r(n(7)),m=y(n(0)),h=(r(n(6)),y(n(128)));function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function y(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,d.default)(this,n)}}var b="/user.svg";function w(e){var t=function(e,t){for(var n,r=[],a=0;a<t.length;a+=1){var o=t[a];if(o){var u=e[a],l=n||(n=m.default.createElement(m.default.Fragment,{key:u},m.default.createElement("dt",null,u,"："),m.default.createElement("dd",null,o)));r.push(l)}}return r}(["擅長案件","現任公司","諮詢費用","委任費用"],[e.expertises.join("、"),e.lawFirm,e.consultingFee,e.lawyerFee]),n="".concat(h.LINK_LAWYER_PROFILE,"/").concat(e._id);return m.default.createElement(m.default.Fragment,null,m.default.createElement("div",{className:"lawyerInfo__header"},m.default.createElement("div",{className:"column"},m.default.createElement("div",{className:"lawyerInfo__name"},e.name,m.default.createElement("span",{className:"small"},e.occupation||"律師")),m.default.createElement("span",{className:"lawyerInfo__license small"},e.licenseNo)),m.default.createElement("div",{className:"lawyerInfo__img column"},m.default.createElement("img",{src:e.portraitLink||b,alt:e.name})),m.default.createElement("div",{className:"hide-in-desktop lawyerInfo__more"},m.default.createElement("a",{href:n,target:"_blank",rel:"noopener noreferrer"},"瀏覽完整介紹"))),m.default.createElement("div",{className:"hide-in-mobile hide-in-tablet lawyerInfo__body"},m.default.createElement("div",{className:"lawyerInfo__detail"},m.default.createElement("dl",{className:"lawyerInfo__info"},t)),m.default.createElement("div",{className:"lawyerInfo__more"},m.default.createElement("a",{href:n,target:"_blank",rel:"noopener noreferrer"},"瀏覽完整介紹"))))}var O=m.default.memo(w),k=function(e){(0,s.default)(n,e);var t=g(n);function n(){var e;(0,l.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,p.default)((0,c.default)(e),"onClickCandidate",(function(t){"function"==typeof e.props.onClickCandidate&&e.props.onClickCandidate(t)})),(0,p.default)((0,c.default)(e),"renderCandidates",(function(){if(0===e.props.lawyers.length)return null;for(var t=[],n=function(n){if(n!==e.props.displayId){var r=e.props.lawyers[n],a=m.default.createElement("figure",{key:r._id,className:"cursor-pointer lawyerInfo__candidate",onClick:function(){return e.onClickCandidate(n)},role:"presentation"},m.default.createElement("img",{src:r.portraitLink||b}),m.default.createElement("figcaption",null,r.name));t.push(a)}},r=0;r<e.props.lawyers.length;r+=1)n(r);return 0===t.length?null:m.default.createElement("div",{className:"lawyerInfo__candidates"},t)})),e}return(0,i.default)(n,[{key:"render",value:function(){if(!this.props.show)return null;var e=this.props.lawyers[this.props.displayId];return m.default.createElement("section",{className:"hide-in-mobile hide-in-tablet lawyerInfo__container"},m.default.createElement(O,(0,u.default)({onClickDetail:this.props.onClickDetail},e)),m.default.createElement("div",{className:"lawyerInfo__footer"},o||(o=m.default.createElement("hr",null)),this.renderCandidates()))}}]),n}(m.PureComponent);t.default=k,(0,p.default)(k,"Profile",O),(0,p.default)(k,"defaultProps",{show:!0,displayId:0,lawyers:[]})},1662:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.ActiveCourseKeyCtx=void 0,t.default=function(e){var t=(0,m.useState)(!1),n=(0,f.default)(t,2),r=n[0],a=n[1],o=(0,m.useCallback)((function(){a(!r)}),[r]),u=(0,m.useCallback)((function(){window.open(e.link,"_blank")}),[e.link]),l=(0,m.useMemo)((function(){var t;return null!==(t=e.transcript)&&void 0!==t&&t.length?m.default.createElement("p",{dangerouslySetInnerHTML:{__html:e.transcript}}):r&&e.lineClamp>0?m.default.createElement("p",null,e.description):m.default.createElement(w,{lineClamp:e.lineClamp},e.description)}),[e.transcript,e.lineClamp,r,e.description]);return(0,m.useEffect)((function(){a(!1)}),[(0,m.useContext)(b)]),m.default.createElement(O,{minHeight:e.minHeight},m.default.createElement(v.default,{name:e.name,lecturers:e.lecturers,totalLessons:e.totalLessons,thumbnail:e.thumbnail}),m.default.createElement("section",{onClickCapture:e.onClickNav},l,r&&m.default.createElement(m.default.Fragment,null,m.default.createElement("div",null,d||(d=m.default.createElement("h5",null,"課程單元")),m.default.createElement("ol",null,(e.lessons||[]).map((function(e,t){return m.default.createElement("li",{key:e+t},e)})))),m.default.createElement("button",{"data-trigger":"go-to",onClick:function(){return u()}},"下載APP，開始上課")),m.default.createElement("nav",null,e.poweredBy,m.default.createElement(k,{showMore:r,"data-trigger":r?"show-less":"show-more",onClick:function(){return o()}},r?"查看較少內容":"查看更多"))))};var o,u,l,i,c,s,d,f=r(n(153)),p=r(n(1515)),m=g(n(0)),h=g(n(1516)),v=r(n(1663));function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}function g(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}var b=m.default.createContext(0);t.ActiveCourseKeyCtx=b;var w=h.default.p(o||(o=(0,p.default)(["\n  ","\n  -webkit-box-orient: vertical;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  display: -webkit-box;\n  display: -moz-box;\n  display: -ms-box;\n  display: box;\n"])),(function(e){return(0,h.css)(u||(u=(0,p.default)(["\n    -webkit-line-clamp: ",";\n    -ms-line-clamp: ",";\n    -o-line-clamp: ",";\n    line-clamp: ",";\n  "])),e.lineClamp,e.lineClamp,e.lineClamp,e.lineClamp)})),O=h.default.article(l||(l=(0,p.default)(["\n  width: 380px;\n  border: 1px solid #ddd;\n  font-size: 16px;\n\n  ","\n\n  h5 {\n    margin: 0;\n    font-weight: 700;\n  }\n\n  section {\n    color: #313131;\n    padding: 10px 16px;\n  }\n\n  ol {\n    padding: 0;\n    margin: 0;\n    list-style-position: inside;\n    font-size: 14px;\n    padding-bottom: 24px;\n    padding-top: 5px;\n\n    li:not(:first-child) {\n      padding-top: 8px;\n    }\n  }\n\n  p {\n    text-align: justify;\n    margin-bottom: 20px;\n\n    span {\n      color: red;\n    }\n  }\n\n  nav {\n    display: flex;\n    font-size: 13px;\n    color: #6d7278;\n  }\n\n  button {\n    font-size: 14px;\n    border: 0;\n    padding: 6px 0;\n    border-radius: 4px;\n    background-color: #213f67;\n    color: white;\n    width: 100%;\n    margin-bottom: 30px;\n\n    &:hover {\n      background-color: #13253e;\n    }\n  }\n"])),(function(e){return e.minHeight&&(0,h.css)(i||(i=(0,p.default)(["\n      min-height: ",";\n    "])),e.minHeight)})),k=h.default.span(c||(c=(0,p.default)(["\n  cursor: pointer;\n  ","\n"])),(function(e){return!e.showMore&&(0,h.css)(s||(s=(0,p.default)(["\n      color: #4a90e2;\n    "])))}))},1663:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=function(e){if(e.length<=2)return e.join("、");var t=e.slice(0,2).join("、");return t+="...",t}(e.lecturers||[]);return i.default.createElement(d,{rounded:e.rounded},i.default.createElement("img",{title:"Lawsnote 學院課程 - ".concat(e.name),src:e.thumbnail}),i.default.createElement("figcaption",null,i.default.createElement("h4",null,e.name),i.default.createElement("ul",null,i.default.createElement("li",null,"講師：",t),i.default.createElement("li",null,"課程數：",e.totalLessons,"堂"))))};var o,u,l=r(n(1515)),i=r(n(0)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(1516));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}var d=c.default.figure(o||(o=(0,l.default)(["\n  font-size: 16px;\n  display: flex;\n  margin: 0;\n  background: #213f67;\n  color: white;\n  padding: 13px 16px;\n\n  ","\n\n  h4 {\n    margin: 0;\n  }\n\n  ul {\n    margin: 0;\n    padding: 0;\n    list-style: none;\n    display: flex;\n\n    li:not(:first-child) {\n      padding-left: 16px;\n    }\n  }\n\n  figcaption {\n    display: flex;\n    padding-left: 15px;\n    flex-direction: column;\n    justify-content: space-between;\n    align-items: flex-start;\n    font-size: 12px;\n  }\n\n  img {\n    width: 50px;\n    height: 50px;\n  }\n"])),(function(e){return!!e.rounded&&(0,c.css)(u||(u=(0,l.default)(["\n      border-radius: 4px;\n    "])))}))},1685:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,u,l,i,c=r(n(35)),s=r(n(36)),d=r(n(331)),f=r(n(96)),p=r(n(97)),m=r(n(85)),h=r(n(7)),v=r(n(1514)),y=r(n(0)),g=n(152),b=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=C(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(21)),w=r(n(1686)),O=r(n(1613)),k=r(n(1610)),_=n(127),P=r(n(534)),j=r(n(20)),S=n(1602),E=n(1694);function C(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(C=function(e){return e?n:t})(e)}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,m.default)(e);if(t){var a=(0,m.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,p.default)(this,n)}}var R=(o=S.FeaturesLock.FreeFeature,u=function(e){(0,f.default)(n,e);var t=I(n);function n(){var e;(0,c.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,h.default)((0,d.default)(e),"category","law"),(0,h.default)((0,d.default)(e),"onLawSectionClick",(function(t){t.target.blur(),e.props.toggleLawSection(!0,e.lawId,e.lawName)})),(0,h.default)((0,d.default)(e),"handleTextSelected",(function(t){j.default.logLawSelectText(e.lawId,t)})),(0,h.default)((0,d.default)(e),"handleTextCopied",(function(t){j.default.logLawCopyText(e.lawName,String(t))})),e}return(0,s.default)(n,[{key:"lawName",get:function(){var e;return null===(e=this.props.lawObj)||void 0===e?void 0:e.law_name}},{key:"lawDbId",get:function(){var e;return null===(e=this.props.lawObj)||void 0===e?void 0:e._id}},{key:"lawId",get:function(){var e;return null===(e=this.props.lawObj)||void 0===e?void 0:e.law_id}},{key:"showLawSectionButton",get:function(){return e=this.props.lawObj&&this.props.lawObj.law_content,Array.isArray(e)&&e.some((function(e){return!!e.toc_name}));var e}},{key:"abolishFlag",get:function(){var e;return(null===(e=this.props.lawObj)||void 0===e?void 0:e.law_abolish_comment)&&"（廢）"}},{key:"obsoleteLawFlag",get:function(){return!this.isActiveLaw&&(l||(l=y.default.createElement("span",{className:"law-version__outdated"},"非現行法")))}},{key:"isActiveLaw",get:function(){var e,t,n=(null===(e=this.props.lawObj)||void 0===e?void 0:e.law_histories[0]._id)||"";return(null===(t=this.props.lawObj)||void 0===t?void 0:t._id)===n}},{key:"pageStatus",get:function(){return{download:this.props.downloadStatus[this.category]===b.STATUS_LOADING?"downloading":"download"}}},{key:"PageWidgets",get:function(){return[this.pageStatus.download,"pure-print"]}},{key:"onChangeLawVersion",value:function(e){var t,n;null!==(t=this.props.lawObj)&&void 0!==t&&t.law_id&&this.props.dispatch((0,_.viewVersionedLaw)(null===(n=this.props.lawObj)||void 0===n?void 0:n.law_id,e))}},{key:"render",value:function(){var e,t,n,r;if(!this.props.lawObj)return null;var a=((null===(e=this.props.lawObj)||void 0===e?void 0:e.law_histories)||[]).length>1;return y.default.createElement("div",{className:"law-view",id:this.lawDbId},y.default.createElement(k.default,{triggerOrigin:"".concat(this.category," View"),className:"law-profile-section",onTextSelected:this.handleTextSelected,onTextCopied:this.handleTextCopied},y.default.createElement("h1",{className:"title law-name"},y.default.createElement("div",{className:"valign-center"},this.lawName,this.abolishFlag),y.default.createElement(w.default,{lawId:this.lawId,lawName:this.lawName})),y.default.createElement("time",{className:"flex-box flex-center-vertical law-misc",dateTime:this.props.lawObj.law_last_modify},a?y.default.createElement(y.default.Fragment,null,i||(i=y.default.createElement("span",null,"修正日期：")),y.default.createElement(E.VersionsDropdown,{lawId:null===(t=this.props.lawObj)||void 0===t?void 0:t._id,onChange:this.onChangeLawVersion,histories:(null===(n=this.props.lawObj)||void 0===n?void 0:n.law_histories)||[]}),this.obsoleteLawFlag):(null===(r=this.props.lawObj)||void 0===r?void 0:r.law_last_modify)&&"修訂日期 ".concat(P.default.getChineseDate(this.props.lawObj.law_last_modify))),y.default.createElement(O.default,{className:"document__toolbar hidden-print",gaCategory:this.category,docId:this.lawId,versionId:this.lawDbId,docTitle:this.lawName,docCategory:this.category,displayWidgets:this.PageWidgets},this.showLawSectionButton&&y.default.createElement(O.default.ToolbarButton,{label:"法規選單",icon:"ant-list-bullet",onClick:this.onLawSectionClick,name:"lawsection"}))),!this.props.lawObj.viewLimit&&this.props.children,y.default.createElement("div",{className:"hide-in-desktop",id:"".concat(this.lawDbId,"--check")}))}}]),n}(y.default.Component),(0,v.default)(u.prototype,"onChangeLawVersion",[S.autobind,o],Object.getOwnPropertyDescriptor(u.prototype,"onChangeLawVersion"),u.prototype),u),T=(0,g.connect)((function(e){var t;return{isSignedIn:!!e.auth.user.isSignedIn,role:(null===(t=e.auth.user.attributes)||void 0===t?void 0:t.role)||null,downloadStatus:e.DownloadReducer.downloadStatus}}))(R);t.default=T},1686:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(35)),u=r(n(36)),l=r(n(331)),i=r(n(96)),c=r(n(97)),s=r(n(85)),d=r(n(7)),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(0)),p=r(n(13)),m=n(152),h=r(n(1526)),v=n(337),y=r(n(20));function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}function w(e,t){return!(!e||!t.find((function(t){return t.lawId===e.lawId&&t.lawName===e.lawName})))}var O=function(e){(0,i.default)(n,e);var t=b(n);function n(e){var r;return(0,o.default)(this,n),r=t.call(this,e),(0,d.default)((0,l.default)(r),"debounceDispatchToggleFavoriteAction",void 0),(0,d.default)((0,l.default)(r),"reverseFavoriteState",(function(){var e=!r.isFavorite;return r.setState({favoriteState:e}),r.debounceDispatchToggleFavoriteAction(e),!1})),(0,d.default)((0,l.default)(r),"updateFavoriteState",(function(e){r.props.dispatch((0,v.updateFavoriteStart)(r.props.lawId,r.props.lawName,e)),y.default.logToggleFavorite(e,r.props.lawName)})),r.state={favoriteState:w({lawId:r.props.lawId,lawName:r.props.lawName},r.props.favorite)},r.debounceDispatchToggleFavoriteAction=(0,h.default)(r.updateFavoriteState,1e3),r}return(0,u.default)(n,[{key:"iconStyle",get:function(){return(0,p.default)("valign-center ant-icon ant hidden-print",{"ant-star ant-yellow":this.state.favoriteState,"ant-star-o ant-grey":!this.state.favoriteState})}},{key:"isFavorite",get:function(){return w({lawId:this.props.lawId,lawName:this.props.lawName},this.props.favorite)}},{key:"render",value:function(){return this.props.isSignedIn?f.default.createElement("span",{onClickCapture:this.reverseFavoriteState},f.default.createElement("i",{className:this.iconStyle})):null}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=w({lawId:e.lawId,lawName:e.lawName},e.favorite);return n!==t.favoriteState?{favoriteState:n}:null}}]),n}(f.Component),k=(0,m.connect)((function(e){return{favorite:e.LawsReducer.favorite||[],isSignedIn:!!e.auth.user.isSignedIn}}))(O);t.default=k},1687:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(35)),u=r(n(36)),l=r(n(96)),i=r(n(97)),c=r(n(85)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(0)),d=r(n(1517)),f=r(n(1518));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.default)(e);if(t){var a=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,i.default)(this,n)}}var h=function(e){(0,l.default)(n,e);var t=m(n);function n(){return(0,o.default)(this,n),t.apply(this,arguments)}return(0,u.default)(n,[{key:"Tooltip",get:function(){return this.props.tooltip||this.props.label&&s.default.createElement(d.default,{id:"tooltip",bsClass:"hint",className:"hide-in-mobile hide-in-tablet hidden-print"},this.props.label)}},{key:"render",value:function(){return s.default.createElement("div",{className:"toolbar-button ".concat(this.props.name,"-button btn i-btn i-btn-default"),onClick:this.props.onClick},this.Tooltip?s.default.createElement(f.default,{placement:"bottom",overlay:this.Tooltip},s.default.createElement("i",{className:"ant ".concat(this.props.icon," ant-small")})):s.default.createElement("i",{className:"ant ".concat(this.props.icon," ant-small")}),this.props.children)}}]),n}(s.PureComponent);t.default=h},1688:function(e,t,n){"use strict";var r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,o=r(n(232)),u=r(n(35)),l=r(n(36)),i=r(n(7)),c=r(n(0)),s=n(235);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){return function(t){"function"==typeof e.onClick&&e.onClick(t,{markerId:e.markerId,action:s.EMarkerActions.Paint})}}function p(e){return function(t){"function"==typeof e.onClick&&e.onClick(t,{action:s.EMarkerActions.Erase})}}function m(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);return delete t.markerId,delete t.getMarkerProfile,t}var h=function(){function e(){(0,u.default)(this,e)}return(0,l.default)(e,null,[{key:"Painter",value:function(e){return c.default.createElement("span",(0,o.default)({},m(e),{onClick:f(e)}),c.default.createElement("i",{className:"ant ant-marker marker-painter-".concat(e.markerId)}))}},{key:"Eraser",value:function(e){return c.default.createElement("span",(0,o.default)({},m(e),{onClick:p(e)}),a||(a=c.default.createElement("img",{src:"/eraser.svg",className:"marker-eraser",role:"presentation"})))}}]),e}();t.default=h},1689:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.findMarkerAreaNode=v,t.isMarkerAreaNode=h;var o=r(n(36)),u=r(n(35)),l=r(n(7)),i=r(n(1520)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(1634)),s=n(235),d=r(n(1690));function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,l.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e){return!!(e&&"className"in e&&((null==e?void 0:e.className)||"").indexOf(s.MarkerAreaPrefix)>-1)}function v(e){if(!function(e){return!(null==e||!e.rangeCount||e.isCollapsed)}(e))return null;var t=e.getRangeAt(0).cloneRange();return c.findAncestor(t.commonAncestorContainer,h)}function y(e){var t=v(e);return t&&function(e){var t=e.className,n=t.indexOf(s.MarkerAreaPrefix),r=t.indexOf(" ",n);return-1===r?t.substring(n):t.substring(n,r)}(t)||""}var g=(0,o.default)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,u.default)(this,e),(0,l.default)(this,"options",void 0),(0,l.default)(this,"valid",!1),(0,l.default)(this,"category",""),(0,l.default)(this,"offset",[]),(0,l.default)(this,"text",""),(0,l.default)(this,"docId",void 0),this.options=m(m({},e.defaultOptions),n),this.valid=function(e){return!!v(e)&&c.getNodesBySelection(e).every((function(e){return 1!==(null==e?void 0:e.nodeType)||!(!(t=e)||!("dataset"in t)||t.dataset.nograffiti&&"false"!==t.dataset.nograffiti);var t}))}(t),this.valid&&(this.category=y(t),this.options.detection||(this.text=((null==t?void 0:t.toString())||"").replace(/[\n\r\u3000 ]/g,""),this.offset=function(e){var t=v(e);return t?(0,d.default)(t):null}(t)||[])),this.options.clearSelection&&(0,i.default)()}));t.default=g,(0,l.default)(g,"defaultOptions",{clearSelection:!0,detection:!1})},1690:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=function(e){var t,n=e||window.getSelection();if(!n||!n.rangeCount)return null;n.isCollapsed?(t=new Range).collapse(!1):t=n.getRangeAt(0);return t}();if(!t)return null;var n,r=function(e,t){return g(e,t,m)}(t,e),a=function(e,t){return g(e,t,d)}(t,e);switch(!0){case!!r&&!!a:case!!a:var o=a;n=function(e,t,n){var r=l.findAncestor(t,p),a=l.findAncestor(n,p),o=l.findAncestor(t,f),u=l.findAncestor(n,f),i=_(t),c=_(n),d=s({start:w(e.startContainer,e.startOffset,t),end:(t.textContent||"").length},i),m=s({start:0,end:w(e.endContainer,e.endOffset,n)},c),h=d.start<d.end,v=m.end>0;switch(!0){case t===n:return[s(s({},O(e,t)),i)];case!r||!a||r!==a:return[];case o===u:var y=k(t,n,!1,!1,_);return h&&y.unshift(d),v&&y.push(m),y;default:var g,b=function(e,t){var n=l.findAncestor(e,f),r=l.findAncestor(t,f),a=[],o=l.getNextSibling(n),u=o.next();for(;!u.done&&u.value!==r;){var i=k(u.value.firstChild,null,!0,!0,_);a=a.concat(i),u=o.next()}return a}(t,n),P=k(t,null,!1,!0,_),j=k(null===(g=n.parentNode)||void 0===g?void 0:g.firstChild,n,!0,!1,_),S=[].concat(P,b,j);return h&&S.unshift(d),v&&S.push(m),S}}(t,o.start,o.end);break;case!!r:var u=r;n=function(e,t,n){var r=[];if(t===n)r.push(s(s({},O(e,t)),{},{paragraph:h(t)}));else{var a=k(t,n,!1,!1,(function(e){return{paragraph:h(e)}}));if(r=r.concat(a),w(e.startContainer,e.startOffset,t)<(t.textContent||"").length){var o={start:w(e.startContainer,e.startOffset,t),end:(t.textContent||"").length,paragraph:h(t)};r.unshift(o)}if(w(e.endContainer,e.endOffset,n)>0){var u={start:0,end:w(e.endContainer,e.endOffset,n),paragraph:h(n)};r.push(u)}}return r}(t,u.start,u.end);break;default:n=O(t,e)}Array.isArray(n)&&(n=n.filter((function(e){return e.end>e.start})));return n};var o=r(n(7)),u=r(n(2)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(1634));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e){return!!e&&"dataset"in e&&!!e.dataset.row&&!!e.dataset.col}function f(e){return"tr"===(null==e?void 0:e.nodeName.toLowerCase())}function p(e){return"table"===(null==e?void 0:e.nodeName.toLowerCase())}function m(e){return!!e&&"dataset"in e&&!!e.dataset.para}function h(e){return e&&m(e)?Number(e.dataset.para):null}function v(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.toString();return t&&(n=n.replace(/\r/g,"")),n.length}function y(e){return!(null==e||!e.firstChild||function(e){return!!e&&"dataset"in e&&"true"===e.dataset.crlf}(e.firstChild))}function g(e,t,n){function r(e){return e===t||n(e)}var a=e.startContainer,o=e.endContainer,u=l.findAncestor(a,r),i=l.findAncestor(o,r);return null===u||null===i||u===t||i===t?null:{start:u,end:i}}function b(e,t){var n={start:0,end:(e.textContent||"").length},r=t&&t(e);return"object"===(0,u.default)(r)&&Object.assign(n,r),n}function w(e,t,n){var r=y(n),a=new Range;return a.selectNodeContents(n),a.setEnd(e,t),v(a,r)||0}function O(e,t){var n=y(t),r=e.cloneRange();r.selectNode(t),r.setEnd(e.startContainer,e.startOffset);var a=v(r,n)||0;return r.setEnd(e.endContainer,e.endOffset),{start:a,end:v(r,n)||0}}function k(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4?arguments[4]:void 0;if("function"!=typeof a)throw TypeError("handler should be a function");var o=[];if(n&&e){var u=b(e,a);o.push(u)}if(e===t)return n?o:[];for(var i=l.getNextSibling(e),c=i.next();!c.done&&c.value!==t;){var s=b(c.value,a);o.push(s),c=i.next()}if(r&&t){var d=b(t,a);o.push(d)}return o}function _(e){var t;return s({paragraph:h(l.findAncestor(e,m))},((t=e)&&d(t)?{row:Number(t.dataset.row),col:Number(t.dataset.col)}:null)||{})}},1691:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,u,l,i=r(n(232)),c=r(n(58)),s=r(n(35)),d=r(n(36)),f=r(n(331)),p=r(n(96)),m=r(n(97)),h=r(n(85)),v=r(n(7)),y=r(n(1514)),g=r(n(1520)),b=r(n(0)),w=n(152),O=n(1602),k=r(n(339)),_=r(n(1618)),P=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=S(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(333)),j=["onTextCopyStart","onTextCopyEnd","isSignedIn","role","dispatch","selectedText"];function S(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(S=function(e){return e?n:t})(e)}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.default)(e);if(t){var a=(0,h.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,m.default)(this,n)}}var C=(o=O.FeaturesLock.ProPlanFeature({feature:P.GO_PAYMENT_THRU_QUOTED_COPY,preback:function(e){e||(0,g.default)()}}),u=function(e){(0,p.default)(n,e);var t=E(n);function n(e){var r;return(0,s.default)(this,n),r=t.call(this,e),(0,v.default)((0,f.default)(r),"flashHint",(function(){r.setState({copiedHint:!0},(function(){setTimeout((function(){r.setState({copiedHint:!1})}),1e3)}))})),(0,v.default)((0,f.default)(r),"getQuotedText",(function(e){return e&&r.props.onTextCopyStart&&r.props.onTextCopyStart(e)||e})),r.state={copiedHint:!1},r}return(0,d.default)(n,[{key:"handleClickCopy",value:function(e){if(e.preventDefault(),e.stopPropagation(),this.props.selectedText){var t=(0,_.default)(this.getQuotedText(this.props.selectedText));t&&this.flashHint(),this.props.onTextCopyEnd&&this.props.onTextCopyEnd(t)}}},{key:"label",get:function(){return this.state.copiedHint?"複製成功":"引文複製"}},{key:"render",value:function(){var e=(0,k.default)().isSafari,t=this.props,n=(t.onTextCopyStart,t.onTextCopyEnd,t.isSignedIn,t.role,t.dispatch,t.selectedText,(0,c.default)(t,j));return b.default.createElement("button",(0,i.default)({},n,{onClick:this.handleClickCopy,disabled:e||this.state.copiedHint}),b.default.createElement("div",null,this.label),e&&(l||(l=b.default.createElement("div",null,"(Safari不支援此功能)"))))}}]),n}(b.default.PureComponent),(0,y.default)(u.prototype,"handleClickCopy",[O.autobind,o],Object.getOwnPropertyDescriptor(u.prototype,"handleClickCopy"),u.prototype),u),I=(0,w.connect)((function(e){var t;return{isSignedIn:!!e.auth.user.isSignedIn,role:(null===(t=e.auth.user.attributes)||void 0===t?void 0:t.role)||null}}))(C);t.default=I},1692:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,u,l,i=r(n(232)),c=r(n(58)),s=r(n(35)),d=r(n(36)),f=r(n(331)),p=r(n(96)),m=r(n(97)),h=r(n(85)),v=r(n(7)),y=r(n(1514)),g=r(n(1520)),b=r(n(0)),w=n(152),O=n(1602),k=r(n(339)),_=r(n(1618)),P=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=S(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(333)),j=["onTextCopyEnd","isSignedIn","role","dispatch","selectedText"];function S(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(S=function(e){return e?n:t})(e)}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.default)(e);if(t){var a=(0,h.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,m.default)(this,n)}}var C=(o=O.FeaturesLock.ProPlanFeature({feature:P.GO_PAYMENT_THRU_COPY,preback:function(e){e||(0,g.default)()}}),u=function(e){(0,p.default)(n,e);var t=E(n);function n(e){var r;return(0,s.default)(this,n),r=t.call(this,e),(0,v.default)((0,f.default)(r),"flashHint",(function(){r.setState({copiedHint:!0},(function(){setTimeout((function(){r.setState({copiedHint:!1})}),1e3)}))})),r.state={copiedHint:!1},r}return(0,d.default)(n,[{key:"handleClickCopy",value:function(e){if(e.preventDefault(),e.stopPropagation(),this.props.selectedText){var t=(0,_.default)(this.props.selectedText);t&&this.flashHint(),this.props.onTextCopyEnd&&this.props.onTextCopyEnd(t)}}},{key:"label",get:function(){return this.state.copiedHint?"複製成功":"複製"}},{key:"render",value:function(){var e=(0,k.default)().isSafari,t=this.props,n=(t.onTextCopyEnd,t.isSignedIn,t.role,t.dispatch,t.selectedText,(0,c.default)(t,j));return b.default.createElement("button",(0,i.default)({},n,{onClick:this.handleClickCopy,disabled:e||this.state.copiedHint}),b.default.createElement("div",null,this.label),e&&(l||(l=b.default.createElement("div",null,"(Safari不支援此功能)"))))}}]),n}(b.default.PureComponent),(0,y.default)(u.prototype,"handleClickCopy",[O.autobind,o],Object.getOwnPropertyDescriptor(u.prototype,"handleClickCopy"),u.prototype),u),I=(0,w.connect)((function(e){var t;return{isSignedIn:!!e.auth.user.isSignedIn,role:(null===(t=e.auth.user.attributes)||void 0===t?void 0:t.role)||null}}))(C);t.default=I},1693:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(232)),u=r(n(58)),l=r(n(35)),i=r(n(36)),c=r(n(331)),s=r(n(96)),d=r(n(97)),f=r(n(85)),p=r(n(7)),m=r(n(0)),h=r(n(20)),v=r(n(553)),y=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(128)),g=["selectedText","triggerOrigin"];function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,d.default)(this,n)}}var O=function(e){(0,s.default)(n,e);var t=w(n);function n(){var e;(0,l.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,p.default)((0,c.default)(e),"onSearch",(function(e){var t,n=new v.default(e),r=new URL(n.toString(),y.CANONICAL_URL);null===(t=window.open(r.toString(),"keywords","noopener noreferrer"))||void 0===t||t.focus()})),(0,p.default)((0,c.default)(e),"onClickBtn",(function(t){var n,r;e.props.selectedText&&(e.onSearch(e.props.selectedText),h.default.logSearchFromSelection(e.props.triggerOrigin)),null===(n=(r=e.props).onClick)||void 0===n||n.call(r,t)})),e}return(0,i.default)(n,[{key:"render",value:function(){var e=this.props,t=(e.selectedText,e.triggerOrigin,(0,u.default)(e,g));return m.default.createElement("button",(0,o.default)({},t,{onClick:this.onClickBtn}),"在 Lawsnote 搜尋")}}]),n}(m.default.PureComponent);t.default=O},1694:function(e,t,n){"use strict";var r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.VersionsDropdown=function(e){var t,n="",r="",o=e.histories.map((function(e){return(0,c.arrangeLawHistory)(e)})).map((function(e){return p(p({},e),{},{formatLastModified:s.default.formatLastModifiedDate(e.lastModifiedParts)})})),f=[],m=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){l=!0,o=e},f:function(){try{u||null==n.return||n.return()}finally{if(l)throw o}}}}(o);try{for(m.s();!(t=m.n()).done;){var h=t.value,v=String(h.lastModifiedParts.year);n!==v&&(n=v,f.push((b=n,u.default.createElement(i.default,{header:!0,className:"law-versions-dropdown-items-group",key:b},b,"年"))));var y=h.lawDocId===e.lawId;y&&(r=h.formatLastModified);var g=u.default.createElement(i.default,{className:"law-versions-dropdown-item",key:h.lawDocId,eventKey:h.lawDocId},u.default.createElement("span",null,h.formatLastModified),y&&(a||(a=u.default.createElement("i",{className:"law-versions-active-version"}))));f.push(g)}}catch(e){m.e(e)}finally{m.f()}var b;return u.default.createElement(l.default,{id:"law-versions-dropdown",onSelect:e.onChange,value:e.lawId},u.default.createElement(l.default.Toggle,null,u.default.createElement("span",null,r)),u.default.createElement(l.default.Menu,{className:"law-versions-dropdown-items"},f))};var a,o=r(n(7)),u=r(n(0)),l=r(n(548)),i=r(n(1525)),c=n(545),s=r(n(534));function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},1695:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,u,l,i,c=r(n(46)),s=r(n(35)),d=r(n(36)),f=r(n(331)),p=r(n(96)),m=r(n(97)),h=r(n(85)),v=r(n(7)),y=r(n(1515)),g=r(n(0)),b=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=E(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(1516)),w=r(n(1696)),O=r(n(1610)),k=r(n(20)),_=n(1629),P=n(545),j=n(535),S=r(n(1649));function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(E=function(e){return e?n:t})(e)}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.default)(e);if(t){var a=(0,h.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,m.default)(this,n)}}var I=(0,b.css)(o||(o=(0,y.default)(["\n  text-align: justify;\n  padding-top: 1em;\n  padding-bottom: 1em;\n  padding-right: 1em;\n  white-space: pre-wrap;\n\n  @media only screen and (min-width: ",") {\n    &:only-child {\n      border-bottom: 1px solid #e5e5e5;\n    }\n  }\n\n  @media only screen and (max-width: ",") {\n    border-top: 1px solid #e5e5e5;\n  }\n"])),_.LARGE_DEVICE_RESOLUTION,_.LARGE_DEVICE_RESOLUTION),R=(0,b.css)(u||(u=(0,y.default)(["\n  background-color: #eae9fa;\n"]))),T=b.default.h3(l||(l=(0,y.default)(["\n  font-weight: unset;\n  font-size: inherit;\n  margin: unset;\n  position: relative;\n  display: block;\n  padding: 8px 8px 8px 0.5em;\n  line-height: 160%;\n  ~ ol {\n    padding-top: 5px;\n  }\n\n  ","\n\n  padding-left: ","em;\n\n  @media screen and (max-width: ",") {\n    padding-left: calc(20px + ","em);\n  }\n"])),(function(e){return e.preface?I:R}),(function(e){return e.level+2}),_.LARGE_DEVICE_RESOLUTION,(function(e){return e.level}));function M(e){return g.default.createElement("section",null,g.default.createElement(T,{level:e.level,preface:!!e.preface,id:"".concat(e.lawId,"-").concat(e.sectionId)},e.name),e.children)}var N=function(e){(0,p.default)(n,e);var t=C(n);function n(){var e;(0,s.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,v.default)((0,f.default)(e),"gaCategory","LawArticle"),(0,v.default)((0,f.default)(e),"scrollToArticle",(function(){var t=document.getElementById("i-".concat(e.props.anchorTag));t&&(0,j.gracefulDomOperation)((function(){t.scrollIntoView({behavior:"smooth"})}))})),(0,v.default)((0,f.default)(e),"articleHasRelatedIssues",(function(t){return(e.props.lawObj.issuesWithLawRefs||[]).includes(t)})),(0,v.default)((0,f.default)(e),"onNotesClick",(function(t,n,r,a,o){e.props.toggleNotesSection(!0,t,n,r,a,o)})),(0,v.default)((0,f.default)(e),"handleRelatedLawClick",(function(t,n,r,a){e.props.toggleIssueRelatedLaws(!0,t,n,r,a)})),(0,v.default)((0,f.default)(e),"handleTextSelected",(function(t){k.default.logLawSelectText(e.props.lawObj.law_id,t)})),(0,v.default)((0,f.default)(e),"handleTextCopied",(function(t){k.default.logLawCopyText(e.props.lawObj.law_name,String(t))})),(0,v.default)((0,f.default)(e),"buildArticle",(function(t){return g.default.createElement(w.default,{key:"".concat(e.props.lawObj._id,"-").concat(t._id),article:t,lawName:e.props.lawObj.law_name,lawId:e.props.lawObj.law_id,versionId:e.props.lawObj._id,hasRelatedLaws:e.articleHasRelatedIssues(t._id),onNotesClick:e.onNotesClick,onRelatedLawClick:e.handleRelatedLawClick})})),(0,v.default)((0,f.default)(e),"buildSection",(function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return g.default.createElement(M,{key:t._id,lawId:e.lawDbId,sectionId:r.join("-"),name:t.toc_name,level:n},(t.child||[]).map(e.buildArticleOrSection(n+1,r)))})),(0,v.default)((0,f.default)(e),"buildArticleOrSection",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(r,a){return(0,P.isSection)(r)?e.buildSection(r,t,[].concat((0,c.default)(n),[a])):e.buildArticle(r)}})),(0,v.default)((0,f.default)(e),"getLawMarkerProfile",(function(){var t=document.getSelection().getRangeAt(0).cloneRange();return new S.default(t,{lawMap:e.props.lawMap,clearSelection:!1})})),e}return(0,d.default)(n,[{key:"componentDidMount",value:function(){void 0!==this.props.anchorTag&&this.scrollToArticle()}},{key:"Preface",get:function(){return this.props.lawObj.law_preface?g.default.createElement(M,{preface:!0,lawId:this.lawDbId,sectionId:"preface",name:this.props.lawObj.law_preface,level:0}):null}},{key:"Articles",get:function(){return(this.props.lawObj.law_content||[]).map(this.buildArticleOrSection(0))}},{key:"lawDbId",get:function(){var e;return null===(e=this.props.lawObj)||void 0===e?void 0:e._id}},{key:"render",value:function(){return g.default.createElement(O.default,{triggerOrigin:this.gaCategory,className:"law-issue-section",id:"".concat(this.lawDbId,"__inner"),onTextSelected:this.handleTextSelected,onTextCopied:this.handleTextCopied,getMarkerProfile:this.getLawMarkerProfile,onMarkEvent:this.props.onMarkerEvent},this.Preface,this.Articles,i||(i=g.default.createElement("div",{className:"dummy"})),g.default.createElement("div",{className:"hide-in-mobile hide-in-tablet",id:"".concat(this.lawDbId,"__inner--check")}))}}]),n}(g.default.Component);t.default=N},1696:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,u,l=r(n(35)),i=r(n(36)),c=r(n(331)),s=r(n(96)),d=r(n(97)),f=r(n(85)),p=r(n(7)),m=r(n(1514)),h=C(n(0)),v=n(152),y=n(1513),g=r(n(558)),b=r(n(335)),w=r(n(13)),O=r(n(554)),k=r(n(1522)),_=C(n(333)),P=n(1602),j=C(n(1647)),S=r(n(1607));function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(E=function(e){return e?n:t})(e)}function C(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=E(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,d.default)(this,n)}}var R=(o=P.FeaturesLock.ProPlanFeature({feature:_.GO_PAYMENT_THRU_SEARCH_BY_ARTICLE}),u=function(e){(0,s.default)(n,e);var t=I(n);function n(e){var r;return(0,l.default)(this,n),r=t.call(this,e),(0,p.default)((0,c.default)(r),"handleHistoryClick",(function(){var e=r.props,t=e.article,n=e.lawName,a=e.lawId,o=e.onNotesClick,u=t._id,l=t.issue_id,i=t.issue_title;o&&(o(u,l,i,n,a),r.setState((function(e){return{toggleHistory:!e.toggleHistory}})))})),(0,p.default)((0,c.default)(r),"handleRelatedLawClick",(function(e){e.currentTarget.blur();var t=r.props,n=t.article,a=t.lawName,o=t.lawId,u=t.onRelatedLawClick;u&&u(n._id,a,n.issue_title,o)})),r.state={toggleHistory:!1},r}return(0,i.default)(n,[{key:"shouldComponentUpdate",value:function(e){var t=["isSignedIn","role","lawMarkers"];return this.props.lawId!==e.lawId||this.props.article._id!==e.article._id||!(0,k.default)((0,O.default)(e,t),(0,O.default)(this.props,t))}},{key:"featureLocked",get:function(){return!S.default.AllowFreeUser({isSignedIn:!!this.props.isSignedIn})}},{key:"content",get:function(){var e=this.props,t=e.article,n=e.lawName,r=t&&t.issue_title?t.issue_title.replace(/[ \u3000]/g,""):null;return{lawName:n,title:r,issueNum:(r||"").replace(/[第條]/g,""),subtitle:(t.issue_subtitle||"").replace(/^[(（]|[）)]$/g,"")}}},{key:"TitleForProPlanUser",get:function(){if(!this.content.title)return null;var e=(0,w.default)("article-title",{short:this.props.hasRelatedLaws});return h.default.createElement("div",{className:e},h.default.createElement(y.Link,{className:"article-number",to:"/search/judgement/".concat(this.content.lawName,"第").concat(this.content.issueNum,"條")},this.content.title),h.default.createElement("span",null,this.content.subtitle&&"（".concat(this.content.subtitle,"）")))}},{key:"TitleForNonProPlanUser",get:function(){return h.default.createElement("div",{className:"article-title"},h.default.createElement("a",{className:"article-number",onClick:this.handleNonMemberClick},this.content.title))}},{key:"handleNonMemberClick",value:function(e){return e.preventDefault(),null}},{key:"HistoryButton",get:function(){return h.default.createElement(b.default,{bsClass:"btn i-btn",className:(0,w.default)("law__history-button",{theme__locked:this.featureLocked}),onClick:this.handleHistoryClick},"沿革")}},{key:"RelatedLawButton",get:function(){return this.props.hasRelatedLaws?h.default.createElement(b.default,{bsClass:"btn i-btn",className:(0,w.default)("law__related-law-button",{theme__locked:this.featureLocked}),onClick:this.handleRelatedLawClick},"相關法規"):null}},{key:"isStructuredArticle",value:function(e){return!(null==e||!e.stratum)}},{key:"render",value:function(){var e=this.isStructuredArticle(this.props.article.issue_content)?h.default.createElement(j.default,{enableSearch:!0,stratum:this.props.article.issue_content.stratum,list:this.props.article.issue_content.list,lawName:this.content.lawName,issueRef:this.content.issueNum,markNumeral:!0,marks:this.props.lawMarkers,map:this.props.lawMap,isProPlanUser:S.default.AllowProPlanUser({isSignedIn:!!this.props.isSignedIn,role:this.props.role})}):h.default.createElement(j.ArticleText,{marks:this.props.lawMarkers,map:this.props.lawMap,issueRef:this.content.issueNum,lawName:this.content.lawName},this.props.article.issue_content);return h.default.createElement("article",{role:"presentation",className:"article-container",id:"i-".concat(this.props.article._id),"data-issueref":this.content.issueNum},S.default.AllowProPlanUser({isSignedIn:!!this.props.isSignedIn,role:this.props.role})?this.TitleForProPlanUser:this.TitleForNonProPlanUser,h.default.createElement("div",{className:"article-section"},e),h.default.createElement("div",{className:"article-hover-section hidden-print"},h.default.createElement(g.default,{className:this.featureLocked&&"locked"},this.HistoryButton,this.RelatedLawButton)))}}]),n}(h.Component),(0,m.default)(u.prototype,"handleNonMemberClick",[P.autobind,o],Object.getOwnPropertyDescriptor(u.prototype,"handleNonMemberClick"),u.prototype),u),T=(0,v.connect)((function(e,t){var n,r,a,o,u;return{isSignedIn:!!e.auth.user.isSignedIn,role:(null===(n=e.auth.user.attributes)||void 0===n?void 0:n.role)||null,lawMarkers:(null===(r=e.LawsReducer.lawMarkers)||void 0===r||null===(a=r[t.article._id])||void 0===a?void 0:a.mainIssueMarks)||void 0,lawMap:t.versionId&&(null===(o=e.LawsReducer.lawCache)||void 0===o||null===(u=o[t.versionId])||void 0===u?void 0:u.map)||void 0}}))(R);t.default=T},1697:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(35)),u=r(n(36)),l=r(n(7)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(338));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,l.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=/^第\s*[\d\uFF10-\uFF19一二三四五六七八九十]\s*類[：:]|^[\d\uFF10-\uFF19]+[、.](?:\d+\.?\d*)*|^[\d\uFF10-\uFF19一二三四五六七八九十]+[、.]|^[（(][\d\uFF10-\uFF19一二三四五六七八九十]+[)）]/,p=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((0,o.default)(this,e),this.raw=t,(0,l.default)(this,"options",void 0),(0,l.default)(this,"numeralOffset",null),(0,l.default)(this,"content",[]),(0,l.default)(this,"table",!1),(0,l.default)(this,"calibrateNumeralOffset",(function(e){return n.numeralOffset&&{start:n.numeralOffset.start+e,end:n.numeralOffset.end+e}||null})),(0,l.default)(this,"getNumeral",(function(){return n.numeralOffset?n.raw.substring(n.numeralOffset.start,n.numeralOffset.end):""})),(0,l.default)(this,"getText",(function(){return n.numeralOffset?n.raw.substring(n.numeralOffset.end):n.raw})),this.raw=t,this.options=d(d({},e.defaultOptions),r),this.numeralOffset=e.getNumeralRange(this.raw),this.options.makeTable){var a=i.stringToTable(this.raw);this.content=a.result||[],this.table=a.table}}return(0,u.default)(e,null,[{key:"defaultOptions",get:function(){return{makeTable:!0}}},{key:"hasNumeral",value:function(e){return!(!e||!f.test(e))}},{key:"getNumeralRange",value:function(e){var t=e.match(f);return t?{start:0,end:t.index+t[0].length}:null}}]),e}();t.default=p},1698:function(e,t,n){"use strict";var r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ForIssueChunk",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"ForManualIndexItem",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"ForNumeralContent",{enumerable:!0,get:function(){return u.default}});var a=r(n(1699)),o=r(n(1700)),u=r(n(1701))},1699:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,u,l=r(n(35)),i=r(n(36)),c=r(n(96)),s=r(n(97)),d=r(n(85)),f=r(n(1514)),p=y(n(0)),m=y(n(333)),h=n(1602);function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function y(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var b=(o=h.FeaturesLock.ProPlanFeature({feature:m.GO_PAYMENT_THRU_SEARCH_BY_ARTICLE}),u=function(e){(0,c.default)(n,e);var t=g(n);function n(e){var r;return(0,l.default)(this,n),(r=t.call(this,e)).state="",r}return(0,i.default)(n,[{key:"handleNonMemberClick",value:function(){return null}},{key:"render",value:function(){return p.default.createElement("a",{"data-issueref":this.props.issueref,className:this.props.className,"data-offset":this.props.offset,onClick:this.handleNonMemberClick},this.props.text)}}]),n}(p.Component),(0,f.default)(u.prototype,"handleNonMemberClick",[h.autobind,o],Object.getOwnPropertyDescriptor(u.prototype,"handleNonMemberClick"),u.prototype),u);t.default=b},1700:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,u,l=r(n(35)),i=r(n(36)),c=r(n(96)),s=r(n(97)),d=r(n(85)),f=r(n(1514)),p=y(n(0)),m=y(n(333)),h=n(1602);function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function y(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var b=(o=h.FeaturesLock.ProPlanFeature({feature:m.GO_PAYMENT_THRU_SEARCH_BY_ARTICLE}),u=function(e){(0,c.default)(n,e);var t=g(n);function n(e){var r;return(0,l.default)(this,n),(r=t.call(this,e)).state="",r}return(0,i.default)(n,[{key:"handleNonMemberClick",value:function(){return null}},{key:"render",value:function(){return p.default.createElement("a",{className:"article-manual-index-item",onClick:this.handleNonMemberClick})}}]),n}(p.Component),(0,f.default)(u.prototype,"handleNonMemberClick",[h.autobind,o],Object.getOwnPropertyDescriptor(u.prototype,"handleNonMemberClick"),u.prototype),u);t.default=b},1701:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,u,l=r(n(35)),i=r(n(36)),c=r(n(96)),s=r(n(97)),d=r(n(85)),f=r(n(1514)),p=y(n(0)),m=y(n(333)),h=n(1602);function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function y(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var b=(o=h.FeaturesLock.ProPlanFeature({feature:m.GO_PAYMENT_THRU_SEARCH_BY_ARTICLE}),u=function(e){(0,c.default)(n,e);var t=g(n);function n(e){var r;return(0,l.default)(this,n),(r=t.call(this,e)).state="",r}return(0,i.default)(n,[{key:"handleNonMemberClick",value:function(){return null}},{key:"render",value:function(){return p.default.createElement("a",{"data-issueref":this.props.issueRef,onClick:this.handleNonMemberClick},this.props.text)}}]),n}(p.Component),(0,f.default)(u.prototype,"handleNonMemberClick",[h.autobind,o],Object.getOwnPropertyDescriptor(u.prototype,"handleNonMemberClick"),u.prototype),u);t.default=b},1702:function(e,t,n){"use strict";var r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,o=r(n(58)),u=r(n(35)),l=r(n(36)),i=r(n(331)),c=r(n(96)),s=r(n(97)),d=r(n(85)),f=r(n(7)),p=r(n(1515)),m=r(n(0)),h=r(n(13)),v=r(n(1516)),y=["tabs","active","onClick"];function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var b={section:"編章節",attachment:"附件",relatedLaw:"相關法規",history:"法規沿革",notes:"筆記",shareLink:"分享連結"},w=v.default.section(a||(a=(0,p.default)(["\n  min-width: 400px;\n  font-size: 14px;\n  background-color: #fafafa;\n  padding: 15px 25px 0;\n  border: 1px #e5e5e5 solid;\n\n  ul {\n    margin: 0;\n    padding: 0;\n    list-style-type: none;\n    display: flex;\n  }\n\n  li:not(:first-child) {\n    margin-left: 25px;\n    padding-bottom: 15px;\n  }\n\n  li.active {\n    color: #4f4da6;\n    padding-bottom: 12px;\n    border-bottom: 3px solid #4f4da6;\n  }\n"]))),O=function(e){(0,c.default)(n,e);var t=g(n);function n(){var e;(0,u.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,f.default)((0,i.default)(e),"onClickTab",(function(t){return function(n){e.props.onClick&&e.props.onClick(n,t)}})),(0,f.default)((0,i.default)(e),"renderTab",(function(t){return m.default.createElement("li",{className:(0,h.default)("cursor-pointer",{active:t===e.props.active}),key:t,onClick:e.onClickTab(t),role:"presentation"},b[t])})),e}return(0,l.default)(n,[{key:"ShowTabs",get:function(){return this.props.tabs.split(",")}},{key:"Tabs",get:function(){return this.ShowTabs.map(this.renderTab)}},{key:"render",value:function(){var e=this.props,t=(e.tabs,e.active,e.onClick,(0,o.default)(e,y));return m.default.createElement(w,t,m.default.createElement("ul",null,this.Tabs))}}]),n}(m.default.PureComponent);t.default=O,(0,f.default)(O,"defaultProps",{tabs:"",active:"section"})},1703:function(e,t,n){"use strict";var r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.MobileNavigationButton=t.MobileNavigationBar=void 0;var a,o,u=r(n(1515)),l=r(n(1516)),i=n(1629),c=l.default.nav(a||(a=(0,u.default)(["\n  display: none;\n\n  @media only screen and (max-width: ",") {\n    position: fixed;\n    display: flex;\n    bottom: 0;\n    left: 0;\n    width: 100%;\n    padding: 5px 15px 7px;\n    background-color: #f9f9f9;\n    box-shadow: 0 -5px 10px 1px #fff;\n    overflow-y: auto;\n\n    &::-webkit-scrollbar {\n      display: none;\n    }\n\n    & > * {\n      margin-right: 12px;\n    }\n  }\n"])),i.LARGE_DEVICE_RESOLUTION);t.MobileNavigationBar=c;var s=l.default.button(o||(o=(0,u.default)(["\n  font-size: 13px;\n  font-weight: 500;\n  text-align: left;\n  border-radius: 30px;\n  background-color: ",";\n  border: solid 1px #4f4da6;\n  color: ",";\n  padding: 8px 20px;\n\n  &:focus {\n    outline: none;\n  }\n"])),(function(e){return e.active?"#4f4da6":"#fff"}),(function(e){return e.active?"#fff":"#4f4da6"}));t.MobileNavigationButton=s},1704:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(35)),u=r(n(36)),l=r(n(331)),i=r(n(96)),c=r(n(97)),s=r(n(85)),d=b(n(0)),f=(r(n(6)),r(n(1547))),p=r(n(335)),m=r(n(13)),h=r(n(1548)),v=r(n(20)),y=b(n(21));function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function b(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}var O=(0,r(n(59)).default)("Note"),k=[(0,h.default)()],_=function(e){(0,i.default)(n,e);var t=w(n);function n(e){var r;return(0,o.default)(this,n),(r=t.call(this,e)).onChangeNote=r.onChangeNote.bind((0,l.default)(r)),r.onClickNote=r.onClickNote.bind((0,l.default)(r)),r.onClickSave=r.onClickSave.bind((0,l.default)(r)),r}return(0,u.default)(n,[{key:"onChangeNote",value:function(e){this.props.onChange(e,this.props.noteId)}},{key:"onClickNote",value:function(){this["".concat(this.props.noteId)].focus(),v.default.logClickNotes(this.props.lawName,this.props.articleNo)}},{key:"onClickSave",value:function(e){O("onClickSave"),e.stopPropagation(),this.props.onSaveNote(this.props.editorState,this.props.noteId),v.default.logSaveNotes(this.props.lawName,this.props.articleNo)}},{key:"getButtonIndicator",value:function(){var e=(0,m.default)("ant ant-small",{"ant-success indicator":this.props.status===y.STATUS_SUCCESS,"ant-fail indicator":this.props.status===y.STATUS_FAIL,"ant-load indicator":this.props.status===y.STATUS_SAVING});return d.default.createElement("i",{className:e})}},{key:"render",value:function(){var e=this,t=this.props,n=t.noteId,r=t.editorState,a=t.placeholder,o=this.getButtonIndicator(),u=this.props.isDirty,l=this.props.status===y.STATUS_SAVING;return d.default.createElement("div",{className:"notes-item",onClick:l?null:this.onClickNote},d.default.createElement(f.default,{editorState:r,onChange:this.onChangeNote,plugins:k,placeholder:a,ref:function(t){return e["".concat(n)]=t},readOnly:l}),d.default.createElement("div",{className:"add-note"},d.default.createElement(p.default,{bsClass:"c-button",disabled:!u||l,onClick:!u||l?null:this.onClickSave},o,"儲存")))}}]),n}(d.Component);t.default=_},1705:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(232)),u=r(n(58)),l=r(n(35)),i=r(n(36)),c=r(n(331)),s=r(n(96)),d=r(n(97)),f=r(n(85)),p=r(n(7)),m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(0)),h=r(n(1654)),v=["to","children","animate","refId"];function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,d.default)(this,n)}}var b=function(e){(0,s.default)(n,e);var t=g(n);function n(){var e;(0,l.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,p.default)((0,c.default)(e),"onClick",(function(t){t.preventDefault();var n=e.props,r=n.to,a=n.animate,o=n.refId,u=n.onClick;return!(u&&!u(t))&&((0,h.default)(r,o,a),!0)})),e}return(0,i.default)(n,[{key:"render",value:function(){var e=this.props,t=e.to,n=e.children,r=(e.animate,e.refId,(0,u.default)(e,v));return m.default.createElement("a",(0,o.default)({},r,{href:"#".concat(t),onClick:this.onClick}),n)}}]),n}(m.PureComponent);t.default=b},1706:function(e,t,n){"use strict";function r(e){return e?e.currentStyle||window.getComputedStyle(e):null}function a(e,t){var n=document.getElementById(e);if(n){var a=r(n);return(null==a?void 0:a[t])||null}return null}function o(e){return"none"!==a("".concat(e,"--check"),"display")}Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentCSSProps=r,t.getCurrentCssValue=a,t.getOffsetTop=function(e,t){var n=e.getBoundingClientRect(),r=t.getBoundingClientRect();return n.top-r.top+t.scrollTop},t.getRefElementId=function(e){var t=Array.isArray(e)?e.filter(o)[0]:e;return t&&document.getElementById(t)||document.body},t.isValidElementId=o},1707:function(e,t,n){"use strict";var r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,o=r(n(35)),u=r(n(36)),l=r(n(331)),i=r(n(96)),c=r(n(97)),s=r(n(85)),d=r(n(7)),f=r(n(1515)),p=r(n(0)),m=r(n(1516)),h=n(1629),v=r(n(534));function y(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){l=!0,o=e},f:function(){try{u||null==n.return||n.return()}finally{if(l)throw o}}}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}var w=m.default.section(a||(a=(0,f.default)(["\n  * {\n    font-size: 14px;\n    margin: 0;\n    padding: 0;\n  }\n\n  h3 {\n    font-weight: 600;\n  }\n\n  h4 {\n    color: #4a90e2;\n    flex: 0 0;\n    min-width: 130px;\n  }\n\n  p {\n    line-height: 1.5em;\n    width: 300px;\n    text-align: justify;\n    white-space: pre-line;\n  }\n\n  ol {\n    padding-bottom: 10px;\n  }\n\n  li {\n    cursor: pointer;\n    display: flex;\n    align-items: baseline;\n    padding: 10px 0;\n    border-bottom: 1px solid #f0f0f0;\n  }\n\n  @media only screen and (max-width: ",") {\n    h4 {\n      padding-bottom: 5px;\n    }\n\n    ol {\n      padding-bottom: 30px;\n    }\n\n    li {\n      flex-direction: column;\n      padding: 10px 0 5px;\n    }\n\n    p {\n      width: auto;\n    }\n  }\n"])),h.LARGE_DEVICE_RESOLUTION),O=function(e){(0,i.default)(n,e);var t=b(n);function n(){var e;(0,o.default)(this,n);for(var r=arguments.length,a=new Array(r),u=0;u<r;u++)a[u]=arguments[u];return e=t.call.apply(t,[this].concat(a)),(0,d.default)((0,l.default)(e),"onClickLawVersion",(function(t){return function(n){e.props.onClick&&e.props.onClick(n,{lawId:e.props.lawId,versionId:t})}})),(0,d.default)((0,l.default)(e),"renderGroupItems",(function(e,t){return p.default.createElement("section",{key:e},p.default.createElement("h3",null,e,"年"),p.default.createElement("ol",null,t))})),(0,d.default)((0,l.default)(e),"renderItem",(function(t){return p.default.createElement("li",{key:t.lawDocId,onClick:e.onClickLawVersion(t.lawDocId),role:"presentation"},p.default.createElement("h4",null,v.default.formatLastModifiedDate(t.lastModifiedParts)),p.default.createElement("p",null,t.lawHistoricalRecord))})),e}return(0,u.default)(n,[{key:"HistoryList",get:function(){var e,t=[],n=[],r="",a=y(this.props.histories||[]);try{for(a.s();!(e=a.n()).done;){var o=e.value,u=o.lastModifiedParts.year;r?r!==u&&(t.push(this.renderGroupItems(r,n.slice())),n.length=0,r=u):r=u,n.push(this.renderItem(o))}}catch(e){a.e(e)}finally{a.f()}return t.push(this.renderGroupItems(r,n.slice())),n.length=0,t}},{key:"render",value:function(){return p.default.createElement(w,null,this.HistoryList)}}]),n}(p.default.PureComponent);t.default=O},1708:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,u=r(n(232)),l=r(n(2)),i=r(n(35)),c=r(n(36)),s=r(n(331)),d=r(n(96)),f=r(n(97)),p=r(n(85)),m=r(n(7)),h=w(n(0)),v=r(n(13)),y=w(n(1603)),g=r(n(1709));function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}function w(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,p.default)(e);if(t){var a=(0,p.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.default)(this,n)}}var k=function(e){(0,d.default)(n,e);var t=O(n);function n(){var e;(0,i.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,m.default)((0,s.default)(e),"link2external",(function(t){e.props.locked&&(t.preventDefault(),y.loginRequired(t))})),e}return(0,c.default)(n,[{key:"normalize",value:function(e){return e?"string"===(0,l.default)(e)?e.split("\n"):e:[]}},{key:"textMode",value:function(e){return e.map((function(e){return h.default.createElement("div",{className:"document-misc__item-container",key:e},e)}))}},{key:"contentMode",value:function(e,t){var n=this,r=t.locked;return e.map((function(e){return h.default.createElement(g.default,{key:e._id,classSet:n.props.category,issueObj:e,locked:r,marks:n.props.marks,map:n.props.map})}))}},{key:"linkMode",value:function(e,t){var n=this,r=t.locked;return e.map((function(e){var t=e.fileUrl,a=e.fileName;if(!t)return h.default.createElement("div",{className:"document-misc__item-container",key:a},a);var o={href:r?void 0:e.fileUrl,target:"_blank",className:"document-misc__item-container",rel:"noopener noreferrer",onClick:n.link2external};return h.default.createElement("a",(0,u.default)({key:t},o),a)}))}},{key:"render",value:function(){var e=this.props,t=e.mode,n=e.relatedIssues,r=e.show,a=e.locked,u=e.hasChildren,l=null,i=this.normalize(n);if(i.length>0)switch(t){case"text":l=this.textMode(i);break;case"link":l=this.linkMode(i,{locked:a});break;default:l=this.contentMode(i,{locked:a})}else l=o||(o=h.default.createElement("div",{className:"document-misc__item-container"},"無相關條文"));var c=(0,v.default)("document-misc__sub-container document-misc__relatedIssue-container",{"document-misc__sub-container--opened":r,"hide-in-desktop":u});return h.default.createElement("div",{className:c},h.default.createElement("section",{className:"document-misc__sub-content"},h.default.createElement("div",{className:"document-misc__sub-container-close-button hide-in-desktop"},h.default.createElement("i",{className:"close-icon",onClick:this.props.onClickClose})),h.default.createElement("h2",{className:"document-misc__title"},this.props.label),l))}}]),n}(h.Component);t.default=k},1709:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n=e.issueObj,r=e.locked,a=e.marks,c=e.classSet||"judgement",s=(0,l.useState)(!1),d=(0,o.default)(s,2),b=d[0],w=d[1],O=(0,l.useMemo)((function(){return new h.default([n])}),[n.issue_title,n.issue_content]),_=(0,i.useDispatch)(),P=(0,i.useSelector)((function(e){var t,n;return!(null==e||null===(t=e.auth)||void 0===t||null===(n=t.user)||void 0===n||!n.isSignedIn)}));return l.default.createElement(f.default,{triggerOrigin:"related issues view",onMarkEvent:function(e,t){var n=+new Date,r=v.default.getSearchKeyword();_((0,y.requestUpdateMarker)(t.docId,"issue","issue_content",t,n,P,r))},getMarkerProfile:function(){var e=document.getSelection().getRangeAt(0).cloneRange();return new g.default(e,{lawMap:O,clearSelection:!1})}},l.default.createElement("div",{className:"document-misc__item-container ".concat(c,"-misc-content")},l.default.createElement("div",{id:n._id,onClick:function(t){if(e.locked)p.loginRequired(t);else{var n=e.issueObj,r=n.law_name,a=n.issue_title;b||m.default.logRelatedIssueClick(e.classSet,r,a),w((function(e){return!e}))}}},"".concat(n.law_name,"第").concat(n.issue_title,"條"),l.default.createElement("i",{className:r?"ant indicator-right ant-caret-right":(0,u.default)("ant indicator-right",{"ant-caret-right":!b,"ant-caret-down":b})})),r?null:l.default.createElement(k,{lawName:n.law_name,lawId:n.law_id,issueVerId:n._id,isOpen:b,text:n.issue_content,classSet:c,marks:null==a||null===(t=a[n._id])||void 0===t?void 0:t.mainIssueMarks,map:O,issueRef:n.issue_title})))};var o=r(n(153)),u=r(n(13)),l=O(n(0)),i=n(152),c=n(1513),s=r(n(1555)),d=r(n(1652)),f=r(n(1610)),p=O(n(1603)),m=r(n(20)),h=r(n(560)),v=r(n(1609)),y=n(541),g=r(n(1649)),b=r(n(536));function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(w=function(e){return e?n:t})(e)}function O(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=w(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}function k(e){var t=e.issueVerId,n=e.lawId,r=e.issueRef,a=e.isOpen,o=e.text,u=e.classSet,f=e.map,p=e.marks,m=e.lawName,h=(0,i.useSelector)((function(e){var t,n,r;return b.default.isPaidUser(null==e||null===(t=e.auth)||void 0===t||null===(n=t.user)||void 0===n||null===(r=n.attributes)||void 0===r?void 0:r.role)})),v="/law/".concat(n);return t&&(v+="/issue/".concat(t)),l.default.createElement(s.default,{in:a,timeout:200},l.default.createElement("div",{className:"document-misc__relatedIssue-issue-container ".concat(u,"-misc-sub-content")},l.default.createElement(d.default,{markNumeral:!0,lawName:m,content:o,marks:p,map:f,issueRef:r,isProPlanUser:h}),l.default.createElement(c.Link,{to:v,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",marginTop:"0.5rem"}},"（查看法規全文）")))}},1710:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(232)),u=r(n(35)),l=r(n(36)),i=r(n(331)),c=r(n(96)),s=r(n(97)),d=r(n(85)),f=r(n(7)),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(0)),m=r(n(13)),h=r(n(20)),v=r(n(1609)),y=n(1711);function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function b(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){l=!0,o=e},f:function(){try{u||null==n.return||n.return()}finally{if(l)throw o}}}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var k=p.default.createElement("div",{className:"document-misc__item-container empty"},"尚無歷審裁判");function _(e){var t=e.show,n=e.hasChildren,r=e.children,a=e.onClose,o=e.title,u=(0,m.default)("document-misc__sub-container document-misc__judgementHistory-container",{"document-misc__sub-container--opened":t,"hide-in-desktop":n});return p.default.createElement("div",{className:u},p.default.createElement("section",{className:"document-misc__sub-content"},p.default.createElement("div",{className:"document-misc__sub-container-close-button hide-in-desktop"},p.default.createElement("i",{className:"close-icon",onClick:a})),p.default.createElement("h2",{className:"document-misc__title"},o),r))}var P=function(e){(0,c.default)(n,e);var t=O(n);function n(){var e;(0,u.default)(this,n);for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return e=t.call.apply(t,[this].concat(a)),(0,f.default)((0,i.default)(e),"getIconTypes",(function(){var t,n=["supremeCourt","appeal","valuable"],r={},a=b(e.props.histories);try{for(a.s();!(t=a.n()).done;){var o,u=t.value,l=b(n);try{for(l.s();!(o=l.n()).done;){var i=o.value;u[i]&&(r[i]=!0)}}catch(e){l.e(e)}finally{l.f()}if(n.map((function(e){return!!r[e]})).every(Boolean))break}}catch(e){a.e(e)}finally{a.f()}return r})),(0,f.default)((0,i.default)(e),"handleClickHistory",(function(t,n){v.default.setSearchKeyword(e.props.keywords),h.default.logJudgementHistory(n)})),(0,f.default)((0,i.default)(e),"renderHistoryItem",(function(t){var n=t._id||t.court+t.no,r=(0,m.default)("document-misc__item-container",{selected:t._id===e.props.docId});return p.default.createElement("div",{key:n,className:r},p.default.createElement(y.HistoryItem,{historyItem:t,locked:e.props.locked,onClick:e.handleClickHistory}),p.default.createElement(y.HistoryItemStatus,(0,o.default)({},t,{container:(0,i.default)(e)})))})),e}return(0,l.default)(n,[{key:"hasHistories",get:function(){return this.props.histories.length>0}},{key:"render",value:function(){var e=this.props,t=e.show,n=e.hasChildren,r=e.label;return p.default.createElement(_,{title:r,show:t,hasChildren:n,onClose:this.props.onClickClose},this.hasHistories?p.default.createElement(p.default.Fragment,null,this.props.histories.map(this.renderHistoryItem),p.default.createElement(y.StatusIconDescriptionsSection,this.getIconTypes())):k)}}]),n}(p.PureComponent);t.default=P},1711:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.StatusIconDescriptionsSection=t.HistoryItemStatus=t.HistoryItem=void 0,t.getJudgmentTitleFromNo=m;var o,u=r(n(153)),l=r(n(0)),i=n(1513),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(1603)),s=r(n(534));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}var f={supremeCourt:"/status/supreme.svg",valuable:"/diamond.svg",appeal:"/status/appeal.svg"},p={supremeCourt:"案件目前上訴到最高法院審理中",valuable:"大法庭裁判、原判例、具參考價值裁判或足資討論裁判",appeal:"司法院未公開或尚未上傳檔案之案件"};function m(e){var t=e.unit,n=e.fullNo,r=e.type,a=n.split(","),o=(0,u.default)(a,3),l=o[0],i=o[1],c=o[2];return"".concat(t).concat(l,"年度").concat(i,"字第").concat(c,"號").concat(r||"")}function h(e,t){return e.historyItem._id===t.historyItem._id}function v(e){var t=e.historyItem,n=e.locked,r=e.onClick,a=m(t);switch(t.undisclosedReason&&(a+=" [".concat(t.undisclosedReason,"]")),!0){case!!n:return l.default.createElement("a",{onClick:c.loginRequired},a);case!t._id:return l.default.createElement(l.default.Fragment,null,a);default:var o="t=".concat(s.default.getDailyTimeHash());return l.default.createElement(i.Link,{id:t._id,to:"/".concat(t.category,"/").concat(t._id,"?").concat(o),onClick:function(e){return r(e,a)}},a)}}var y=l.default.memo(v,h);function g(e){var t=["valuable","supremeCourt","appeal"].map((function(t){return!0===e[t]?l.default.createElement("img",{src:f[t],style:{width:"20px"}}):null}));return l.default.createElement("span",{style:{marginLeft:"5px",verticalAlign:"text-bottom"}},t)}t.HistoryItem=y,y.displayName="HistoryItem";var b=l.default.memo(g);function w(e){return l.default.createElement("li",{key:e},l.default.createElement("img",{className:"icon-help-section__icon",src:f[e],style:{width:"15px"}}),p[e])}function O(e){var t=["valuable","appeal","supremeCourt"].filter((function(t){return!!e[t]})).map(w);return t.length?l.default.createElement("section",{className:"document-misc__item-container icon-help-section"},o||(o=l.default.createElement("h3",{className:"title icon-help-section__title"},"圖示說明：")),l.default.createElement("ul",{className:"icon-help-section__list inline-block"},t)):null}t.HistoryItemStatus=b;var k=l.default.memo(O);t.StatusIconDescriptionsSection=k},1712:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(7)),u=r(n(58)),l=r(n(35)),i=r(n(36)),c=r(n(331)),s=r(n(96)),d=r(n(97)),f=r(n(85)),p=k(n(0)),m=(r(n(6)),r(n(13))),h=k(n(333)),v=n(1653),y=k(n(1603)),g=r(n(342)),b=r(n(20)),w=["judgementId"];function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(O=function(e){return e?n:t})(e)}function k(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=O(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,d.default)(this,n)}}var S=function(e){(0,s.default)(n,e);var t=j(n);function n(e){var r;return(0,l.default)(this,n),(r=t.call(this,e)).onClickOpinion=r.onClickOpinion.bind((0,c.default)(r)),r.onClickLockOpinion=r.onClickLockOpinion.bind((0,c.default)(r)),r}return(0,i.default)(n,[{key:"onClickLockOpinion",value:function(e){y.proPlanRequired(e,h.GO_PAYMENT_THRU_JUDGEMENT_OPINION)}},{key:"onClickOpinion",value:function(e){return!this.props.locked&&(b.default.logOpinion(e.target.id),!0)}},{key:"renderScrollchor",value:function(e){var t=e.judgementId,n=P(P({},(0,u.default)(e,w)),{},{to:"opinion",refId:t,animate:{offset:-15},id:t});return p.default.createElement(v.Scrollchor,n,"法院見解")}},{key:"render",value:function(){var e=this.props,t=e.opinionSet,n=e.judgementId,r=e.locked,a=e.hasChildren;if(!Array.isArray(t)&&!g.default.isMarkerSet(t))return null;var o=p.default.createElement("a",{onClick:this.onClickLockOpinion},"法院見解"),u=p.default.createElement(this.renderScrollchor,{onClick:this.onClickOpinion,judgementId:n}),l=(0,m.default)("document-misc__sub-container document-misc__judgementOpinion-container",{"hide-in-desktop":a});return p.default.createElement("section",{className:l},p.default.createElement("h2",{className:"document-misc__title"},this.props.label),p.default.createElement("div",{className:"document-misc__content"},r?o:u))}}]),n}(p.Component);t.default=S},1713:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,u,l,i,c=r(n(46)),s=r(n(35)),d=r(n(36)),f=r(n(331)),p=r(n(96)),m=r(n(97)),h=r(n(85)),v=r(n(7)),y=r(n(1514)),g=r(n(13)),b=r(n(544)),w=(r(n(6)),N(n(0))),O=n(152),k=N(n(1612)),_=N(n(336)),P=N(n(21)),j=N(n(333)),S=r(n(1714)),E=n(1602),C=n(546),I=n(583),R=N(n(550)),T=r(n(20));function M(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(M=function(e){return e?n:t})(e)}function N(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=M(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.default)(e);if(t){var a=(0,h.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,m.default)(this,n)}}var x=(o=E.FeaturesLock.FreeFeature,u=E.FeaturesLock.FreeFeature,l=E.FeaturesLock.FreeFeature,i=function(e){(0,p.default)(n,e);var t=D(n);function n(e){var r;return(0,s.default)(this,n),r=t.call(this,e),(0,v.default)((0,f.default)(r),"onMouseDownCompleteButton",(function(e){e.preventDefault(),e.stopPropagation(),r.props.onClickClose&&r.props.onClickClose()})),(0,v.default)((0,f.default)(r),"onTagInputValueChange",(function(e){r.updateTagValue(e),r.debounceRequestTagSuggestions(e.details.value)})),(0,v.default)((0,f.default)(r),"onTagInputBlur",(function(e,t){r.updateTagValue({details:{value:e,position:t}}),r.updateTagWithInsert(e,t);var n=(0,c.default)(r.props.editableStatus);n[t]=!1,r.props.dispatch((0,I.updateEditableStatus)(n)),r.updateEditingStatusByPosition(t,!1)})),(0,v.default)((0,f.default)(r),"onClickRemoveButton",(function(e){var t=e.target.attributes.position,n=t.value||t.nodeValue||t.textContent,a=Number(n),o=r.getTagsByDoc(r.props);r.updateTagWithDelete(o[a]),r.updateRemovedTagStatusByPosition(a)})),(0,v.default)((0,f.default)(r),"onMouseDownCancelButton",(function(e){e.preventDefault(),e.stopPropagation();var t=r.props.editableStatus.findIndex((function(e){return!0===e}));return"number"==typeof t&&(r.updateTagValue({details:{value:"",position:t}}),r.updateEditableStatusByPosition(t,!1),r.updateEditingStatusByPosition(t,!1)),!1})),(0,v.default)((0,f.default)(r),"getRemovedStatus",(function(e){var t=r.getTagsByDoc(e).length,n=Array(t).fill(!1);return e.removeStatus.forEach((function(e,t){"boolean"==typeof e&&(n[t]=e)})),n})),(0,v.default)((0,f.default)(r),"getEditingStatus",(function(e){var t=r.getTagsByDoc(e).length,n=Array(t).fill(!1);return e.editingStatus.forEach((function(e,t){"boolean"==typeof e&&(n[t]=e)})),n})),(0,v.default)((0,f.default)(r),"getTagsAfterRemoved",(function(e){var t=r.getTagsByDoc(e),n=(0,c.default)(t);return r.getRemovedStatus(e).forEach((function(e,t){e&&(n[t]="")})),n})),(0,v.default)((0,f.default)(r),"insertNewTag",(function(){var e=r.getTagsByDoc(r.props);if(e.includes(R.TEXT_ADD_TAG))document.querySelector(".isNewTag input").focus();else{var t=(0,c.default)(r.props.editableStatus);t[e.length]=!0,r.updateTagValue({details:{value:"",position:e.length,forceUpdate:!0}}),r.props.dispatch((0,I.updateEditableStatus)(t))}})),(0,v.default)((0,f.default)(r),"removeTag",(function(){var e=r.props,t=e.category,n=e.docId,a=r.getTagsAfterRemoved(r.props).filter(r.isValidTagInArray);r.props.dispatch((0,I.updateTags)(t,n,a,+(new Date).getTime()))})),(0,v.default)((0,f.default)(r),"initialTag",(function(e){if(0===r.getTagsByDoc(e).length){var t=e.fetchTagsStatus===P.STATUS_SUCCESS,n={details:{value:R.TEXT_ADD_TAG,position:0,forceUpdate:!0,timestamp:t?0:1}};r.props.dispatch((0,I.updateRemoveStatus)([!1])),r.props.dispatch((0,I.updateEditingStatus)([!1])),r.props.dispatch((0,I.updateEditableStatus)([!0])),r.updateTagValue(n)}})),(0,v.default)((0,f.default)(r),"fetchDocTags",(function(e){var t=e.category,n=e.docId,a=+(new Date).getTime();r.props.dispatch((0,I.requestDocTag)(t,n,a))})),(0,v.default)((0,f.default)(r),"requestTagSuggestions",(function(e){var t=r.validateTagValue(e||"");r.props.dispatch((0,I.requestTagSuggestions)(t||""))})),(0,v.default)((0,f.default)(r),"updateEditableStatusByPosition",(function(e,t){var n=(0,c.default)(r.props.editableStatus);n[e]=t,r.props.dispatch((0,I.updateEditableStatus)(n))})),(0,v.default)((0,f.default)(r),"updateEditingStatusByPosition",(function(e,t){var n=(0,c.default)(r.props.editingStatus);n[e]=t,r.props.dispatch((0,I.updateEditingStatus)(n))})),(0,v.default)((0,f.default)(r),"updateRemoveStatusByPosition",(function(e,t){var n=(0,c.default)(r.props.removeStatus);n[e]=t,r.props.dispatch((0,I.updateRemoveStatus)(n))})),(0,v.default)((0,f.default)(r),"updateRemovedTagStatusByPosition",(function(e){r.updateRemoveStatusByPosition(e,!0),r.updateEditableStatusByPosition(e,!1),r.updateEditingStatusByPosition(e,!1)})),(0,v.default)((0,f.default)(r),"resetEditorRelatedState",(function(){r.props.dispatch((0,I.updateEditableStatus)([])),r.props.dispatch((0,I.updateEditingStatus)([])),r.props.dispatch((0,I.updateRemoveStatus)([]))})),(0,v.default)((0,f.default)(r),"updateTagWithInsert",(function(e,t){var n=r.props,a=n.category,o=n.docId,u=r.getTagsByDoc(r.props),l=r.validateTagValue(e),i=r.isValidTagInArray(e,t,u);if(l&&i){var c=R.insertTagBuilder(a,o,e);T.default.logTagAction(j.TAG_ACTION_CREATE_TAG,e),r.props.dispatch((0,I.updateTagRequest)(c))}})),(0,v.default)((0,f.default)(r),"updateTagWithDelete",(function(e){var t=r.props,n=t.category,a=t.docId,o=R.deleteTagBuilder(n,a,e);T.default.logTagAction(j.TAG_ACTION_REMOVE_TAG,e),r.props.dispatch((0,I.updateTagRequest)(o))})),(0,v.default)((0,f.default)(r),"updateTagValue",(function(e){if(e.details){var t=e.details,n=t.value,a=t.position,o=t.forceUpdate,u=t.timestamp,l=t.isComposing,i=r.props.category,s=r.props.docId,d=r.getTagsByDoc(r.props),f=(0,c.default)(d);f[a]=n;var p=f;l||(p=p.map(r.validateTagValue)),o||(p=p.filter(r.isValidTagInArray)),r.props.dispatch((0,I.updateTags)(i,s,p,u||+(new Date).getTime()))}})),(0,v.default)((0,f.default)(r),"renderTagWrapper",(function(e,t){var n={value:e,position:t,autoFocus:!0,suggestions:r.props.suggestions,onInputFocus:r.onTagInputFocus,onInputBlur:r.onTagInputBlur,onLinkClick:r.searchTagValue,isEditing:Boolean(r.props.editingStatus[t]),isEditable:Boolean(r.props.editableStatus[t])||e===R.TEXT_ADD_TAG,isRemoved:Boolean(r.props.removeStatus[t]),isNewTag:e===R.TEXT_ADD_TAG},a=(0,g.default)("document-tag__wrapper",{isEditing:n.isEditing,isEditable:n.isEditable&&!n.isNewTag,isRemoved:n.isRemoved}),o=!r.getEditingStatus(r.props).some((function(e){return!0===e})),u=n.isEditing?w.default.createElement("button",{className:"text-button save",position:t,onMouseDown:r.onMouseDownSaveButton},"儲存"):null,l=o&&e!==R.TEXT_ADD_TAG?w.default.createElement("button",{className:"text-button remove",position:t,onTouchEnd:r.onClickRemoveButton,onMouseDown:r.onClickRemoveButton},"移除"):null;return w.default.createElement("li",{key:t,className:a,onTransitionEnd:r.onTransitionEndAfterRemoved},w.default.createElement(S.default,n),w.default.createElement("div",{className:"document-tag__tag-button"},l,u))})),(0,v.default)((0,f.default)(r),"renderMobileLeftActionButton",(function(){var e=r.props.editingStatus.some((function(e){return!0===e})),t=w.default.createElement("button",{className:"text-button complete",onMouseDown:r.onMouseDownCompleteButton,onTouchEnd:r.onMouseDownCompleteButton},"完成"),n=w.default.createElement("button",{className:"text-button cancel",onMouseDown:r.onMouseDownCancelButton,onTouchEnd:r.onMouseDownCancelButton},"取消");return e?n:t})),(0,v.default)((0,f.default)(r),"renderMobileRightActionButton",(function(){var e=r.getTagsByDoc(r.props),t=0===r.props.editableStatus.filter((function(e){return!0===e})).length,n=w.default.createElement("button",{className:"text-button save",onMouseDown:r.onMouseDownSaveButton,onTouchEnd:r.onMouseDownSaveButton},"儲存"),a=w.default.createElement("button",{className:"text-button insert",onMouseDown:r.onMouseDownInsertButton,onTouchEnd:r.onMouseDownInsertButton},"新增");return e.includes(R.TEXT_ADD_TAG)||t?a:n})),r.sectionTitle="標註標籤",r.debounceRequestTagSuggestions=(0,b.default)(r.requestTagSuggestions,500),r}return(0,d.default)(n,[{key:"componentDidMount",value:function(){document.addEventListener(k.UPDATE_TAG_VALUE_BY_POSITION,this.onTagInputValueChange,!0),this.props.isSignedIn?(this.fetchDocTags(this.props),this.requestTagSuggestions()):this.initialTag(this.props)}},{key:"componentDidUpdate",value:function(e){this.initialTag(this.props),this.shouldResetState(e)&&(this.props.dispatch(this.resetEditorRelatedState()),this.fetchDocTags(this.props),this.requestTagSuggestions())}},{key:"componentWillUnmount",value:function(){this.resetEditorRelatedState(),document.removeEventListener(k.UPDATE_TAG_VALUE_BY_POSITION,this.onTagInputValueChange,!0)}},{key:"onTagInputFocus",value:function(e,t){this.updateEditingStatusByPosition(t,!0),this.debounceRequestTagSuggestions(e===R.TEXT_ADD_TAG?"":e),e===R.TEXT_ADD_TAG&&this.updateTagValue({details:{value:"",position:t,forceUpdate:!0}})}},{key:"onMouseDownSaveButton",value:function(e){return e.preventDefault(),e.stopPropagation(),document.querySelectorAll(".isEditable input").forEach((function(e){e.focus(),e.blur()})),!1}},{key:"onMouseDownInsertButton",value:function(e){return e.preventDefault(),e.stopPropagation(),this.insertNewTag(),!1}},{key:"onTransitionEndAfterRemoved",value:function(e){e.target.classList.add("hide")}},{key:"getTagsByDoc",value:function(e){var t=e.category,n=e.docId,r=e.tags[t]&&e.tags[t][n]||[];return(0,c.default)(r)}},{key:"shouldResetState",value:function(e){return(this.props.docId!==e.docId||this.props.category!==e.category)&&this.props.isSignedIn}},{key:"searchTagValue",value:function(e){var t=R.HASHTAG_SYMBOL+e;T.default.logTagAction(j.TAG_ACTION_CLICK_DOC,e),this.props.dispatch((0,C.searchDb)(t,_.ALL_TYPES))}},{key:"isValidTagInArray",value:function(e,t,n){var r=e!==R.TEXT_ADD_TAG,a=n.indexOf(e)===n.lastIndexOf(e),o=!a&&n.indexOf(e)===t;return!!e&&r&&(a||o)}},{key:"validateTagValue",value:function(e){return e.trim().replace(/\s/,"").replace(/[\x00-\x0C\x0E-\x1F\x7F-\x9F]/g,"").replace(/[-[\]{}()*+?.,\\^$|#]/g,"").replace(/[（）~`!@#%&=:;"'/]/g,"")}},{key:"render",value:function(){var e=this.getTagsByDoc(this.props),t=e.map(this.renderTagWrapper),n=0===this.props.editableStatus.filter((function(e){return!0===e})).length,r=w.default.createElement("button",{className:"text-button insert",onClick:this.insertNewTag},"新增"),a=e.length>0&&!e.includes(R.TEXT_ADD_TAG)?w.default.createElement("span",{className:"document-tags__tags-list-button hide-in-mobile hide-in-tablet"},e.length>0&&!e.includes(R.TEXT_ADD_TAG)&&n?r:null):null,o=(0,g.default)("document-misc__sub-container document-tags__container",{"document-tags__container--opened":this.props.show,"hide-in-desktop":this.props.hasChildren});return w.default.createElement("div",{className:o},w.default.createElement("section",{className:"document-misc__sub-content document-tags__wrapper"},w.default.createElement("h2",{className:"document-misc__title hide-in-mobile hide-in-tablet"},this.props.label,a),w.default.createElement("header",{className:"document-tags__header hide-in-desktop"},this.renderMobileLeftActionButton(),w.default.createElement("h2",{className:"title"},this.props.label),this.renderMobileRightActionButton()),w.default.createElement("ul",{className:"document-tags__tags-list"},t)))}}]),n}(w.Component),(0,y.default)(i.prototype,"onTagInputFocus",[E.autobind,o],Object.getOwnPropertyDescriptor(i.prototype,"onTagInputFocus"),i.prototype),(0,y.default)(i.prototype,"onMouseDownInsertButton",[E.autobind,u],Object.getOwnPropertyDescriptor(i.prototype,"onMouseDownInsertButton"),i.prototype),(0,y.default)(i.prototype,"searchTagValue",[E.autobind,l],Object.getOwnPropertyDescriptor(i.prototype,"searchTagValue"),i.prototype),i),A=(0,O.connect)((function(e){return{isSignedIn:e.auth.user.isSignedIn||!1,role:e.auth.user.attributes?e.auth.user.attributes.role:null,tags:e.TagsReducer.tags||{},suggestions:e.TagsReducer.suggestions||[],editingStatus:e.TagsReducer.editingStatus||[],editableStatus:e.TagsReducer.editableStatus||[],removeStatus:e.TagsReducer.removeStatus||[],fetchTagsStatus:e.TagsReducer.fetchTagsStatus}}))(x);t.default=A},1714:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(232)),u=r(n(35)),l=r(n(36)),i=r(n(331)),c=r(n(96)),s=r(n(97)),d=r(n(85)),f=r(n(7)),p=g(n(0)),m=(r(n(6)),r(n(1531))),h=r(n(13)),v=g(n(1603));function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}function g(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var O=function(e){(0,c.default)(n,e);var t=w(n);function n(e){var r;return(0,u.default)(this,n),r=t.call(this,e),(0,f.default)((0,i.default)(r),"onSuggestionsFetchRequested",(function(){})),(0,f.default)((0,i.default)(r),"onSuggestionsClearRequested",(function(){r.maybeUpdateSuggestionSelected(!1)})),(0,f.default)((0,i.default)(r),"onSuggestionHighlighted",(function(e){var t=e.suggestion;r.maybeUpdateSuggestionSelected(!!t)})),(0,f.default)((0,i.default)(r),"onSuggestionSelected",(function(e,t){var n=t.suggestionValue;r.maybeUpdateSuggestionSelected(!1),r.updateInputValue(n,{forceUpdate:!0})})),(0,f.default)((0,i.default)(r),"onInputCompositionStart",(function(){r.isComposingFlag=!0})),(0,f.default)((0,i.default)(r),"onInputCompositionEnd",(function(){r.isComposingFlag=!1})),(0,f.default)((0,i.default)(r),"onInputValueChange",(function(e,t){var n=t.newValue,a=t.method;r.maybeUpdateSuggestionSelected(!1);var o=r.isComposing(e);switch(a){case"enter":case"escape":case"type":r.updateInputValue(n,{forceUpdate:!0,isComposing:o})}})),(0,f.default)((0,i.default)(r),"onInputFocus",(function(){r.maybeUpdateSuggestionSelected(!1),r.props.onInputFocus&&r.props.onInputFocus(r.props.value,r.props.position)})),(0,f.default)((0,i.default)(r),"onInputBlur",(function(){r.maybeUpdateSuggestionSelected(!1),r.props.onInputBlur&&r.props.onInputBlur(r.props.value,r.props.position)})),(0,f.default)((0,i.default)(r),"onInputKeyDown",(function(e){switch(e.key){case"ArrowDown":case"ArrowUp":default:break;case"Enter":229===e.keyCode||r.state.isSuggestionSelected||(e.target.blur(),r.maybeUpdateSuggestionSelected(!1))}})),(0,f.default)((0,i.default)(r),"onLinkClick",(function(){r.props.onLinkClick&&r.props.onLinkClick(r.props.value)})),(0,f.default)((0,i.default)(r),"getSuggestionValue",(function(e){return e})),(0,f.default)((0,i.default)(r),"maybeAutoFocusTagInput",(function(){r.shouldAutoFocusTagInput&&r.focusTagInput()})),(0,f.default)((0,i.default)(r),"isComposing",(function(e){if(void 0!==e.isComposing)return e.isComposing;if(e.nativeEvent){if(void 0!==e.nativeEvent.isComposing)return e.nativeEvent.isComposing;if(void 0!==e.nativeEvent.inputType)return"insertCompositionText"===e.nativeEvent.inputType}return r.isComposingFlag})),(0,f.default)((0,i.default)(r),"updateInputValue",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};v.updateTagValueByPosition()(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,f.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({value:e,position:r.props.position},t))})),(0,f.default)((0,i.default)(r),"maybeUpdateSuggestionSelected",(function(e){r.state.isSuggestionSelected!==e&&r.setState({isSuggestionSelected:e})})),(0,f.default)((0,i.default)(r),"subscribeInput",(function(e){e&&(r.documentTag=e.input)})),(0,f.default)((0,i.default)(r),"focusTagInput",(function(){r.documentTag&&r.documentTag.input&&r.documentTag.input.focus()})),(0,f.default)((0,i.default)(r),"renderSuggestion",(function(e){return p.default.createElement("span",{className:"document-tag__suggestion"},r.getSuggestionValue(e))})),(0,f.default)((0,i.default)(r),"renderInputComponent",(function(e){var t=r.props.isNewTag,n=(0,h.default)("document-tag__input-wrapper",{isNewTag:t}),a=(0,h.default)("document-tag__tag",{isNewTag:t}),u=t?r.focusTagInput:r.onLinkClick,l=p.default.createElement("input",(0,o.default)({},e,{disabled:!r.props.isEditable})),i=p.default.createElement("a",{className:a,onClick:u},e.value);return p.default.createElement("div",{className:n},r.props.isEditable&&l,!r.props.isEditable&&i)})),r.state={isSuggestionSelected:!1},r.isComposingFlag=!1,r}return(0,l.default)(n,[{key:"componentDidMount",value:function(){this.maybeAutoFocusTagInput()}},{key:"componentDidUpdate",value:function(){this.maybeAutoFocusTagInput()}},{key:"shouldAutoFocusTagInput",get:function(){return this.props.isEditing&&"INPUT"!==document.activeElement.tagName}},{key:"render",value:function(){var e={value:this.props.value,type:"text",autoFocus:this.props.autoFocus&&""===this.props.value,onChange:this.onInputValueChange,onFocus:this.onInputFocus,onBlur:this.onInputBlur,onKeyDown:this.onInputKeyDown,onCompositionStart:this.onInputCompositionStart,onCompositionEnd:this.onInputCompositionEnd};return p.default.createElement(m.default,{suggestions:this.props.suggestions,onSuggestionsFetchRequested:this.onSuggestionsFetchRequested,onSuggestionsClearRequested:this.onSuggestionsClearRequested,onSuggestionHighlighted:this.onSuggestionHighlighted,getSuggestionValue:this.getSuggestionValue,renderSuggestion:this.renderSuggestion,renderInputComponent:this.renderInputComponent,inputProps:e,onSuggestionSelected:this.onSuggestionSelected,focusInputOnSuggestionClick:!0,shouldRenderSuggestions:function(){return!0},theme:n.theme,ref:this.subscribeInput})}}],[{key:"theme",get:function(){return{container:"document-tag-autosuggest__container",containerOpen:"document-tag-autosuggest__container--open",input:"document-tag-autosuggest__input",inputOpen:"document-tag-autosuggest__input--open",inputFocused:"document-tag-autosuggest__input--focused",suggestionsContainer:"document-tag-autosuggest__suggestions-container",suggestionsContainerOpen:"document-tag-autosuggest__suggestions-container--open",suggestionsList:"document-tag-autosuggest__suggestions-list",suggestion:"document-tag-autosuggest__suggestion",suggestionFirst:"document-tag-autosuggest__suggestion--first",suggestionHighlighted:"document-tag-autosuggest__suggestion--highlighted",sectionContainer:"document-tag-autosuggest__section-container",sectionContainerFirst:"document-tag-autosuggest__section-container--first",sectionTitle:"document-tag-autosuggest__section-title"}}}]),n}(p.Component);t.default=O},1715:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,u,l=r(n(35)),i=r(n(36)),c=r(n(331)),s=r(n(96)),d=r(n(97)),f=r(n(85)),p=r(n(7)),m=r(n(1515)),h=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(0)),v=r(n(579)),y=r(n(1516)),g=r(n(539));function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,d.default)(this,n)}}var O="pdfjs",k="pdfjsViewer",_="2.6.347",P="https://cdn.jsdelivr.net/npm/pdfjs-dist@".concat(_,"/build/pdf.min.js"),j="https://cdn.jsdelivr.net/npm/pdfjs-dist@".concat(_,"/build/pdf.worker.min.js"),S="https://cdn.jsdelivr.net/npm/pdfjs-dist@".concat(_,"/web/pdf_viewer.js"),E=y.default.div(o||(o=(0,m.default)(["\n  .page {\n    position: relative;\n  }\n  .textLayer > span {\n    position: absolute;\n    transform-origin: 0% 0%;\n    color: transparent;\n  }\n"]))),C=function(e){(0,s.default)(n,e);var t=w(n);function n(e){var r;return(0,l.default)(this,n),r=t.call(this,e),(0,p.default)((0,c.default)(r),"viewerDom",h.default.createRef()),(0,p.default)((0,c.default)(r),"eventBus",void 0),(0,p.default)((0,c.default)(r),"loadPDFDocument",(function(e){return r.eventBus=new pdfjsViewer.EventBus,e.fileUrl?pdfjsLib.getDocument(e.fileUrl).promise.then(r.renderPages).then((function(){return r.setState({loading:!1})})):Promise.resolve()})),(0,p.default)((0,c.default)(r),"getPageProps",(function(e,t){return{container:r.viewerDom.current,id:e,scale:r.props.scale,defaultViewport:t.getViewport({scale:r.props.scale}),annotationLayerFactory:new pdfjsViewer.DefaultAnnotationLayerFactory,textLayerFactory:new pdfjsViewer.DefaultTextLayerFactory,renderInteractiveForms:!0,eventBus:r.eventBus}})),(0,p.default)((0,c.default)(r),"createPage",(function(e){return function(t){var n=new pdfjsViewer.PDFPageView(r.getPageProps(e,t));return n.setPdfPage(t),n.draw()}})),(0,p.default)((0,c.default)(r),"renderPages",(function(e){if(!r.viewerDom.current)return Promise.resolve();for(var t=[],n=1;n<=e.numPages;n+=1){var a=e.getPage(n).then(r.createPage(n));t.push(a)}return Promise.all(t)})),(0,v.default)([P],O),v.default.ready(O,(function(){pdfjsLib.GlobalWorkerOptions.workerSrc=j,(0,v.default)([S],k)})),r.state={loading:!1},r}return(0,i.default)(n,[{key:"componentDidMount",value:function(){var e=this;v.default.ready(k,(function(){e.setState({loading:!0}),e.loadPDFDocument(e.props)}))}},{key:"componentDidUpdate",value:function(e){var t=this;this.props.fileUrl&&this.props.fileUrl!==e.fileUrl&&v.default.ready(k,(function(){t.loadPDFDocument(t.props)}))}},{key:"render",value:function(){return h.default.createElement(h.default.Fragment,null,this.state.loading&&(u||(u=h.default.createElement(g.default,{key:"loading",message:"讀取中..."}))),h.default.createElement(E,{ref:this.viewerDom}))}}]),n}(h.Component);t.default=C,(0,p.default)(C,"defaultProps",{scale:1})},1716:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,u=r(n(0)),l=n(1513),i=p(n(550)),c=p(n(333)),s=r(n(553)),d=r(n(20));function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function p(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}function m(e){d.default.logTagAction(c.TAG_ACTION_CLICK_RESULT,e.currentTarget.dataset.tag)}function h(e){var t=e.tag,n=new s.default(i.HASHTAG_SYMBOL+t).toString();return u.default.createElement("li",{key:t,className:"search-result__related-tags-list-item"},u.default.createElement(l.Link,{"data-tag":t,to:n,onClick:m,className:"tag-symbol"},t))}function v(e){return e.tags&&e.tags.length?u.default.createElement("section",{className:"search-result__container search-result__item-container search-result__related-tags-container"},o||(o=u.default.createElement("h4",{className:"title search-result__related-tags-title"},"您做過的相關標籤")),u.default.createElement("ul",{className:"search-result__related-tags-list"},e.tags.map((function(e){return u.default.createElement(h,{key:e,tag:e})})))):null}function y(e,t){var n,r;return(null===(n=e.tags)||void 0===n?void 0:n.join(" "))===(null===(r=t.tags)||void 0===r?void 0:r.join(" "))}var g=u.default.memo(v,y);t.default=g},1717:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,u,l,i=r(n(35)),c=r(n(36)),s=r(n(331)),d=r(n(96)),f=r(n(97)),p=r(n(85)),m=r(n(7)),h=C(n(0)),v=n(152),y=n(27),g=r(n(13)),b=r(n(1527)),w=r(n(1604)),O=r(n(1633)),k=r(n(1718)),_=r(n(1650)),P=r(n(1622)),j=r(n(20)),S=C(n(535));function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(E=function(e){return e?n:t})(e)}function C(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=E(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,p.default)(e);if(t){var a=(0,p.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.default)(this,n)}}var R=function(e){(0,d.default)(n,e);var t=I(n);function n(){var e;(0,i.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,m.default)((0,s.default)(e),"handleFilterTabClick",(function(t){var n=t.currentTarget.id,r=e.props.match.params.keywords;j.default.logSearchResultType(n,r)})),e}return(0,c.default)(n,[{key:"getDocumentTitle",get:function(){return this.props.match.params.keywords&&P.default.safelyDecodeUriComponent(this.props.match.params.keywords)||"搜尋結果"}},{key:"reachSearchLimit",get:function(){return this.props.searchResultIsReady&&this.props.reachViewLimit}},{key:"render",value:function(){var e=this.props,t=e.match.params,n=e.isScrollAtTop,r=(null==t?void 0:t.searchType)||null,a=(null==t?void 0:t.keywords)&&P.default.safelyDecodeUriComponent(t.keywords)||null,i=(0,g.default)("flex-box-horizon search-result__filter-bar-container",{"is-safari":navigator.userAgent.indexOf("Safari")>-1&&navigator.userAgent.indexOf("Chrome")<0});return h.default.createElement(b.default,{title:this.getDocumentTitle||document.title},h.default.createElement("div",{className:"fullHeight"},h.default.createElement(w.default,{boxShadow:!n,searchType:r,defaultKeyword:a}),h.default.createElement("div",{className:"header-bar__searchbar search-result__searchbar"},h.default.createElement(O.default,{searchType:r,defaultKeyword:a})),o||(o=h.default.createElement("hr",{className:"horizon-line document__top-divider"})),h.default.createElement("div",{className:i},h.default.createElement(k.default,{searchType:r,keywords:a,onClickTab:this.handleFilterTabClick})),u||(u=h.default.createElement("hr",{className:"horizon-line"})),this.props.children,h.default.createElement(_.default,{mode:"search",viewLimit:this.reachSearchLimit}),l||(l=h.default.createElement("div",{className:"dummy"}))))}}]),n}(h.Component),T=(0,y.withRouter)((0,v.connect)((function(e){var t;return{reachViewLimit:(null===(t=e.SearchReducer.searchResult)||void 0===t?void 0:t.searchLimit)||!1,searchResultIsReady:S.isReady(e.SearchReducer.fetchSearchResultStatus),isScrollAtTop:0===e.PageCommonUsageReducer.scrollTop}}))(R));t.default=T},1718:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,u,l,i=r(n(232)),c=r(n(0)),s=n(1513),d=r(n(13)),f=r(n(1528)),p=v(n(336)),m=v(n(338));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function v(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}function y(e){var t=e.className,n=e.onClick;return c.default.createElement("div",{className:"".concat(t," hide-in-tablet hide-in-desktop"),onClick:n},o||(o=c.default.createElement("i",{className:"arrow-icon"})))}function g(e){var t=e.searchType,n=e.keywords,r=e.onClickTab,a=e.type,o=e.name,u=(0,d.default)("search-result__filter-tab",{selected:a===t}),l=m.escapeReservedChar(encodeURI(n)),i={type:a,keywords:n,name:o,onClick:r,className:u,to:{pathname:"/search/".concat(a,"/").concat(l)},id:a};return c.default.createElement(s.Link,i,o)}var b=c.default.memo(g),w=[{breakpoint:767,settings:5},{breakpoint:768,settings:"unslick"},{breakpoint:Number.MAX_SAFE_INTEGER,settings:"unslick"}];function O(e){return c.default.createElement(f.default,{dots:!1,speed:400,infinite:!1,slidesToShow:1,slidesToScroll:1,initialSlide:0,variableWidth:!0,swipeToSlide:!0,nextArrow:u||(u=c.default.createElement(y,null)),prevArrow:l||(l=c.default.createElement(y,null)),responsive:w},p.SEARCH_SUPPORT_TYPES.map((function(t){return c.default.createElement("div",{key:t.type,className:"flex-fixed-item search-result__filter-tab-wrapper"},c.default.createElement(b,(0,i.default)({},t,e)))})))}var k=c.default.memo(O);t.default=k},1719:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(232)),u=r(n(35)),l=r(n(36)),i=r(n(331)),c=r(n(96)),s=r(n(97)),d=r(n(85)),f=r(n(7)),p=_(n(0)),m=n(152),h=n(27),v=r(n(13)),y=r(n(1517)),g=r(n(1518)),b=r(n(1533)),w=_(n(336)),O=r(n(536));function k(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(k=function(e){return e?n:t})(e)}function _(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=k(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}function j(e){var t=p.default.createElement(y.default,{id:"tooltip",bsClass:"hint",className:"hide-in-mobile hide-in-tablet hidden-print"},e.tooltipTitle&&p.default.createElement("div",null,e.tooltipTitle),p.default.createElement("div",{className:"tooltip-highlight"},e.tooltipHighlight));return p.default.createElement(g.default,{placement:"bottom",overlay:t,key:e.name},p.default.createElement(b.default.Item,{key:e.name,active:e.isActive,onClick:e.onClick,id:e.code},e.name))}var S=function(e){(0,c.default)(n,e);var t=P(n);function n(){var e;(0,u.default)(this,n);for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return e=t.call.apply(t,[this].concat(a)),(0,f.default)((0,i.default)(e),"renderOptions",(function(t){var n=t.code===e.props.sortBy;return t.tooltipHighlight&&!e.props.isPaidUser?p.default.createElement(j,(0,o.default)({key:t.name},t,{onClick:e.props.onClick,isActive:n})):p.default.createElement(b.default.Item,{key:t.name,active:n,onClick:e.props.onClick,id:t.code},t.name)})),e}return(0,l.default)(n,[{key:"show",get:function(){return this.props.match.params&&w.SEARCH_SORT_SUPPORT_TYPES.includes(this.props.match.params.searchType)}},{key:"WrapperStyleName",get:function(){return(0,v.default)("flex-item search-result__sort-options-container",{"hide-in-mobile hide-in-tablet":!this.props.foundDocuments||this.props.isSignedIn&&this.props.isPaidUser})}},{key:"render",value:function(){return this.show?p.default.createElement("div",{className:this.WrapperStyleName},p.default.createElement(b.default,{className:"flex-item align-right search-result__sort-options"},w.SEARCH_SORT_OPTIONS.map(this.renderOptions))):null}}]),n}(p.Component),E=(0,h.withRouter)((0,m.connect)((function(e){var t,n;return{sortBy:e.SearchReducer.sortBy,isPaidUser:!!O.default.isPaidUser((null===(t=e.auth.user.attributes)||void 0===t?void 0:t.role)||null),isSignedIn:!!e.auth.user.isSignedIn,foundDocuments:(null===(n=e.SearchReducer.searchResult)||void 0===n?void 0:n.totalCount)>0}}))(S));t.default=E},1720:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(35)),u=r(n(36)),l=r(n(331)),i=r(n(96)),c=r(n(97)),s=r(n(85)),d=r(n(7)),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(0)),p=n(152),m=n(27),h=r(n(1721));function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}var g=function(e){(0,i.default)(n,e);var t=y(n);function n(){var e;(0,o.default)(this,n);for(var r=arguments.length,a=new Array(r),u=0;u<r;u++)a[u]=arguments[u];return e=t.call.apply(t,[this].concat(a)),(0,d.default)((0,l.default)(e),"getTimeValueForDisplay",(function(t){var n=e.props,r=n.min,a=n.max;return t===r?"16年":t===a?"最新":"".concat(85+t,"年")})),e}return(0,u.default)(n,[{key:"show",get:function(){return"law"!==this.props.match.params.searchType}},{key:"filterMinLabel",get:function(){return this.getTimeValueForDisplay(this.props.currentMin)}},{key:"filterMaxLabel",get:function(){return this.getTimeValueForDisplay(this.props.currentMax)}},{key:"render",value:function(){if(!this.show)return null;var e=this.props,t=e.min,n=e.max,r=e.currentMin,a=e.currentMax,o=e.onChange,u=e.onStop;return f.default.createElement("div",{className:"flex-item search-result__time-slider"},f.default.createElement("div",{className:"search-slider"},f.default.createElement(h.default,{min:t,max:n,value:[r,a],handleChange:o,slideStop:u,tooltip:"hide"}),f.default.createElement("span",{className:"search-slider-hint left"},this.filterMinLabel),f.default.createElement("span",{className:"search-slider-hint right"},this.filterMaxLabel)))}}]),n}(f.Component),b=(0,m.withRouter)((0,p.connect)((function(e){var t,n;return{min:e.SearchReducer.timeFilterMin,max:e.SearchReducer.timeFilterMax,currentMin:null===(t=e.SearchReducer.timeFilterValue)||void 0===t?void 0:t[0],currentMax:null===(n=e.SearchReducer.timeFilterValue)||void 0===n?void 0:n[1]}}))(g));t.default=b},1721:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(35)),u=r(n(36)),l=r(n(331)),i=r(n(96)),c=r(n(97)),s=r(n(85)),d=r(n(7)),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(0)),p=r(n(1563));function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,d.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}var g=function(e){(0,i.default)(n,e);var t=y(n);function n(){var e;(0,o.default)(this,n);for(var r=arguments.length,a=new Array(r),u=0;u<r;u++)a[u]=arguments[u];return e=t.call.apply(t,[this].concat(a)),(0,d.default)((0,l.default)(e),"mySlider",void 0),(0,d.default)((0,l.default)(e),"input",f.default.createRef()),(0,d.default)((0,l.default)(e),"updateSliderValues",(function(){e.mySlider.min&&e.mySlider.setAttribute("min",e.props.min),e.mySlider.max&&e.mySlider.setAttribute("max",e.props.max),e.mySlider.setValue(e.props.value),e.mySlider.isEnabled()||e.mySlider.enable()})),e}return(0,u.default)(n,[{key:"componentDidMount",value:function(){var e=this,t=this,n=v(v({},this.props),{},{tooltip:this.props.tooltip||"show"});this.mySlider=new p.default(this.input.current,n),this.updateSliderValues(),this.props.handleChange&&this.mySlider.on("change",(function(t){var n={target:{value:t.newValue}};e.props.handleChange(n)})),this.props.slideStop&&this.mySlider.on("slideStop",(function(e){var n={target:{value:e}};t.props.slideStop(n)}))}},{key:"componentDidUpdate",value:function(){this.updateSliderValues()}},{key:"render",value:function(){return f.default.createElement("input",{ref:this.input})}}]),n}(f.Component);t.default=g},1722:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(232)),u=r(n(35)),l=r(n(36)),i=r(n(96)),c=r(n(97)),s=r(n(85)),d=w(n(0)),f=n(152),p=n(27),m=r(n(1517)),h=r(n(1518)),v=r(n(1533)),y=w(n(336)),g=r(n(536));function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}function w(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}function k(e){var t=e.onClick,n=e.item,r=e.active,a=e.isPaidUser,o=n.code,u=n.tooltipTitle,l=n.tooltipHighlight,i=n.name,c=d.default.createElement(m.default,{id:"tooltip",bsClass:"hint",className:"hide-in-mobile hide-in-tablet hidden-print"},d.default.createElement("div",null,u),!a&&d.default.createElement("div",{className:"tooltip-highlight"},l));return d.default.createElement(h.default,{placement:"bottom",overlay:c},d.default.createElement(v.default.Item,{active:o===r,onClick:t,id:o},i))}function _(e){var t=e.onClick,n=e.item,r=e.active,a=n.code,o=n.tooltipTitle,u=n.name;return o?d.default.createElement(k,e):d.default.createElement(v.default.Item,{active:a===r,onClick:t,id:a},u)}var P=function(e){(0,i.default)(n,e);var t=O(n);function n(){return(0,u.default)(this,n),t.apply(this,arguments)}return(0,l.default)(n,[{key:"show",get:function(){return this.props.match.params&&y.SEARCH_OPTIONS_SUPPORT_TYPES.includes(this.props.match.params.searchType)}},{key:"isSearchTypeSupportSectionOptions",get:function(){return this.props.match.params&&y.SEARCH_SECTIONS_SUPPORT_TYPES.includes(this.props.match.params.searchType)}},{key:"render",value:function(){var e=this;return this.show?d.default.createElement("div",{className:"search-result__option flex-item search-result__judgement-section-options hide-in-mobile hide-in-tablet"},d.default.createElement(v.default,{className:"result-line"},y.SEARCH_SECTIONS_OPTIONS.map((function(t){return d.default.createElement(_,(0,o.default)({},e.props,{active:e.isSearchTypeSupportSectionOptions&&e.props.judgementSection||null,item:t,key:t.name}))})))):null}}]),n}(d.Component),j=(0,p.withRouter)((0,f.connect)((function(e){var t;return{judgementSection:e.SearchReducer.judgementSection,isPaidUser:!!g.default.isPaidUser((null===(t=e.auth.user.attributes)||void 0===t?void 0:t.role)||null)}}))(P));t.default=j},1723:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(35)),u=r(n(36)),l=r(n(331)),i=r(n(96)),c=r(n(97)),s=r(n(85)),d=r(n(7)),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=w(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(0)),p=n(152),m=n(27),h=r(n(1622)),v=r(n(1724)),y=r(n(1609)),g=r(n(534)),b=r(n(20));function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(w=function(e){return e?n:t})(e)}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}var k=function(e){(0,i.default)(n,e);var t=O(n);function n(){var e;(0,o.default)(this,n);for(var r=arguments.length,a=new Array(r),u=0;u<r;u++)a[u]=arguments[u];return e=t.call.apply(t,[this].concat(a)),(0,d.default)((0,l.default)(e),"onClickSearchResult",(function(t){var n=e.props.match.params,r=t.currentTarget.value,a=n.page>=1?Math.floor(n.page):0,o=t.currentTarget.id,u=h.default.safelyDecodeUriComponent(n.keywords);y.default.setSearchKeyword(u),b.default.logSearchResultClick(u,r,a.toString(),o,n.searchType)})),(0,d.default)((0,l.default)(e),"renderItem",(function(t){return f.default.createElement(v.default,{key:"".concat(t.type,"-").concat(t.id).concat(t.issueId||""),timeHash:e.TimeHash,onClick:e.onClickSearchResult,item:t,isSignedIn:e.props.isSignedIn,role:e.props.role})})),e}return(0,u.default)(n,[{key:"TimeHash",get:function(){return"t=".concat(g.default.getDailyTimeHash())}},{key:"render",value:function(){return this.props.searchResult.map(this.renderItem)}}]),n}(f.Component),_=(0,m.withRouter)((0,p.connect)((function(e){var t,n;return{searchResult:(null===(t=e.SearchReducer.searchResult)||void 0===t?void 0:t.results)||[],isSignedIn:!!e.auth.user.isSignedIn,role:(null===(n=e.auth.user.attributes)||void 0===n?void 0:n.role)||null}}))(k));t.default=_},1724:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.JudgementLastView=N,t.JudgementRefCount=M,t.default=void 0;var o,u,l,i,c,s=r(n(35)),d=r(n(36)),f=r(n(331)),p=r(n(96)),m=r(n(97)),h=r(n(85)),v=r(n(7)),y=R(n(0)),g=n(1513),b=r(n(1607)),w=n(1655),O=r(n(1656)),k=R(n(333)),_=R(n(336)),P=R(n(550)),j=r(n(20)),S=r(n(1651)),E=r(n(534)),C=r(n(553));function I(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(I=function(e){return e?n:t})(e)}function R(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=I(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.default)(e);if(t){var a=(0,h.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,m.default)(this,n)}}function M(e){var t=e.refCount,n=e.locked,r=e.type;switch(!0){case!t||t<=0:return null;case n&&r!==_.LAW:return o||(o=y.default.createElement(S.default,{className:"search-result__item-misc locked"},"被引用次數"));default:return y.default.createElement("div",{className:"search-result__item-misc"},"被引用 ",t," 次")}}function N(e){var t=e.last,n=e.locked,r=e.type;switch(!0){case!t:return null;case n&&r!==_.LAW:return y.default.createElement(S.default,{className:"search-result__item-misc locked",required:"proplan",featureName:k.GO_PAYMENT_THRU_DOCUMENT_LAST_VISITED_PAGE},"上次瀏覽時間");default:var a=E.default.getChineseCalendarDate(t,"/");return y.default.createElement("div",{className:"search-result__item-misc"},"上次瀏覽日期: ",a)}}function D(e){var t;return e.diamond&&(t=u||(u=y.default.createElement(O.default,{hoverMessage:"大法庭裁判、原判例、具參考價值裁判或足資討論裁判"}))),!1===e.diamond&&(t=l||(l=y.default.createElement(w.DisabledPrecedentIcon,{slim:!0}))),t?y.default.createElement("div",{className:"search-result__item-title"},e.children,t):y.default.createElement(y.default.Fragment,null,e.children)}function x(e){return new C.default(P.HASHTAG_SYMBOL+e).toString()}function A(e){var t=e.currentTarget.dataset.tag;j.default.logTagAction(k.TAG_ACTION_CLICK_RESULT,t)}function L(e){var t;return null!==(t=e.tags)&&void 0!==t&&t.length?y.default.createElement("ul",{className:"search-result__item-tags-list"},e.tags.map((function(e){return y.default.createElement("li",{key:e,className:"search-result__item-tags-item"},y.default.createElement(g.Link,{"data-tag":e,className:"document-tag__tag",onClick:A,to:x(e)},e))}))):null}function B(e){var t;if(null===(t=e.briefs)||void 0===t||!t.length)return null;var n={__html:e.briefs.join(" ... ")};return y.default.createElement("div",{className:"search-result__item-brief",dangerouslySetInnerHTML:n})}var U=function(e){(0,p.default)(n,e);var t=T(n);function n(){var e;(0,s.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,v.default)((0,f.default)(e),"onClickTitle",(function(t){var n=e.props.item;e.isSearchDocTag&&j.default.logTagAction(k.TAG_ACTION_CLICK_LIST,n.title),e.props.onClick&&e.props.onClick(t)})),e}return(0,d.default)(n,[{key:"isSearchDocTag",get:function(){var e,t;return(null===(e=this.props)||void 0===e||null===(t=e.item)||void 0===t?void 0:t.type)===_.DOC_TAG}},{key:"userInfo",get:function(){return{isSignedIn:this.props.isSignedIn,role:this.props.role}}},{key:"hasBrief",get:function(){var e,t;return!(null===(e=this.props.item)||void 0===e||null===(t=e.briefs)||void 0===t||!t.length)}},{key:"itemLink",get:function(){var e=this.props,t=e.item,n=e.timeHash,r=t.issueId?"/issue/".concat(t.issueId):"";return t.type===_.DOC_TAG?x(t.title):"/".concat(t.type,"/").concat(t.id).concat(r,"?").concat(n)}},{key:"showDivider",get:function(){return this.hasBrief&&(b.default.AllowFreeUser(this.userInfo)||b.default.AllowProPlanUser(this.userInfo))}},{key:"render",value:function(){var e=this.props.item;return y.default.createElement("div",{className:"search-result__container search-result__result-list"},y.default.createElement("div",{className:"search-result__item-container ".concat(e.type)},y.default.createElement("div",{className:"search-result__item-title-container"},y.default.createElement(g.Link,{className:"search-result__item-link",to:this.itemLink,value:this.props.item.title,onClick:this.onClickTitle},y.default.createElement(D,{diamond:e.isValuable},e.title))),i||(i=y.default.createElement("hr",{className:"horizon-line search-result__item-divider"})),y.default.createElement(B,{briefs:e.briefs}),y.default.createElement(L,{tags:e.docTags}),this.showDivider&&(c||(c=y.default.createElement("hr",{className:"horizon-line search-result__item-divider"}))),y.default.createElement(M,{refCount:e.refCount,type:e.type,locked:!b.default.AllowFreeUser(this.userInfo)}),y.default.createElement(N,{last:e.last,type:e.type,locked:!b.default.AllowProPlanUser(this.userInfo)})))}}]),n}(y.PureComponent);t.default=U},1725:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,u=r(n(35)),l=r(n(36)),i=r(n(331)),c=r(n(96)),s=r(n(97)),d=r(n(85)),f=r(n(7)),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=w(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(0)),m=n(152),h=n(27),v=r(n(1565)),y=n(546),g=r(n(20)),b=r(n(1622));function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(w=function(e){return e?n:t})(e)}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var k=function(e){(0,c.default)(n,e);var t=O(n);function n(){var e;(0,u.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,f.default)((0,i.default)(e),"getPagesRange",(function(){var t=e.paginationStart;return Array(e.paginationEnd-e.paginationStart+1).fill(0).map((function(e,n){return t+n}))})),(0,f.default)((0,i.default)(e),"onClick",(function(t){var n=Number(t.target.dataset.page);if(n){var r=n>=1?n:0;e.gotoNextPage(r)}return!1})),(0,f.default)((0,i.default)(e),"onClickNavigation",(function(t){return function(n){n.stopPropagation(),e.gotoNextPage(t)}})),(0,f.default)((0,i.default)(e),"createPageItem",(function(t){var n=e.props.page+1===t;return p.default.createElement(v.default.Item,{key:t,"data-page":t,active:n},t)})),e}return(0,l.default)(n,[{key:"isFirst",get:function(){return 1===this.current}},{key:"isLast",get:function(){return this.current===this.total}},{key:"calcPages",get:function(){var e=this.props,t=e.totalCount,n=e.size,r=e.maxWindow;if(0===t||0===n||0===r)return 0;var a=Math.min(r,t)||0;return Math.ceil(a/n)}},{key:"haveToPagination",get:function(){var e=this.props,t=e.totalCount,n=e.page,r=e.size;return!(t<=0||null===n||n<0||r<=0)}},{key:"total",get:function(){return!this.haveToPagination||this.calcPages<=1?0:this.calcPages>=1e3?1e3:this.calcPages}},{key:"current",get:function(){return this.props.page+1}},{key:"paginationStart",get:function(){var e=Math.trunc(5),t=this.current-e;return t<=0?1:t}},{key:"paginationEnd",get:function(){var e=this.paginationStart+10-1;return e>this.total?this.total:e}},{key:"gotoNextPage",value:function(e){var t=this.props.match.params,n=t.page>=1?Math.floor(t.page):0,r=t.size>=1?Math.floor(t.size):-1;if(t.keywords){var a=t.keywords,o=t.searchType;this.props.dispatch((0,y.searchDb)(b.default.safelyDecodeUriComponent(a),o,e,r))}g.default.logSearchOtherPage(n.toString(),e.toString())}},{key:"render",value:function(){if(!this.total)return null;var e=this.getPagesRange();return p.default.createElement("div",{className:"search-result__container search-result__pagination"},p.default.createElement(v.default,{onClickCapture:this.onClick},p.default.createElement(v.default.First,{disabled:this.isFirst,onClick:this.onClickNavigation(1)}),p.default.createElement(v.default.Prev,{disabled:this.isFirst,onClick:this.onClickNavigation(this.current-1)}),e.map(this.createPageItem),o||(o=p.default.createElement(v.default.Ellipsis,{disabled:!0})),p.default.createElement(v.default.Next,{disabled:this.isLast,onClick:this.onClickNavigation(this.current+1)}),p.default.createElement(v.default.Last,{disabled:this.isLast,onClick:this.onClickNavigation(this.total)})))}}]),n}(p.PureComponent),_=(0,h.withRouter)((0,m.connect)((function(e){var t,n,r,a,o,u,l,i;return{totalCount:null!==(t=null===(n=e.SearchReducer.searchResult)||void 0===n?void 0:n.totalCount)&&void 0!==t?t:0,maxWindow:null!==(r=null===(a=e.SearchReducer.searchResult)||void 0===a?void 0:a.totalCount)&&void 0!==r?r:0,page:null!==(o=null===(u=e.SearchReducer.searchResult)||void 0===u?void 0:u.page)&&void 0!==o?o:null,size:null!==(l=null===(i=e.SearchReducer.searchResult)||void 0===i?void 0:i.size)&&void 0!==l?l:0}}))(k));t.default=_},1726:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,u,l,i=r(n(35)),c=r(n(36)),s=r(n(96)),d=r(n(97)),f=r(n(85)),p=r(n(7)),m=_(n(0)),h=n(152),v=n(27),y=r(n(1518)),g=r(n(1517)),b=_(n(1603)),w=r(n(1607)),O=r(n(1660));function k(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(k=function(e){return e?n:t})(e)}function _(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=k(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,d.default)(this,n)}}function j(){return m.default.createElement("a",{className:"result-court",onClick:b.loginRequired},"裁判分佈 ▾")}var S=function(e){(0,s.default)(n,e);var t=P(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,c.default)(n,[{key:"show",get:function(){var e=this.props.match.params;return!(e&&!n.supportTypes.includes(e.searchType))}},{key:"featureUnlock",get:function(){return w.default.AllowFreeUser({isSignedIn:this.props.isSignedIn})}},{key:"Tooltip",get:function(){return m.default.createElement(g.default,{id:"tooltip",bsClass:"hint",className:"hide-in-mobile hide-in-tablet hidden-print"},"關鍵字在法院中比對到的筆數",!this.props.isSignedIn&&(o||(o=m.default.createElement("div",{className:"tooltip-highlight"},"登入免費享有此功能"))))}},{key:"render",value:function(){return m.default.createElement("div",{className:"flex-item search-result__result-distribution"},this.show&&m.default.createElement(y.default,{placement:"right",overlay:this.Tooltip},this.featureUnlock?u||(u=m.default.createElement(O.default,{show:!0})):l||(l=m.default.createElement(j,null))))}}]),n}(m.PureComponent);(0,p.default)(S,"supportTypes",["all","judgement"]);var E=(0,v.withRouter)((0,h.connect)((function(e){return{isSignedIn:!!e.auth.user.isSignedIn}}))(S));t.default=E},1727:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,u,l,i=r(n(35)),c=r(n(36)),s=r(n(331)),d=r(n(96)),f=r(n(97)),p=r(n(85)),m=r(n(7)),h=P(n(0)),v=n(152),y=n(27),g=r(n(1518)),b=r(n(1517)),w=r(n(335)),O=n(556),k=P(n(21));function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(_=function(e){return e?n:t})(e)}function P(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=_(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,p.default)(e);if(t){var a=(0,p.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.default)(this,n)}}var S=["598090de13541095efb6b8f8","5878e3eebed659000fa1c62f","59bf8d04bb10ae3a27bd2e46","5d4a3945bb8d59001c1f62d8","5c2d5f60c1b7f8001c6b48f5"],E=function(e){(0,d.default)(n,e);var t=j(n);function n(){var e;(0,i.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,m.default)((0,s.default)(e),"onClick",(function(t){t.currentTarget.blur(),e.props.searchResult.length&&e.props.dispatch((0,O.downloadProfileRequest)(e.props.role,e.props.searchResult))})),e}return(0,c.default)(n,[{key:"show",get:function(){return"judgement"===(this.props.match.params.searchType||null)&&this.props.userId&&S.includes(this.props.userId)}},{key:"downloadStatus",get:function(){var e;return(null===(e=this.props.downloadStatus)||void 0===e?void 0:e[this.props.role])||null}},{key:"isLoading",get:function(){return this.downloadStatus===k.STATUS_LOADING}},{key:"disabled",get:function(){return this.downloadStatus===k.STATUS_LOADING}},{key:"Tooltip",get:function(){return this.isLoading?o||(o=h.default.createElement(b.default,{id:"tooltip",bsClass:"hint",className:"hide-in-mobile hide-in-tablet hidden-print"},"下載中")):u||(u=h.default.createElement(b.default,{id:"tooltip",bsClass:"hint",className:"hide-in-mobile hide-in-tablet hidden-print"},"CSV下載"))}},{key:"render",value:function(){return this.show?h.default.createElement("div",{className:"search-result__container"},h.default.createElement(g.default,{placement:"bottom",overlay:this.Tooltip},h.default.createElement(w.default,{bsClass:"btn i-btn",onClick:this.onClick,id:"",disabled:this.disabled},l||(l=h.default.createElement("i",{className:"ant ant-download ant-small"}))))):null}}]),n}(h.Component),C=(0,y.withRouter)((0,v.connect)((function(e){var t,n,r;return{searchResult:((null===(t=e.SearchReducer.searchResult)||void 0===t?void 0:t.results)||[]).map((function(e){return e.id})),isSignedIn:!!e.auth.user.isSignedIn,role:(null===(n=e.auth.user.attributes)||void 0===n?void 0:n.role)||null,userId:(null===(r=e.auth.user.attributes)||void 0===r?void 0:r.uid)||null,downloadStatus:e.DownloadReducer.downloadStatus}}))(E));t.default=C},1728:function(e,t,n){"use strict";var r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,o,u,l,i,c,s,d=r(n(35)),f=r(n(36)),p=r(n(331)),m=r(n(96)),h=r(n(97)),v=r(n(85)),y=r(n(7)),g=r(n(1515)),b=r(n(0)),w=n(152),O=r(n(1516)),k=n(1629),_=r(n(1729)),P=n(555),j=r(n(1661)),S=r(n(128)),E=n(1730),C=r(n(20)),I=r(n(1734)),R=r(n(1735));function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,v.default)(e);if(t){var a=(0,v.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,h.default)(this,n)}}var M=O.default.div(a||(a=(0,g.default)(["\n  position: absolute;\n  margin: 0;\n  top: 0;\n  left: 820px;\n\n  @media screen and (max-width: ",") {\n    position: static;\n    margin: inherit;\n  }\n  @media screen and (min-width: ",") and (max-width: ",") {\n    margin: 0 0 15px;\n  }\n"])),k.LARGE_DEVICE_RESOLUTION,k.TABLET_DEVICE_RESOLUTION,k.LARGE_DEVICE_RESOLUTION),N=O.default.div(o||(o=(0,g.default)(["\n  margin: 0 0 15px 105px;\n\n  strong {\n    color: #f00;\n    font-weight: normal;\n  }\n\n  @media screen and (max-width: ",") {\n    width: auto;\n    margin-left: 0;\n    margin-right: 0;\n    margin-top: 0;\n  }\n"])),k.LARGE_DEVICE_RESOLUTION),D=O.default.div(u||(u=(0,g.default)(["\n  @media screen and (max-width: ",") {\n    margin: 0 10px 0px;\n    box-shadow: 2px 2px 4px 0 rgba(233, 233, 233, 0.5);\n\n    article {\n      width: auto;\n      min-height: 0;\n    }\n\n    .nav[role='tablist'],\n    nav span[data-trigger='show-more'] {\n      display: none;\n    }\n\n    nav a[data-trigger='go-to'] {\n      font-size: 14px;\n    }\n\n    p {\n      -webkit-line-clamp: 5;\n      -ms-line-clamp: 5;\n      -o-line-clamp: 5;\n      line-clamp: 5;\n    }\n  }\n  @media screen and (min-width: ",") and (max-width: ",") {\n    margin: 0 40px 15px;\n  }\n"])),k.LARGE_DEVICE_RESOLUTION,k.TABLET_DEVICE_RESOLUTION,k.LARGE_DEVICE_RESOLUTION),x=(0,O.default)(D).attrs({className:"hide-in-mobile hide-in-tablet"})(l||(l=(0,g.default)(["\n  display: flex;\n"]))),A=function(e){(0,m.default)(n,e);var t=T(n);function n(){var e;(0,d.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,y.default)((0,p.default)(e),"handleChangeLawyerDisplayId",(function(t){e.props.dispatch((0,P.onChangeDisplayId)(t))})),(0,y.default)((0,p.default)(e),"onClickCourseAction",(function(t){return function(n){switch(n.target.dataset.trigger||n.currentTarget.dataset.trigger){case"show-more":C.default.logViewCourse(t.name,e.props.lastSearchKeyword);break;case"go-to":C.default.logCourseSearch(t.name,e.props.lastSearchKeyword)}}})),(0,y.default)((0,p.default)(e),"renderCoursesInfoSection",(function(){var t;if(!e.props.showCourseInfo)return null;var n=3,r="";return(null===(t=e.props.coursesInfo)||void 0===t?void 0:t.length)>3&&(n=5,r="260px"),b.default.createElement(N,null,b.default.createElement(x,null,b.default.createElement(E.CourseIntro,{id:"college-course-intro"},e.props.coursesInfo.map((function(t){return b.default.createElement(E.CourseInfo,{key:t._id,name:t.name,transcript:t.transcript,lecturers:t.lecturers,totalLessons:t.lesson_count,description:t.description,lessons:t.lessons,thumbnail:t.thumbnail,lineClamp:n,minHeight:r,link:S.default.APP_COLLEGE,onClickNav:e.onClickCourseAction(t),poweredBy:i||(i=b.default.createElement(E.CollegeIcon,{imgSrc:"/logo-college.svg"}))})})))),b.default.createElement(D,{className:"hide-in-desktop"},b.default.createElement(E.CarouselCourseIntro,null,e.props.coursesInfo.map((function(t){return b.default.createElement("a",{"data-trigger":"go-to",key:t._id,href:"".concat(S.default.API_COLLEGE_COURSE,"/").concat(t._id),target:"_blank",rel:"noreferrer",onClick:e.onClickCourseAction(t)},b.default.createElement(E.CourseInfoBanner,{name:t.name,lecturers:t.lecturers,totalLessons:t.lesson_count,thumbnail:t.thumbnail,rounded:!0}))})))))})),e}return(0,f.default)(n,[{key:"render",value:function(){return this.props.showLawyerBlock?b.default.createElement(M,null,this.renderCoursesInfoSection(),b.default.createElement(N,null,b.default.createElement(j.default,{displayId:this.props.displayLawyerId,lawyers:this.props.lawyerList,onClickCandidate:this.handleChangeLawyerDisplayId}),c||(c=b.default.createElement(I.default,null)))):this.props.showTerminology?b.default.createElement(M,null,this.renderCoursesInfoSection(),s||(s=b.default.createElement(N,null,b.default.createElement(_.default,null),b.default.createElement(R.default,null)))):b.default.createElement(M,null,this.renderCoursesInfoSection())}}]),n}(b.default.PureComponent),L=(0,w.connect)((function(e){var t;return{lawyerList:e.LawyerInfoReducer.lawyers,displayLawyerId:e.LawyerInfoReducer.displayId,showLawyerBlock:e.LawyerInfoReducer.lawyers&&e.LawyerInfoReducer.lawyers.length>0,showTerminology:!!(e.SearchReducer.terms||[]).length,showCourseInfo:!!(e.CourseInfoReducer.courses||[]).length,coursesInfo:e.CourseInfoReducer.courses||[],lastSearchKeyword:(null===(t=e.SearchReducer.lastSearch)||void 0===t?void 0:t.keyword)||""}}))(A);t.default=L},1729:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(7)),u=r(n(35)),l=r(n(36)),i=r(n(331)),c=r(n(96)),s=r(n(97)),d=r(n(85)),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=w(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(0)),p=(r(n(6)),n(152)),m=r(n(1534)),h=r(n(1535)),v=r(n(1536)),y=n(1513),g=n(546),b=r(n(20));function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(w=function(e){return e?n:t})(e)}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var P=function(e){(0,c.default)(n,e);var t=_(n);function n(e){var r;return(0,u.default)(this,n),(r=t.call(this,e)).state={activeKey:0,terms:r.props.terms},r.onSelect=r.onSelect.bind((0,i.default)(r)),r.onClickRelatedDocs=r.onClickRelatedDocs.bind((0,i.default)(r)),r}return(0,l.default)(n,[{key:"onSelect",value:function(e){this.setState({activeKey:e});var t=e+1,n=this.props.terms[e].term;b.default.logSelectTermGroup(t,n)}},{key:"onClickRelatedDocs",value:function(e){this.props.dispatch((0,g.updateSearchOption)({judgementSection:"all"})),b.default.logTermRelatedDocs(e.target.id)}},{key:"renderTerm",value:function(e,t){var n=this.onClickRelatedDocs,r=t.map((function(t,r){return f.default.createElement("div",{className:"term-desc-block",key:t},f.default.createElement("div",{className:"term-desc"},t),f.default.createElement("div",{className:"text-right"},f.default.createElement(y.Link,{className:"term-more",onClick:n,id:"".concat(e,":").concat(r+1),to:{pathname:encodeURI("/search/judgement/term:".concat(r+1,":").concat(e))}},"相關裁判...")))}));return f.default.createElement("div",{className:"term-block"},f.default.createElement("div",{className:"term-title-block"},f.default.createElement("div",{className:"term-title"},e),f.default.createElement(y.Link,{className:"term-more",onClick:n,id:e,to:{pathname:encodeURI("/search/judgement/term:".concat(e))}},"此名詞相關裁判...")),r)}},{key:"render",value:function(){var e=this,t=this.props.terms;if(!(t instanceof Array)||0===t.length)return null;var n=[],r=[];return t.forEach((function(t,a){n.push(f.default.createElement(m.default.Pane,{key:a,eventKey:a},e.renderTerm(t.term,t.descriptions))),r.push(f.default.createElement(v.default,{key:a,eventKey:a},a+1))})),f.default.createElement(m.default.Container,{id:"terms",onSelect:this.onSelect,activeKey:this.state.activeKey},f.default.createElement("div",{className:"terms-block flex-box"},f.default.createElement(m.default.Content,{animation:!0},n),f.default.createElement(h.default,{bsStyle:"tabs",stacked:!0},r)))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.terms!==t.terms?k(k({},t),{},{activeKey:0,terms:e.terms}):null}}]),n}(f.Component),j=(0,p.connect)((function(e){return{terms:e.SearchReducer.terms||[]}}))(P);t.default=j},1730:function(e,t,n){"use strict";var r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"CarouselCourseIntro",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"CollegeIcon",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"CourseInfo",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"CourseInfoBanner",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"CourseIntro",{enumerable:!0,get:function(){return a.default}});var a=r(n(1731)),o=r(n(1663)),u=r(n(1662)),l=r(n(1732)),i=r(n(1733))},1731:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,i.useState)(0),n=(0,u.default)(t,2),r=n[0],a=n[1],o=(0,i.useCallback)((function(e){a(e)}),[r]),l=e.children,c=e.id;return i.default.createElement(s.default.Container,{id:c,onSelect:o,activeKey:r},i.default.createElement(h,null,i.default.createElement(p.ActiveCourseKeyCtx.Provider,{value:r},i.default.createElement(s.default.Content,{animation:!0},i.default.Children.map(l,(function(e,t){return i.default.createElement(s.default.Pane,{key:t,eventKey:t},e)})))),i.default.createElement(d.default,{bsStyle:"tabs",stacked:!0},Array(i.default.Children.count(l)).fill(0).map((function(e,t){return i.default.createElement(f.default,{key:t,eventKey:t},t+1)})))))};var o,u=r(n(153)),l=r(n(1515)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(0)),c=r(n(1516)),s=r(n(1534)),d=r(n(1535)),f=r(n(1536)),p=n(1662);function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}var h=c.default.section(o||(o=(0,l.default)(["\n  display: flex;\n"])))},1732:function(e,t,n){"use strict";var r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return l.default.createElement(i,null,l.default.createElement("img",{title:"Lawsnote 學院",src:e.imgSrc}),o||(o=l.default.createElement("figcaption",null,l.default.createElement("address",null,"Lawsnote 學院"))))};var a,o,u=r(n(1515)),l=r(n(0)),i=r(n(1516)).default.figure(a||(a=(0,u.default)(["\n  display: flex;\n  margin: 0;\n  align-items: center;\n  flex: 1 0;\n\n  img {\n    margin-right: 8px;\n  }\n\n  address {\n    margin: 0;\n  }\n"])))},1733:function(e,t,n){"use strict";var r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return a.default.createElement(o.Swiper,{spaceBetween:50,slidesPerView:1},a.default.Children.map(e.children,(function(e,t){return a.default.createElement(o.SwiperSlide,{key:t},e)})))};var a=r(n(0)),o=n(1566);n(1567),n(1568)},1734:function(e,t,n){"use strict";var r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(35)),o=r(n(36)),u=r(n(331)),l=r(n(96)),i=r(n(97)),c=r(n(85)),s=r(n(7)),d=r(n(0)),f=n(152),p=n(27),m=r(n(1528)),h=r(n(1661));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.default)(e);if(t){var a=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,i.default)(this,n)}}var y=function(e){(0,l.default)(n,e);var t=v(n);function n(){var e;(0,a.default)(this,n);for(var r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return e=t.call.apply(t,[this].concat(o)),(0,s.default)((0,u.default)(e),"renderLawyerItem",(function(e){return d.default.createElement("div",{className:"flex-fixed-item lawyerInfo_block",key:e._id},d.default.createElement(h.default.Profile,e))})),e}return(0,o.default)(n,[{key:"show",get:function(){var e=this.props,t=e.lawyerList,n=e.match.params;return n&&"all"===n.searchType&&Array.isArray(t)&&t.length>0}},{key:"render",value:function(){if(!this.show)return null;var e={dots:!0,arrows:!1,speed:400,infinite:this.props.lawyerList.length>1,slidesToShow:1,slidesToScroll:1,dotsClass:"carousel-terms__dots",className:"search-result__carousel-terms-container carousel-terms"};return d.default.createElement("div",{className:"search-result__item-container carousel"},d.default.createElement(m.default,e,this.props.lawyerList.map(this.renderLawyerItem)))}}]),n}(d.default.Component),g=(0,p.withRouter)((0,f.connect)((function(e){return{lawyerList:e.LawyerInfoReducer.lawyers}}))(y));t.default=g},1735:function(e,t,n){"use strict";var r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,o=r(n(35)),u=r(n(36)),l=r(n(331)),i=r(n(96)),c=r(n(97)),s=r(n(85)),d=r(n(7)),f=r(n(0)),p=n(152),m=n(27),h=r(n(1528));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}var y=function(e){(0,i.default)(n,e);var t=v(n);function n(){var e;(0,o.default)(this,n);for(var r=arguments.length,a=new Array(r),u=0;u<r;u++)a[u]=arguments[u];return e=t.call.apply(t,[this].concat(a)),(0,d.default)((0,l.default)(e),"makeTermDescs",(function(){var t=e.termProfile,n=t.title;return t.desc.map((function(e){return f.default.createElement("div",{key:e,className:"flex-fixed-item term-block"},n+e)}))})),e}return(0,u.default)(n,[{key:"hasTerms",get:function(){var e=this.props.terms;return e&&Array.isArray(e)&&e.length>0}},{key:"isSearchAll",get:function(){return"all"===this.props.match.params.searchType}},{key:"show",get:function(){return this.hasTerms&&this.isSearchAll&&this.props.isFirstPage}},{key:"termProfile",get:function(){var e,t;return{title:null===(e=this.props.terms)||void 0===e?void 0:e[0].term,desc:(null===(t=this.props.terms)||void 0===t?void 0:t[0].descriptions)||[]}}},{key:"render",value:function(){if(!this.show)return null;var e=this.makeTermDescs();return f.default.createElement("section",{className:"search-result__item-container carousel"},a||(a=f.default.createElement("h4",{className:"title"},"關鍵字名詞解釋")),f.default.createElement(h.default,{dots:!0,arrows:!1,speed:400,infinite:e.length>1,slidesToShow:1,slidesToScroll:1,dotsClass:"carousel-terms__dots",className:"search-result__carousel-terms-container carousel-terms"},e))}}]),n}(f.default.PureComponent),g=(0,m.withRouter)((0,p.connect)((function(e){var t;return{isFirstPage:0===(null===(t=e.SearchReducer.searchResult)||void 0===t?void 0:t.page)||!1,terms:e.SearchReducer.terms||[]}}))(y));t.default=g},1736:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,u,l=r(n(35)),i=r(n(36)),c=r(n(96)),s=r(n(97)),d=r(n(85)),f=r(n(0)),p=n(152),m=n(27),h=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(336)),v=r(n(536));function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var b=function(e){(0,c.default)(n,e);var t=g(n);function n(){return(0,l.default)(this,n),t.apply(this,arguments)}return(0,i.default)(n,[{key:"show",get:function(){return!this.props.isPaidUser&&this.props.isSortByDate&&this.props.match.params.searchType!==h.LAW}},{key:"render",value:function(){return this.show?f.default.createElement("div",{className:"search-result__container search-result__sort-by-desc"},"目前顯示的搜尋結果是以",o||(o=f.default.createElement("strong",null,"日期排序")),u||(u=f.default.createElement("br",null)),"您可以選擇：",f.default.createElement("a",{onClick:this.props.onClick,id:h.SORT_BY_SCORE},"關聯度排序")):null}}]),n}(f.default.PureComponent),w=(0,m.withRouter)((0,p.connect)((function(e){var t;return{isSortByDate:e.SearchReducer.sortBy===h.SORT_BY_DATE,isPaidUser:!!v.default.isPaidUser((null===(t=e.auth.user.attributes)||void 0===t?void 0:t.role)||null)}}))(b));t.default=w},1737:function(e,t,n){"use strict";var r=n(1),a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(35)),u=r(n(36)),l=r(n(96)),i=r(n(97)),c=r(n(85)),s=r(n(0)),d=n(152),f=n(27),p=r(n(1525)),m=r(n(1569)),h=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(336)),v=r(n(536)),y=r(n(1660));function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.default)(e);if(t){var a=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,i.default)(this,n)}}function w(e){var t=e.show,n=e.options,r=e.active,a=e.onClick,o=e.className,u=e.id;if(!t)return null;var l="請選擇",i=n.map((function(e){var t=e.code===r;return t&&(l=e.name),s.default.createElement(p.default,{key:e.code,id:e.code,onClick:a,active:t},e.name)}));return s.default.createElement(m.default,{className:o,title:l,id:u,bsStyle:"link"},i)}var O=function(e){(0,l.default)(n,e);var t=b(n);function n(){return(0,o.default)(this,n),t.apply(this,arguments)}return(0,u.default)(n,[{key:"isViewingLaw",get:function(){return this.props.match.params.searchType===h.LAW}},{key:"isViewingJudgements",get:function(){return[h.ALL_TYPES,h.JUDGEMENT].includes(this.props.match.params.searchType)}},{key:"show",get:function(){return this.props.isSignedIn&&this.props.isPaidUser&&this.props.foundDocuments&&!this.isViewingLaw}},{key:"showSortingOptions",get:function(){return h.SEARCH_SORT_SUPPORT_TYPES.includes(this.props.match.params.searchType)}},{key:"render",value:function(){return this.show?s.default.createElement("div",{className:"search-result__container search-result__item-container search-result__options-dropdown-container"},s.default.createElement(y.default,{show:this.isViewingJudgements,className:"search-result__courts-options-dropdown"}),s.default.createElement(w,{id:"section-options-dropdown",className:"search-result__section-options-dropdown",options:h.SEARCH_SECTIONS_OPTIONS,active:this.isViewingJudgements&&this.props.judgementSection||null,show:this.isViewingJudgements,onClick:this.props.onClickJudgementSection}),s.default.createElement(w,{id:"sort-option-dropdown",className:"search-result__sort-options-dropdown",options:h.SEARCH_SORT_OPTIONS,show:this.showSortingOptions,active:this.props.sortBy,onClick:this.props.onClickSortingOptions})):null}}]),n}(s.default.PureComponent),k=(0,f.withRouter)((0,d.connect)((function(e){var t,n;return{sortBy:e.SearchReducer.sortBy,judgementSection:e.SearchReducer.judgementSection,foundDocuments:(null===(t=e.SearchReducer.searchResult)||void 0===t?void 0:t.totalCount)>0,isPaidUser:!!v.default.isPaidUser((null===(n=e.auth.user.attributes)||void 0===n?void 0:n.role)||null),isSignedIn:!!e.auth.user.isSignedIn}}))(O));t.default=k}}]);