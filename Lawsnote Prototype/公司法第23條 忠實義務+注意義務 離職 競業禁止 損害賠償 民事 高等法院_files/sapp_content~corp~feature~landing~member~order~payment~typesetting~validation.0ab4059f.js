(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{1604:function(e,t,n){"use strict";var a=n(1),r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,l,u,i,s,c,d=a(n(35)),f=a(n(36)),p=a(n(331)),h=a(n(96)),g=a(n(97)),m=a(n(85)),v=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=C(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n(0)),y=(a(n(6)),n(152)),b=n(1513),w=a(n(13)),_=a(n(544)),E=a(n(1677)),k=a(n(1633)),S=a(n(1680)),O=a(n(59)),P=n(233),R=n(1605);function C(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(C=function(e){return e?n:t})(e)}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,m.default)(e);if(t){var r=(0,m.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,g.default)(this,n)}}var I=(0,O.default)("HeaderBar"),L=function(e){(0,h.default)(n,e);var t=N(n);function n(e){var a;return(0,d.default)(this,n),(a=t.call(this,e)).onClickHamburgerIcon=a.onClickHamburgerIcon.bind((0,p.default)(a)),a.debounceWindowScrolling=(0,_.default)(a.onWindowScrolling.bind((0,p.default)(a)),80),a}return(0,f.default)(n,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.debounceWindowScrolling)}},{key:"componentWillUnmount",value:function(){this.props.dispatch((0,P.toggleAsideMenu)(!1)),window.removeEventListener("scroll",this.debounceWindowScrolling)}},{key:"onClickHamburgerIcon",value:function(){this.props.dispatch((0,P.toggleAsideMenu)(!0))}},{key:"onWindowScrolling",value:function(){var e=(0,R.getScrollPosition)().top||0;this.props.dispatch((0,P.updateScrollTopPosition)(e))}},{key:"renderHamburger",value:function(){return v.default.createElement("div",{className:"flex-item header-bar__section header-bar__hamburger"},v.default.createElement("span",{className:"hamburger-icon",onClick:this.onClickHamburgerIcon},o||(o=v.default.createElement("span",null)),l||(l=v.default.createElement("span",null)),u||(u=v.default.createElement("span",null))))}},{key:"renderSearchBar",value:function(e){if(!1===this.props.showSearchBar)return null;var t=(0,w.default)({"flex-item":!0,"header-bar__section":!0,"header-bar__searchbar":!0,"header-bar__searchbar__display":e});return v.default.createElement("div",{className:t},v.default.createElement(k.default,{searchType:this.props.searchType,defaultKeyword:this.props.defaultKeyword}))}},{key:"renderLogo",value:function(){var e=(0,w.default)({"flex-fixed-item":!0,"header-bar__section":!0,"header-bar__logo":!0,"header-bar__logo--hidden":!1===this.props.showLogo,"header-bar__logo--display":!1!==this.props.showLogo,"header-bar__logo--display-logo-name":!0===this.props.showLogoName});return v.default.createElement("div",{className:e},i||(i=v.default.createElement(b.Link,{to:"/"},v.default.createElement("img",{className:"logo-icon",src:"/logo-icon.svg",role:"presentation"}))),s||(s=v.default.createElement(b.Link,{to:"/"},v.default.createElement("img",{className:"logo-name",src:"/logo-name.svg",role:"presentation"}))))}},{key:"renderActionBar",value:function(){var e=(0,w.default)({"flex-item":!0,"header-bar__section":!0,"header-bar__actionbar":!0,"header-bar__actionbar--hide":!1===this.props.showActionBar});return v.default.createElement("div",{className:e},c||(c=v.default.createElement(S.default,null)))}},{key:"render",value:function(){I("render()");var e=this.props,t=e.isSignedIn,n=e.boxShadow,a=e.transparent,r=e.showSearchBar,o=(0,w.default)({"flex-box-horizon":!0,"flex-center":!0,"box-shadow":void 0===n||n,"header-bar__main-container":!0,"header-bar__fixed-top":!0,"header-bar__preserve-top-full":r,"header-bar__preserve-top-partial":!r,"header-bar__transparent":a});return v.default.createElement("header",{className:o},this.renderHamburger(),this.renderLogo(),this.renderSearchBar(r),this.renderActionBar(),v.default.createElement(E.default,{showFavorite:!!t}))}}]),n}(v.Component),D=(0,y.connect)((function(e){return{isSignedIn:!!e.auth.user.isSignedIn,scrollTop:e.PageCommonUsageReducer.scrollTop||0}}))(L);t.default=D},1605:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getScrollPosition=function(e){return r(e||document.documentElement)},t.scrollToTop=function(){(0,a.gracefulDomOperation)(o)};var a=n(535);function r(e){var t=(window.pageXOffset||e.scrollLeft)-(e.clientLeft||0);return{top:(window.pageYOffset||e.scrollTop)-(e.clientTop||0),left:t}}function o(){document.body.scrollTop=0,window.scrollTo(0,0)}},1633:function(e,t,n){"use strict";var a=n(1),r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,l,u,i,s,c=a(n(35)),d=a(n(36)),f=a(n(331)),p=a(n(96)),h=a(n(97)),g=a(n(85)),m=a(n(7)),v=j(n(0)),y=n(152),b=a(n(544)),w=a(n(1522)),_=a(n(1517)),E=a(n(1518)),k=a(n(1531)),S=a(n(536)),O=a(n(1678)),P=a(n(1679)),R=j(n(1645)),C=j(n(333)),N=n(337),I=n(546),L=n(581),D=j(n(562)),M=a(n(20));function U(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(U=function(e){return e?n:t})(e)}function j(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=U(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}return a.default=e,n&&n.set(e,a),a}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,g.default)(e);if(t){var r=(0,g.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,h.default)(this,n)}}function A(e){var t=o||(o=v.default.createElement(_.default,{id:"tooltip",bsClass:"hint"},"搜尋框可以輸入什麼？"));return v.default.createElement("span",{className:"search-bar__info-icon"},v.default.createElement(E.default,{placement:"right",overlay:t},v.default.createElement("a",{className:"img-link",href:"https://blog.lawsnote.com/2017/06/query_guildline/",onClick:e.onClick},l||(l=v.default.createElement("img",{className:"info-icon",src:"/info.svg",role:"presentation"})))))}function x(e){return null!==e.title&&e.suggestions.length?v.default.createElement("span",null,e.title):null}function B(e){return e.name}function K(e){return e.suggestions}var W=function(e){(0,p.default)(n,e);var t=T(n);function n(e){var a;(0,c.default)(this,n),a=t.call(this,e),(0,m.default)((0,f.default)(a),"debounceLoadSuggestions",void 0),(0,m.default)((0,f.default)(a),"debounceLoadKeywordHistory",void 0),(0,m.default)((0,f.default)(a),"searchbar",void 0),(0,m.default)((0,f.default)(a),"input",void 0),(0,m.default)((0,f.default)(a),"onSuggestionsFetchRequested",(function(e){var t=e.value;if("input-changed"===e.reason)t!==a.props.value&&a.requestLastSuggestionList(t,a.props)})),(0,m.default)((0,f.default)(a),"onInputValueChange",(function(e,t){var n=t.newValue;switch(t.method){case"escpae":case"enter":case"type":a.maybeUpdateRenderSuggestions(!0),a.requestLastSuggestionList(n||"",a.props),a.props.dispatch((0,L.updateInputValue)(n))}})),(0,m.default)((0,f.default)(a),"onInputKeyDown",(function(e){switch(e.key){case"ArrowDown":case"ArrowUp":a.maybeUpdateRenderSuggestions(!0)}})),(0,m.default)((0,f.default)(a),"onSuggestionSelected",(function(e,t){var n=t.suggestion,r=t.suggestionValue,o=a.props.searchType||"all";switch(n.type){case"search":case"search-history-keyword":a.props.dispatch((0,I.searchDb)(n.id,o)),a.props.dispatch((0,L.updateKeywordValue)(r)),M.default.logSearchHistoryKeywordClick(),M.default.logSearchKeyword(a.props.lastKeyword,r);break;case"law":a.props.dispatch((0,N.navigateLaw)(n.id)),a.props.dispatch((0,L.updateKeywordValue)(r)),M.default.logSearchKeyword(a.props.lastKeyword,r)}})),(0,m.default)((0,f.default)(a),"onSuggestionHighlighted",(function(e){e.suggestion?a.maybeUpdateSuggestionSelected(!0):a.maybeUpdateSuggestionSelected(!1)})),(0,m.default)((0,f.default)(a),"onSuggestionsClearRequested",(function(){a.maybeUpdateRenderSuggestions(!1),a.maybeUpdateSuggestionSelected(!1)})),(0,m.default)((0,f.default)(a),"onInputClick",(function(){M.default.logSearchClick()})),(0,m.default)((0,f.default)(a),"onInputKeyPress",(function(e){13===(e.keyCode||e.which)&&!a.props.isSuggestionSelected&&(a.handleButtonClick(),a.maybeUpdateSuggestionSelected(!1),a.maybeUpdateRenderSuggestions(!1))})),(0,m.default)((0,f.default)(a),"onInputFocus",(function(){a.maybeUpdateRenderSuggestions(!1)})),(0,m.default)((0,f.default)(a),"onInputBlur",(function(){a.maybeUpdateRenderSuggestions(!1),a.searchbar.setState({isCollapsed:!0})})),(0,m.default)((0,f.default)(a),"onClickSearchHistoryKeywordPromo",(function(e){switch(e){case R.USER_UNLOG:case R.USER_UNPAID_HAS_KEYWORD:case R.USER_UNPAID_NO_KEYWORD:M.default.logSearchHistoryPromoClick(C[e])}})),(0,m.default)((0,f.default)(a),"onClearValue",(function(){a.props.dispatch((0,L.updateInputValue)("")),a.input.focus()})),(0,m.default)((0,f.default)(a),"getUserStatus",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.props,t=e.isSignedIn,n=e.role;return{isSignedIn:t,isPaid:S.default.isPaidUser(n)}})),(0,m.default)((0,f.default)(a),"handleButtonClick",(function(){var e=a.props.searchType||"all";a.input&&""!==a.input.value&&(a.props.dispatch((0,I.searchDb)(a.input.value,e)),M.default.logSearchKeyword(a.input.value,a.input.value))})),(0,m.default)((0,f.default)(a),"loadKeywordHistory",(function(e,t){var n=a.getUserStatus(t),r=n.isSignedIn,o=n.isPaid;r?a.props.dispatch((0,L.fetchKeywordHistory)(e,r,o)):a.props.dispatch((0,L.clearKeywordHistory)(e,r,o))})),(0,m.default)((0,f.default)(a),"handleRemoveKeywordHistory",(function(e,t){var n=a.getUserStatus(),r=n.isSignedIn,o=n.isPaid;a.props.dispatch((0,L.removeKeywordHistory)(t,a.props.value,r,o)),M.default.logSearchHistoryKeywordRemove(),e.preventDefault(),e.stopPropagation()})),(0,m.default)((0,f.default)(a),"subscribeInput",(function(e){e&&(a.input=e.input,a.searchbar=e)})),(0,m.default)((0,f.default)(a),"loadSuggestions",(function(e){a.props.dispatch((0,L.fetchLawListRequest)(e))})),(0,m.default)((0,f.default)(a),"maybeUpdateRenderSuggestions",(function(e){a.props.shouldRenderSuggestions!==e&&a.props.dispatch((0,L.updateShouldRenderSuggestions)(e))})),(0,m.default)((0,f.default)(a),"maybeUpdateSuggestionSelected",(function(e){a.props.isSuggestionSelected!==e&&a.props.dispatch((0,L.updateSuggestionSelected)(e))})),(0,m.default)((0,f.default)(a),"requestLastSuggestionList",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.props.value,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.props,n=e.trim().replace(/[\x00-\x0C\x0E-\x1F\x7F-\x9F]/g,"");a.debounceLoadSuggestions(n||""),a.debounceLoadKeywordHistory(n||"",t)})),(0,m.default)((0,f.default)(a),"renderSuggestion",(function(e){switch(e.type){case"search-history-promotion":return v.default.createElement(P.default,{params:e.params,onClickLink:a.onClickSearchHistoryKeywordPromo});case"search-history-keyword":return v.default.createElement(O.default,{key:e.id,keyword:e.name,onRemoveKeyword:a.handleRemoveKeywordHistory});case"search":return v.default.createElement("div",null,u||(u=v.default.createElement("img",{className:"suggestion-icon",src:"/search.svg",role:"presentation"})),e.name,i||(i=v.default.createElement("span",{className:"suggestion-hint"}," - Lawsnote 搜尋")));default:return v.default.createElement("span",{className:"search-bar__suggestion"},e.name)}})),(0,m.default)((0,f.default)(a),"renderInputComponent",(function(e){return v.default.createElement("div",{className:"relative"},v.default.createElement("input",e),!!a.props.value&&v.default.createElement("i",{className:"ant ant-fail search-bar__clear-button",onClick:a.onClearValue}))}));return a.debounceLoadSuggestions=(0,b.default)(a.loadSuggestions.bind((0,f.default)(a)),500),a.debounceLoadKeywordHistory=(0,b.default)(a.loadKeywordHistory.bind((0,f.default)(a)),500),a}return(0,d.default)(n,[{key:"componentDidMount",value:function(){var e=this.props.defaultKeyword||"";this.props.dispatch((0,L.updateInputValue)(e)),this.maybeUpdateSuggestionSelected(!1),""!==e&&this.debounceLoadSuggestions(e),this.props.isSigningOut||this.props.isAuthenticating||this.debounceLoadKeywordHistory(e,this.props)}},{key:"componentDidUpdate",value:function(e){var t=e.defaultKeyword!==this.props.defaultKeyword,n=this.props.defaultKeyword&&""!==this.props.defaultKeyword,a=!(0,w.default)(this.getUserStatus(),this.getUserStatus(e));t&&this.props.dispatch((0,L.updateInputValue)(this.props.defaultKeyword||"")),t&&n&&this.debounceLoadSuggestions(this.props.defaultKeyword||""),(t||a)&&this.debounceLoadKeywordHistory(this.props.defaultKeyword||"",this.props)}},{key:"handleHintClick",value:function(){M.default.logSearchHintClick()}},{key:"render",value:function(){var e=this,t={value:this.props.value,type:"search",placeholder:"輸入關鍵字",autoFocus:!!this.props.autoFocus&&""===this.props.value,onChange:this.onInputValueChange,onKeyPress:this.onInputKeyPress,onClick:this.onInputClick,onFocus:this.onInputFocus,onBlur:this.onInputBlur,onKeyDown:this.onInputKeyDown};return v.default.createElement("div",{className:"flex-box flex-center search-bar__container hidden-print"},v.default.createElement(k.default,{suggestions:this.props.suggestions,onSuggestionsFetchRequested:this.onSuggestionsFetchRequested,onSuggestionsClearRequested:this.onSuggestionsClearRequested,onSuggestionHighlighted:this.onSuggestionHighlighted,getSuggestionValue:B,getSectionSuggestions:K,renderSuggestion:this.renderSuggestion,renderSectionTitle:x,multiSection:!0,inputProps:t,onSuggestionSelected:this.onSuggestionSelected,focusInputOnSuggestionClick:!1,shouldRenderSuggestions:function(){return e.props.shouldRenderSuggestions},ref:this.subscribeInput,renderInputComponent:this.renderInputComponent}),v.default.createElement("button",{className:"search-bar__search-button flex-fixed-item",onClick:this.handleButtonClick},s||(s=v.default.createElement("i",{className:"ant ant-search search-bar__search-icon"}))),v.default.createElement(A,{onClick:this.handleHintClick}))}}]),n}(v.Component),H=(0,y.connect)((function(e){var t;return{suggestions:D.getSuggestions(e),shouldRenderSuggestions:!!e.AutoSuggestReducer.shouldRenderSuggestions,isSuggestionSelected:!!e.AutoSuggestReducer.isSuggestionSelected,value:e.AutoSuggestReducer.value,lastKeyword:e.AutoSuggestReducer.lastKeyword,isSignedIn:!!e.auth.user.isSignedIn,role:(null===(t=e.auth.user.attributes)||void 0===t?void 0:t.role)||null,isSigningOut:!!e.auth.signOut.loading,isAuthenticating:!!e.auth.authenticate.loading}}))(W);t.default=H},1645:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.USER_UNPAID_NO_KEYWORD=t.USER_UNPAID_HAS_KEYWORD=t.USER_UNPAID=t.USER_UNLOG=t.USER_SIGNEDIN=t.USER_PAID=void 0;t.USER_UNLOG="USER_UNLOG";t.USER_SIGNEDIN="USER_SIGNEDIN";t.USER_UNPAID="USER_UNPAID";t.USER_PAID="USER_PAID";t.USER_UNPAID_HAS_KEYWORD="USER_UNPAID_HAS_KEYWORD";t.USER_UNPAID_NO_KEYWORD="USER_UNPAID_NO_KEYWORD"},1646:function(e,t,n){"use strict";var a=n(1),r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(35)),l=a(n(36)),u=a(n(331)),i=a(n(96)),s=a(n(97)),c=a(n(85)),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n(0)),f=(a(n(6)),a(n(1517))),p=a(n(1518));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,s.default)(this,n)}}var m=function(e){(0,i.default)(n,e);var t=g(n);function n(e){var a;return(0,o.default)(this,n),(a=t.call(this,e)).handleClick=a.handleClick.bind((0,u.default)(a)),a}return(0,l.default)(n,[{key:"handleClick",value:function(e){e.preventDefault(),this.props.onClick(e)}},{key:"render",value:function(){var e=this.props.iconClass||"icon ant ant-star-o";if(this.props.overlayMessage){var t=d.default.createElement(f.default,{id:"tooltip",bsClass:"hint"},this.props.overlayMessage);return d.default.createElement(p.default,{placement:"left",overlay:t},d.default.createElement("i",{className:e,onClick:this.handleClick}))}return d.default.createElement("i",{className:e,onClick:this.handleClick})}}]),n}(d.Component);t.default=m},1677:function(e,t,n){"use strict";var a=n(1),r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,l,u,i,s,c,d,f,p,h,g,m,v,y,b,w,_,E,k,S,O,P,R=a(n(35)),C=a(n(36)),N=a(n(331)),I=a(n(96)),L=a(n(97)),D=a(n(85)),M=a(n(7)),U=a(n(1515)),j=J(n(0)),T=n(152),A=n(1513),x=n(27),B=a(n(1519)),K=a(n(1516)),W=a(n(20)),H=n(337),F=n(332),V=n(552),q=n(233),Y=J(n(128));function G(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(G=function(e){return e?n:t})(e)}function J(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=G(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}return a.default=e,n&&n.set(e,a),a}function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,D.default)(e);if(t){var r=(0,D.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,L.default)(this,n)}}var $=K.default.ul(o||(o=(0,U.default)(["\n  margin: 20px 0;\n  padding-left: 40px;\n  padding-right: 25px;\n  &:first-child {\n    margin-top: 25px;\n  }\n"]))),X=(0,K.default)($)(l||(l=(0,U.default)(["\n  font-size: 18px;\n  list-style-type: none;\n  &,\n  :link,\n  :visited,\n  a {\n    color: #313131;\n    font-style: normal;\n    text-decoration: none;\n  }\n  a {\n    cursor: pointer;\n  }\n\n  li {\n    margin-bottom: 20px;\n    &:last-child {\n      margin-bottom: 0;\n    }\n  }\n"])));var Q=function(e){(0,I.default)(n,e);var t=z(n);function n(){var e;(0,R.default)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),(0,M.default)((0,N.default)(e),"onClickLogin",(function(){return(0,T.batch)((function(){e.props.dispatch((0,q.toggleAsideMenu)(!1)),e.props.dispatch((0,F.toggleSignInMode)(!0)),e.props.dispatch((0,F.toggleSignInModal)(!0))}))})),(0,M.default)((0,N.default)(e),"onClickLogout",(function(){e.props.dispatch((0,V.signOutStart)())})),(0,M.default)((0,N.default)(e),"onClickLaw",(function(t){var n=t.target.dataset.lawid,a=t.target.dataset.lawname;e.props.dispatch((0,H.navigateLaw)(n)),W.default.logClickFavoriteItem(a)})),(0,M.default)((0,N.default)(e),"onCloseAsideMenu",(function(){e.maybeToggleAsideMenu(!1)})),(0,M.default)((0,N.default)(e),"onClickPage",(function(){window.open(e.LawyerPageUrl,"_blank")})),(0,M.default)((0,N.default)(e),"maybeToggleAsideMenu",(function(t){e.props.displayAsideMenu!==t&&e.props.dispatch((0,q.toggleAsideMenu)(t))})),e}return(0,C.default)(n,[{key:"componentDidUpdate",value:function(e){(function(e,t){var n=e.location.pathname!==t.location.pathname,a=e.location.key!==t.location.key;return n||a})(e,this.props)&&this.maybeToggleAsideMenu(!1)}},{key:"componentWillUnmount",value:function(){this.maybeToggleAsideMenu(!1)}},{key:"LawyerPageUrl",get:function(){return this.props.currentUserLawyerId?"".concat(Y.LINK_LAWYER_PROFILE,"/").concat(this.props.currentUserLawyerId):Y.LINK_FIND_LAWYER}},{key:"shouldRenderFavorite",get:function(){return!(!this.props.showFavorite||!this.props.isSignedIn)}},{key:"FavoriteMenu",get:function(){var e,t=this;if(!this.shouldRenderFavorite)return null;var n=null===(e=this.props.favorite)||void 0===e?void 0:e.map((function(e){var n=e.lawId,a=e.lawName;return j.default.createElement("li",{key:n,className:"nav-menu__list-item nav-menu__child-list-item"},j.default.createElement("a",{"data-lawid":n,"data-lawname":a,onClick:t.onClickLaw},a))}));return j.default.createElement(j.default.Fragment,null,j.default.createElement("ul",{className:"nav-menu__section nav-menu__list nav-menu__child-list-container"},u||(u=j.default.createElement("input",{id:"fav-list",className:"fold-list__controller",type:"checkbox"})),i||(i=j.default.createElement("label",{htmlFor:"fav-list",className:"fold-list__trigger"},j.default.createElement("li",{className:"nav-menu__list-item nav-menu__child-list-title"},"我的最愛",j.default.createElement("i",{className:"triangle-base arrow"})))),j.default.createElement("ul",{className:"nav-menu__list nav-menu__child-list fold-list__list"},null!=n&&n.length?n:s||(s=j.default.createElement("li",{className:"nav-menu__list-item nav-menu__child-list-item unfunction"},"尚未加入自選法規")))),c||(c=j.default.createElement("hr",{className:"horizon-line"})))}},{key:"SignInAction",get:function(){return j.default.createElement("a",{onClick:this.onClickLogin,"aria-label":"登入"},"登入")}},{key:"SignOutAction",get:function(){return j.default.createElement("a",{onClick:this.onClickLogout,"aria-label":"登出"},"登出")}},{key:"render",value:function(){return j.default.createElement(B.default,{show:this.props.displayAsideMenu,backdrop:this.props.displayAsideMenu,onHide:this.onCloseAsideMenu,bsClass:"nav-menu"},j.default.createElement(B.default.Body,{bsClass:"nav-menu__modal-body"},d||(d=j.default.createElement($,{as:"figure"},j.default.createElement(A.Link,{to:"/","aria-label":"LOGO"},j.default.createElement("i",{className:"trademark-name trademark-name__small","aria-label":"LOGO"})))),f||(f=j.default.createElement("hr",{className:"horizon-line"})),j.default.createElement(X,null,p||(p=j.default.createElement("li",null,j.default.createElement(A.Link,{to:"/","aria-label":"首頁"},"首頁"))),h||(h=j.default.createElement("li",null,j.default.createElement(A.Link,{to:"/products","aria-label":"了解方案"},"了解方案"))),j.default.createElement("li",{className:"nav-menu__list-item nav-menu__product-list nav-menu__child-list-container"},g||(g=j.default.createElement("input",{id:"plan-list",className:"fold-list__controller",type:"checkbox",hidden:!0})),m||(m=j.default.createElement("label",{htmlFor:"plan-list",className:"nav-menu__child-list-title fold-list__trigger"},"產品介紹",j.default.createElement("i",{className:"triangle-base arrow"}))),v||(v=j.default.createElement("ul",{className:"nav-menu__list fold-list__list"},j.default.createElement("li",{className:"nav-menu__child-list-item"},j.default.createElement(A.Link,{to:"/feature/free"},"免費版")),j.default.createElement("li",{className:"nav-menu__child-list-item"},j.default.createElement(A.Link,{to:"/feature/basic"},"入門版")),j.default.createElement("li",{className:"nav-menu__child-list-item"},j.default.createElement(A.Link,{to:"/feature/pro"},"專業版")),j.default.createElement("li",{className:"nav-menu__child-list-item"},j.default.createElement(A.Link,{to:"/feature/corp"},"企業方案"))))),y||(y=j.default.createElement("li",null,j.default.createElement(A.Link,{to:"/group2020","aria-label":"團購優惠"},"團購優惠")))),b||(b=j.default.createElement("hr",{className:"horizon-line"})),w||(w=j.default.createElement(X,null,j.default.createElement("li",null,j.default.createElement(A.Link,{to:"/member","aria-label":"用戶資料"},"用戶資料")))),j.default.createElement(X,null,j.default.createElement("li",null,j.default.createElement("a",{"aria-label":"律師專頁",target:"_blank",onClick:this.onClickPage},"律師專頁"))),_||(_=j.default.createElement("hr",{className:"horizon-line"})),this.FavoriteMenu,E||(E=j.default.createElement(X,null,j.default.createElement("li",null,j.default.createElement("a",{href:"https://about.lawsnote.com",target:"_blank",rel:"noopener noreferrer","aria-label":"關於 Lawsnote"},"關於 Lawsnote")),j.default.createElement("li",null,j.default.createElement("a",{href:"https://blog.lawsnote.com/",target:"_blank",rel:"noopener noreferrer","aria-label":"官方部落格"},"部落格")),j.default.createElement("li",null,j.default.createElement("a",{href:"https://www.facebook.com/lawsnote/",target:"_blank",rel:"noopener noreferrer","aria-label":"FB粉絲團"},"FB粉絲團")))),k||(k=j.default.createElement("hr",{className:"horizon-line"})),S||(S=j.default.createElement(X,null,j.default.createElement("li",null,j.default.createElement(A.Link,{to:"/range","aria-label":"資料庫範圍"},"資料庫範圍")))),O||(O=j.default.createElement("hr",{className:"horizon-line"})),j.default.createElement(X,null,j.default.createElement("li",null,j.default.createElement("address",null,j.default.createElement("a",{href:"mailto:".concat(Y.SUPPORT_EMAIL)},P||(P=j.default.createElement("span",null,"聯絡我們")),j.default.createElement("small",null,Y.SUPPORT_EMAIL)))),j.default.createElement("li",null,this.props.isSignedIn?this.SignOutAction:this.SignInAction))))}}]),n}(j.Component),Z=(0,x.withRouter)((0,T.connect)((function(e){var t;return{favorite:e.LawsReducer.favorite,isSignedIn:!!e.auth.user.isSignedIn,currentUserLawyerId:null===(t=e.auth.user.attributes)||void 0===t?void 0:t.lawyerId,displayAsideMenu:!!e.PageCommonUsageReducer.displayAsideMenu}}))(Q));t.default=Z},1678:function(e,t,n){"use strict";var a=n(1),r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(35)),l=a(n(36)),u=a(n(331)),i=a(n(96)),s=a(n(97)),c=a(n(85)),d=a(n(7)),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n(0));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,s.default)(this,n)}}var g=function(e){(0,i.default)(n,e);var t=h(n);function n(){var e;(0,o.default)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r)),(0,d.default)((0,u.default)(e),"onMouseDown",(function(t){e.props.onRemoveKeyword&&e.props.onRemoveKeyword(t,e.props.keyword)})),e}return(0,l.default)(n,[{key:"render",value:function(){return f.default.createElement("div",{className:"search-bar__search-history-keyword"},f.default.createElement("span",{className:"search-bar__suggestion"},this.props.keyword),f.default.createElement("span",{className:"search-histroy-remove-button",onMouseDown:this.onMouseDown},"移除"))}}]),n}(f.Component);t.default=g},1679:function(e,t,n){"use strict";var a=n(1),r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,l=a(n(35)),u=a(n(36)),i=a(n(331)),s=a(n(96)),c=a(n(97)),d=a(n(85)),f=a(n(7)),p=v(n(0)),h=n(1513),g=v(n(1645));function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function v(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}return a.default=e,n&&n.set(e,a),a}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var b="立即升級專業版帳戶>>>";var w=function(e){(0,s.default)(n,e);var t=y(n);function n(){var e;(0,l.default)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),(0,f.default)((0,i.default)(e),"onClickLink",(function(){var t,n,a,r,o,l=(t=e.props.params,n=t.history,a=t.value,r=t.isSignedIn,o=t.isPaid,r?o?g.USER_PAID:a.length&&n.length?g.USER_UNPAID_HAS_KEYWORD:g.USER_UNPAID_NO_KEYWORD:g.USER_UNLOG);e.props.onClickLink(l)})),e}return(0,u.default)(n,[{key:"PromotionText",get:function(){var e=this.props.params,t=e.history,n=e.value,a=e.isSignedIn,r=e.isPaid,o="需要查看近期曾使用過的關鍵字紀錄嗎？";return a&&!r&&n.length&&t.length&&(o="您曾使用過該關鍵字，可升級專業版查看搜尋紀錄。"),o}},{key:"LinkText",get:function(){var e=this.props.params.isSignedIn,t=e?b:"立即體驗專業版帳戶>>>";return e&&(t=b),t}},{key:"render",value:function(){return p.default.createElement("div",{className:"search-histroy-promotion"},p.default.createElement("p",null,o||(o=p.default.createElement("i",{className:"search-history-promotion__icon ant ant-history ant-small"})),this.PromotionText),p.default.createElement("p",null,p.default.createElement(h.Link,{to:"/products?from=keyword-history",onClick:this.onClickLink},this.LinkText)))}}]),n}(p.Component);t.default=w},1680:function(e,t,n){"use strict";var a=n(1),r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,l,u,i,s,c,d,f,p,h,g,m=a(n(35)),v=a(n(36)),y=a(n(331)),b=a(n(96)),w=a(n(97)),_=a(n(85)),E=a(n(7)),k=K(n(0)),S=(a(n(6)),n(152)),O=a(n(548)),P=a(n(1525)),R=a(n(335)),C=a(n(1517)),N=a(n(1518)),I=n(1513),L=a(n(13)),D=K(n(128)),M=a(n(536)),U=n(332),j=n(127),T=n(552),A=a(n(1681)),x=a(n(1684));function B(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(B=function(e){return e?n:t})(e)}function K(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=B(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}return a.default=e,n&&n.set(e,a),a}function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,_.default)(e);if(t){var r=(0,_.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,w.default)(this,n)}}var H=D.LINK_FIND_LAWYER,F=D.LINK_LAWYER_PROFILE,V=function(e){(0,b.default)(n,e);var t=W(n);function n(){var e;(0,m.default)(this,n);for(var a=arguments.length,r=new Array(a),d=0;d<a;d++)r[d]=arguments[d];return e=t.call.apply(t,[this].concat(r)),(0,E.default)((0,y.default)(e),"onGroupBuyButtonClick",(function(){e.props.dispatch((0,j.viewGroupBuy2020Page)())})),(0,E.default)((0,y.default)(e),"onMemberButtonClick",(function(){e.props.dispatch((0,j.viewMembershipPage)())})),(0,E.default)((0,y.default)(e),"onSignOutButtonClick",(function(){e.props.dispatch((0,T.signOutStart)())})),(0,E.default)((0,y.default)(e),"onProductButtonClick",(function(){e.props.dispatch((0,j.viewProducts)())})),(0,E.default)((0,y.default)(e),"onClickLinkToPage",(function(){var t=e.props.currentUserLawyerId,n=t?"".concat(F,"/").concat(t):H;window.open(n,"_blank")})),(0,E.default)((0,y.default)(e),"toggleSignInModal",(function(){e.props.dispatch((0,U.toggleSignInMode)(!0)),e.props.dispatch((0,U.toggleSignInModal)(!0))})),(0,E.default)((0,y.default)(e),"renderUserEmail",(function(t){if(e.props.currentUserEmail){var n=k.default.createElement(C.default,{id:"tooltip",bsClass:"hint",className:"hide-in-mobile hide-in-tablet hidden-print"},e.props.currentUserEmail);return k.default.createElement(N.default,{placement:"bottom",overlay:n},t)}return t})),(0,E.default)((0,y.default)(e),"renderSignedInButton",(function(t,n){var a="none"!==e.props.currentUserPhoto?k.default.createElement("img",{className:"user-photo",src:e.props.currentUserPhoto,alt:""}):o||(o=k.default.createElement("div",{className:"default-user-photo glyphicon glyphicon-user"}));return t?k.default.createElement("span",{key:n,className:"action-bar__user-info-button--no-dropdown-menu"},k.default.createElement(I.Link,{to:"/member"},e.renderUserEmail(a))):k.default.createElement(O.default,{key:n,id:"dropdown-signed-in",className:"photo-dropdown action-bar__user-info-button--has-dropdown-menu",pullRight:!0},k.default.createElement(O.default.Toggle,{bsClass:"photo-toggle-button"},e.renderUserEmail(a)),k.default.createElement(O.default.Menu,null,e.UserInfoJsx,l||(l=k.default.createElement(P.default,{divider:!0})),k.default.createElement(P.default,{eventKey:"1",onClick:e.onProductButtonClick},"比較方案"),u||(u=k.default.createElement(P.default,{divider:!0})),k.default.createElement(P.default,{eventKey:"2",onClick:e.onGroupBuyButtonClick},"團購優惠",i||(i=k.default.createElement("span",{className:"new"},"ing"))),s||(s=k.default.createElement(P.default,{divider:!0})),k.default.createElement(P.default,{eventKey:"3",onClick:e.onMemberButtonClick},"用戶資料"),c||(c=k.default.createElement(P.default,{divider:!0})),k.default.createElement(P.default,{eventKey:"4",onClick:e.onSignOutButtonClick},"登出")))})),e}return(0,v.default)(n,[{key:"SignInButtonJsx",get:function(){return k.default.createElement(R.default,{className:"action-bar__login-button",bsClass:"header-button",onClick:this.toggleSignInModal},"登入")}},{key:"ProductButtonJsx",get:function(){return k.default.createElement(R.default,{bsClass:"header-button",className:"action-bar__plan-button",onClick:this.onGroupBuyButtonClick},"揪團")}},{key:"UserInfoJsx",get:function(){var e=this.props,t=e.currentUserEmail,n=e.currentUserName,a=e.currentUserRole,r=e.currentUserProvider,o=M.default.isPaidUser(a),l=M.default.getRoleType(a),u=d||(d=k.default.createElement(I.Link,{to:"/products"},"升級")),i=M.default.getCapitalizedProvider(r);return k.default.createElement("div",{className:"flex-box-vertical flex-cx-center"},k.default.createElement("div",{className:"action-bar-uinfo"},t||n),k.default.createElement("div",{className:"action-bar-login-source"},"(",i," 帳號登入)"),f||(f=k.default.createElement("div",{className:"action-bar-account-hint"},"*不同登入方式視為獨立帳號，帳號不互通")),k.default.createElement("div",{className:"action-bar-pinfo"},k.default.createElement("span",{className:(0,L.default)("role-type-badge-base",o?"role-type-badge-member":"role-type-badge-basic")},l),o?null:u))}},{key:"LinkPageJsx",get:function(){return k.default.createElement("span",{className:"hide-in-mobile hide-in-tablet"},k.default.createElement("button",{type:"button",className:"header-button header-button-default action-bar__plan-button light-color",onClick:this.onClickLinkToPage},"律師專頁"),p||(p=k.default.createElement("hr",{className:"action-bar__plan-seperator"})))}},{key:"render",value:function(){var e=this.props.isSignedIn?h||(h=k.default.createElement(A.default,null)):null,t=this.props.isSignedIn?g||(g=k.default.createElement(x.default,null)):null,n=this.props.isSignedIn?[this.renderSignedInButton(!1,0),this.renderSignedInButton(!0,1)]:this.SignInButtonJsx,a=this.props.isSignedIn?null:this.ProductButtonJsx,r=this.props.isSignedIn?this.LinkPageJsx:null;return k.default.createElement("div",{className:"action-bar__main-container hidden-print"},r,e,t,n,a)}}]),n}(k.Component),q=(0,S.connect)((function(e){return{currentUserPhoto:(e.auth.user.attributes?e.auth.user.attributes.photo:"none")||"none",currentUserEmail:(e.auth.user.attributes?e.auth.user.attributes.email:null)||null,currentUserName:(e.auth.user.attributes?e.auth.user.attributes.display_name:null)||null,currentUserRole:e.auth.user.attributes?e.auth.user.attributes.role:null,currentUserLawyerId:e.auth.user.attributes?e.auth.user.attributes.lawyerId:null,currentUserProvider:e.auth.user.attributes?e.auth.user.attributes.provider:null,isSignedIn:e.auth.user.isSignedIn||!1}}))(V);t.default=q},1681:function(e,t,n){"use strict";var a=n(1),r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,l,u=a(n(35)),i=a(n(36)),s=a(n(331)),c=a(n(96)),d=a(n(97)),f=a(n(85)),p=a(n(7)),h=k(n(0)),g=(a(n(6)),n(152)),m=a(n(548)),v=a(n(1682)),y=a(n(1646)),b=k(n(341)),w=n(337),_=a(n(20));function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(E=function(e){return e?n:t})(e)}function k(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=E(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}return a.default=e,n&&n.set(e,a),a}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,f.default)(e);if(t){var r=(0,f.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,d.default)(this,n)}}var O=(0,a(n(59)).default)("FavoriteDropdown"),P=function(e){(0,c.default)(n,e);var t=S(n);function n(){var e;(0,u.default)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),(0,p.default)((0,s.default)(e),"onMenuItemClick",(function(e){O("onMenuItemClick"),e.preventDefault()})),(0,p.default)((0,s.default)(e),"onDropdownToggle",(function(t){t&&(e.props.dispatch((0,w.fetchFavoriteListRequest)()),_.default.logClickFavoriteIcon())})),(0,p.default)((0,s.default)(e),"handleTabSelect",(function(t,n,a){O("handleTabSelect",a),e.props.dispatch((0,w.navigateLaw)(t)),_.default.logClickFavoriteItem(n)})),(0,p.default)((0,s.default)(e),"handleTabClose",(function(t,n,a){e.props.dispatch((0,w.updateFavoriteRequest)(a)),e.props.dispatch((0,w.updateLawViewingList)(t.lawId)),_.default.logToggleFavorite(!1,t.lawName)})),(0,p.default)((0,s.default)(e),"handleTabPositionChange",(function(t){e.props.dispatch((0,w.updateFavorite)(t,Date.now())),e.props.dispatch((0,w.updateFavoriteRequest)(t))})),e}return(0,i.default)(n,[{key:"renderDropdownList",value:function(){var e=this.props.favorite;return e&&e.length>0?h.default.createElement(v.default,{key:b.FAVORITE,tabs:this.props.favorite,selectedTab:this.props.activeLaw,listType:b.FAVORITE,onTabPositionChange:this.handleTabPositionChange,onTabSelect:this.handleTabSelect,onTabClose:this.handleTabClose}):o||(o=h.default.createElement("div",{className:"favorite-none"},"尚未加入自選法規",h.default.createElement("i",{className:"ant-icon ant ant-star ant-yellow ant-small"})))}},{key:"render",value:function(){return O("render()"),h.default.createElement(m.default,{id:"dropdown-favorite",className:"icon-dropdown action-bar__favorite-list__icon",onToggle:this.onDropdownToggle,pullRight:!0},l||(l=h.default.createElement(y.default,{bsRole:"toggle"})),h.default.createElement(m.default.Menu,null,this.renderDropdownList()))}}]),n}(h.Component),R=(0,g.connect)((function(e){return{activeLaw:e.LawsReducer.activeLaw,favorite:e.LawsReducer.favorite}}))(P);t.default=R},1682:function(e,t,n){"use strict";var a=n(1),r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,l=a(n(35)),u=a(n(36)),i=a(n(331)),s=a(n(96)),c=a(n(97)),d=a(n(85)),f=a(n(7)),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n(0)),h=(a(n(6)),a(n(1541))),g=n(1532),m=a(n(1683)),v=a(n(20));function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var w=(0,a(n(59)).default)("DraggableFavorite"),_=function(e){(0,s.default)(n,e);var t=b(n);function n(){var e;(0,l.default)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),(0,f.default)((0,i.default)(e),"onMoveEnd",(function(t){if(t.destination){var n=t.source.index,a=t.destination.index,r=e.props.tabs[n],o=(0,h.default)(e.props,{tabs:{$splice:[[n,1],[a,0,r]]}});v.default.logTabDrag(e.props.tabs[n].lawName,e.props.tabs[a].lawName),e.props.onTabPositionChange(o.tabs,e.props.listType)}})),(0,f.default)((0,i.default)(e),"handleClick",(function(t,n){t===e.props.selectedTab.lawId&&e.props.listType===e.props.selectedTab.listType||e.props.onTabSelect(t,n,e.props.listType)})),(0,f.default)((0,i.default)(e),"handleClose",(function(t){var n=e.props.tabs[t],a={},r=-1;1===e.props.tabs.length?a={lawId:null,lawName:null}:e.props.tabs.length>1&&(r=0!==t?t-1:1,a=e.props.tabs[r]);var o=(0,h.default)(e.props,{tabs:{$splice:[[t,1]]}});e.props.onTabClose(n,a,o.tabs,e.props.listType)})),e}return(0,u.default)(n,[{key:"render",value:function(){var e=this;w("render()",this.props);var t=this.props,n=t.tabs,a=t.listType;return Array.isArray(n)&&n.length>0&&"FAVORITE"===a?p.default.createElement(g.DragDropContext,{onDragEnd:this.onMoveEnd},p.default.createElement(g.Droppable,{droppableId:"droppable"},(function(t){return p.default.createElement("div",{className:"view-favorite",ref:t.innerRef},n.map((function(t,n){return p.default.createElement(m.default,{key:"".concat(t.lawId,"-").concat(a),index:n,id:t.lawId,title:t.lawName,onClick:e.handleClick,onClose:e.handleClose})})),t.placeholder)}))):o||(o=p.default.createElement("div",{className:"view-favorite hidden"}))}}]),n}(p.Component);t.default=_},1683:function(e,t,n){"use strict";var a=n(1),r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(232)),l=a(n(35)),u=a(n(36)),i=a(n(331)),s=a(n(96)),c=a(n(97)),d=a(n(85)),f=a(n(7)),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n(0)),h=(a(n(6)),n(1532));function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var y=function(e){(0,s.default)(n,e);var t=v(n);function n(){var e;(0,l.default)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),(0,f.default)((0,i.default)(e),"onClick",(function(){e.props.onClick(e.props.id,e.props.title)})),(0,f.default)((0,i.default)(e),"onClose",(function(t){t.stopPropagation(),e.props.onClose(e.props.index)})),(0,f.default)((0,i.default)(e),"getStyle",(function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,f.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({opacity:e?0:1},t)})),e}return(0,u.default)(n,[{key:"render",value:function(){var e,t=this,n=this.props,a=n.title,r=n.id,l=n.index;return p.default.createElement(h.Draggable,{draggableId:r,index:l},(function(n,r){return p.default.createElement("div",(0,o.default)({style:t.getStyle(r.isDragging,n.draggableProps.style),className:"drag-item",onClick:t.onClick,ref:n.innerRef},n.dragHandleProps,n.draggableProps),e||(e=p.default.createElement("div",{className:"drag-item-title"},a)),p.default.createElement("span",{className:"drag-item-close-icon glyphicon glyphicon-remove-circle",onClick:t.onClose}))}))}}]),n}(p.Component);t.default=y},1684:function(e,t,n){"use strict";var a=n(1),r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,l=a(n(35)),u=a(n(36)),i=a(n(331)),s=a(n(96)),c=a(n(97)),d=a(n(85)),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n(0)),p=(a(n(6)),n(152)),h=a(n(548)),g=a(n(13)),m=a(n(1646)),v=n(344),y=a(n(534));function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var _=(0,a(n(59)).default)("NotificationDropdown"),E=function(e){(0,s.default)(n,e);var t=w(n);function n(e){var a;(0,l.default)(this,n),a=t.call(this,e);var r=new Date;return r.setHours(0,0,0,0),a.state={today:r},a.onDropdownToggle=a.onDropdownToggle.bind((0,i.default)(a)),a}return(0,u.default)(n,[{key:"shouldComponentUpdate",value:function(e,t){return _("shouldComponentUpdate: ",this.props!==e||this.state!==t),this.props!==e||this.state!==t}},{key:"onDropdownToggle",value:function(e){if(e){var t=new Date;t.setHours(0,0,0,0),this.setState({today:t}),this.displayBadge||!this.props.notification.lastView?this.props.dispatch((0,v.updateNotification)()):this.props.dispatch((0,v.requestNotification)())}}},{key:"shouldDisplayReddot",value:function(){var e=this.props.notification,t=e.events,n=e.lastView;if(n&&t){var a=new Date(n).getTime();return t.some((function(e){return new Date(e.eventTime).getTime()>a}))}return t&&t.length>0}},{key:"renderDropdownList",value:function(){var e=this,t=this.props.notification.events,n=t&&t.length>0?t.map((function(t){return f.default.createElement("div",{className:"notification-context",key:t.eventTime},f.default.createElement("div",{className:"notification-message",dangerouslySetInnerHTML:{__html:t.message}}),f.default.createElement("div",{className:"notification-time"},y.default.getNotificationTime(e.state.today,new Date(t.eventTime))))})):o||(o=f.default.createElement("div",{className:"notification-none"},"-","　","尚無通知","　","-"));return f.default.createElement("div",{className:"notification-panel"},n)}},{key:"render",value:function(){_("render()"),this.displayBadge=this.shouldDisplayReddot();var e=(0,g.default)("icon ant ant-bell-o",{"icon-badge":this.displayBadge});return f.default.createElement(h.default,{id:"dropdown-favorite",className:"icon-dropdown action-bar__favorite-list__icon",onToggle:this.onDropdownToggle,pullRight:!0},f.default.createElement(m.default,{bsRole:"toggle",iconClass:e}),f.default.createElement(h.default.Menu,{className:"notification__dropdown"},this.renderDropdownList()))}}]),n}(f.Component),k=(0,p.connect)((function(e){return{notification:e.NotificationReducer.notification}}))(E);t.default=k}}]);